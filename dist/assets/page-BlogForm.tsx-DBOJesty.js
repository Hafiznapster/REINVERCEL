import{b as e,a as s,r as a,j as l,L as t,c as i}from"./react-D2emROiK.js";import{g as r,u as n,c as d}from"./page-AdminDashboard.tsx-DFunBsXo.js";var c=Object.defineProperty,o=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,b={}.hasOwnProperty,x={}.propertyIsEnumerable,u=(e,s,a)=>s in e?c(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,j=(e,s)=>{for(var a in s||(s={}))b.call(s,a)&&u(e,a,s[a]);if(h)for(var a of h(s))x.call(s,a)&&u(e,a,s[a]);return e},f=(e,s)=>o(e,m(s)),g=(e,s,a)=>new Promise((l,t)=>{var i=e=>{try{n(a.next(e))}catch(s){t(s)}},r=e=>{try{n(a.throw(e))}catch(s){t(s)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(i,r);n((a=a.apply(e,s)).next())});const p=()=>{const{id:c}=e(),o=s(),m=!!c,[h,b]=a.useState({title:"",author:"",publishDate:(new Date).toISOString().split("T")[0],status:"draft",content:""}),[x,u]=a.useState(null),[p,N]=a.useState(""),[v,y]=a.useState(!1),[w,C]=a.useState(""),[P,D]=a.useState(m);a.useEffect(()=>{m&&c&&S()},[m,c]);const S=()=>g(void 0,null,function*(){try{const e=yield r(c);e&&(b({title:e.title,author:e.author,publishDate:e.publishDate,status:e.status,content:e.content}),e.imageUrl&&N(e.imageUrl))}catch(e){C("Error loading blog post")}finally{D(!1)}});return P?l.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:l.jsx("span",{className:"visually-hidden",children:"Loading..."})}),l.jsx("p",{className:"text-muted",children:"Loading blog post..."})]})}):l.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f8f9fa",paddingTop:"80px"},children:[l.jsx("section",{className:"py-5",style:{backgroundColor:"#336021"},children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"row align-items-center",children:[l.jsx("div",{className:"col-lg-8",children:l.jsxs("div",{className:"text-white",children:[l.jsxs(t,{to:"/admin/dashboard",className:"text-white text-decoration-none mb-3 d-inline-block",children:[l.jsx("i",{className:"fas fa-arrow-left me-2"}),"Back to Dashboard"]}),l.jsx("h1",{className:"display-4 fw-bold mb-2",children:m?"Edit Blog Post":"Create New Blog Post"}),l.jsx("p",{className:"lead mb-0",children:m?"Update your existing blog post":"Write and publish a new blog post"})]})}),l.jsx("div",{className:"col-lg-4 text-lg-end",children:l.jsx("div",{className:"text-white-50",children:l.jsx("i",{className:"fas fa-edit fs-1"})})})]})})}),l.jsx("div",{className:"container py-5",children:l.jsxs("form",{onSubmit:e=>g(void 0,null,function*(){e.preventDefault(),y(!0),C("");try{const e=f(j({},h),{image:x||void 0});m&&c?yield n(c,e):yield d(e),o("/admin/dashboard")}catch(s){C("Error saving blog post")}finally{y(!1)}}),children:[w&&l.jsxs("div",{className:"alert alert-danger d-flex align-items-center mb-4",role:"alert",children:[l.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),l.jsx("div",{children:w})]}),l.jsxs("div",{className:"row g-4",children:[l.jsx("div",{className:"col-lg-8",children:l.jsxs("div",{className:"card border-0 shadow-sm mb-4",children:[l.jsx("div",{className:"card-header bg-white border-bottom",children:l.jsxs("h5",{className:"mb-0 fw-bold",children:[l.jsx("i",{className:"fas fa-file-alt text-primary me-2"}),"Post Content"]})}),l.jsxs("div",{className:"card-body",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{htmlFor:"title",className:"form-label fw-semibold",children:[l.jsx("i",{className:"fas fa-heading text-muted me-2"}),"Title *"]}),l.jsx("input",{type:"text",id:"title",className:"form-control form-control-lg",placeholder:"Enter your blog post title...",value:h.title,onChange:e=>b(f(j({},h),{title:e.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"form-label fw-semibold",children:[l.jsx("i",{className:"fas fa-align-left text-muted me-2"}),"Content *"]}),l.jsx("div",{className:"border rounded",children:l.jsx(i,{theme:"snow",value:h.content,onChange:e=>b(f(j({},h),{content:e})),modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["link","image"],["clean"]]},style:{minHeight:"400px"}})})]})]})]})}),l.jsxs("div",{className:"col-lg-4",children:[l.jsxs("div",{className:"card border-0 shadow-sm mb-4",children:[l.jsx("div",{className:"card-header bg-white border-bottom",children:l.jsxs("h6",{className:"mb-0 fw-bold",children:[l.jsx("i",{className:"fas fa-cog text-success me-2"}),"Publish Settings"]})}),l.jsxs("div",{className:"card-body",children:[l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{htmlFor:"status",className:"form-label fw-semibold",children:"Status"}),l.jsxs("select",{id:"status",className:"form-select",value:h.status,onChange:e=>b(f(j({},h),{status:e.target.value})),children:[l.jsxs("option",{value:"draft",children:[l.jsx("i",{className:"fas fa-clock"})," Draft"]}),l.jsxs("option",{value:"published",children:[l.jsx("i",{className:"fas fa-check-circle"})," Published"]})]})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{htmlFor:"publishDate",className:"form-label fw-semibold",children:"Publish Date"}),l.jsx("input",{type:"date",id:"publishDate",className:"form-control",value:h.publishDate,onChange:e=>b(f(j({},h),{publishDate:e.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"author",className:"form-label fw-semibold",children:"Author *"}),l.jsx("input",{type:"text",id:"author",className:"form-control",placeholder:"Author name",value:h.author,onChange:e=>b(f(j({},h),{author:e.target.value})),required:!0})]})]})]}),l.jsxs("div",{className:"card border-0 shadow-sm mb-4",children:[l.jsx("div",{className:"card-header bg-white border-bottom",children:l.jsxs("h6",{className:"mb-0 fw-bold",children:[l.jsx("i",{className:"fas fa-image text-warning me-2"}),"Featured Image"]})}),l.jsxs("div",{className:"card-body",children:[p&&l.jsxs("div",{className:"position-relative mb-3",children:[l.jsx("img",{src:p,alt:"Preview",className:"img-fluid rounded border",style:{maxHeight:"200px",width:"100%",objectFit:"cover"}}),l.jsx("button",{type:"button",onClick:()=>{N(""),u(null)},className:"btn btn-danger btn-sm position-absolute top-0 end-0 m-2",children:l.jsx("i",{className:"fas fa-times"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"image",className:"form-label fw-semibold",children:"Upload Image"}),l.jsx("input",{type:"file",id:"image",className:"form-control",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){const s=e.target.files[0];u(s);const a=new FileReader;a.onload=e=>{var s;N(null==(s=e.target)?void 0:s.result)},a.readAsDataURL(s)}}}),l.jsxs("div",{className:"form-text",children:[l.jsx("i",{className:"fas fa-info-circle me-1"}),"Recommended: 1200x630px, max 5MB"]})]})]})]}),l.jsx("div",{className:"card border-0 shadow-sm",children:l.jsx("div",{className:"card-body",children:l.jsxs("div",{className:"d-grid gap-2",children:[l.jsx("button",{type:"submit",disabled:v,className:"btn btn-success btn-lg",children:v?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),m?"Updating...":"Creating..."]}):l.jsxs(l.Fragment,{children:[l.jsx("i",{className:"fas fa-save me-2"}),m?"Update Post":"Create Post"]})}),l.jsxs("button",{type:"button",onClick:()=>o("/admin/dashboard"),className:"btn btn-outline-secondary",children:[l.jsx("i",{className:"fas fa-times me-2"}),"Cancel"]})]})})})]})]})]})})]})};export{p as B};
