import{r as e,j as s}from"./react-D2emROiK.js";const a=()=>{const[a,t]=e.useState([]);return e.useEffect(()=>{const e=JSON.parse(localStorage.getItem("solarQuotes")||"[]");t(e.reverse())},[]),s.jsx("div",{className:"container-fluid py-4",children:s.jsx("div",{className:"row",children:s.jsxs("div",{className:"col-12",children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[s.jsx("h2",{children:"Solar Quote Requests"}),s.jsxs("div",{children:[s.jsxs("button",{className:"btn btn-success me-2",onClick:()=>{const e=["Name,Email,Phone,Address,Roof Type,Phases,Notes,Date,API Submitted",...a.map(e=>`"${e.firstName} ${e.lastName}","${e.email}","${e.phone}","${e.address}","${e.roofType}","${e.numberOfPhases}","${e.notes}","${new Date(e.timestamp).toLocaleDateString()}","${e.apiSubmitted?"Yes":"No"}"`)].join("\n"),s=new Blob([e],{type:"text/csv"}),t=window.URL.createObjectURL(s),l=document.createElement("a");l.href=t,l.download=`solar-quotes-${(new Date).toISOString().split("T")[0]}.csv`,l.click(),window.URL.revokeObjectURL(t)},children:[s.jsx("i",{className:"fas fa-download me-2"}),"Export CSV"]}),s.jsxs("button",{className:"btn btn-danger",onClick:()=>{confirm("Are you sure you want to clear all quotes?")&&(localStorage.removeItem("solarQuotes"),t([]))},children:[s.jsx("i",{className:"fas fa-trash me-2"}),"Clear All"]})]})]}),0===a.length?s.jsxs("div",{className:"alert alert-info",children:[s.jsx("i",{className:"fas fa-info-circle me-2"}),"No quote requests yet."]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"row mb-3",children:[s.jsx("div",{className:"col-md-4",children:s.jsx("div",{className:"card bg-primary text-white",children:s.jsxs("div",{className:"card-body text-center",children:[s.jsx("h4",{children:a.length}),s.jsx("small",{children:"Total Quotes"})]})})}),s.jsx("div",{className:"col-md-4",children:s.jsx("div",{className:"card bg-success text-white",children:s.jsxs("div",{className:"card-body text-center",children:[s.jsx("h4",{children:a.filter(e=>e.apiSubmitted).length}),s.jsx("small",{children:"Sent to OpenSolar"})]})})}),s.jsx("div",{className:"col-md-4",children:s.jsx("div",{className:"card bg-warning text-dark",children:s.jsxs("div",{className:"card-body text-center",children:[s.jsx("h4",{children:a.filter(e=>!e.apiSubmitted).length}),s.jsx("small",{children:"Local Only"})]})})})]})}),a.length>0&&s.jsx("div",{className:"card",children:s.jsx("div",{className:"card-body",children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-striped",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Date"}),s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Phone"}),s.jsx("th",{children:"Address"}),s.jsx("th",{children:"Roof Type"}),s.jsx("th",{children:"Phases"}),s.jsx("th",{children:"Notes"}),s.jsx("th",{children:"API Status"})]})}),s.jsx("tbody",{children:a.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:new Date(e.timestamp).toLocaleDateString()}),s.jsxs("td",{children:[e.firstName," ",e.lastName]}),s.jsx("td",{children:s.jsx("a",{href:"mailto:"+e.email,children:e.email})}),s.jsx("td",{children:s.jsx("a",{href:"tel:"+e.phone,children:e.phone})}),s.jsx("td",{children:e.address}),s.jsx("td",{children:e.roofType}),s.jsx("td",{children:e.numberOfPhases}),s.jsx("td",{children:e.notes||"-"}),s.jsx("td",{children:e.apiSubmitted?s.jsxs("span",{className:"badge bg-success",children:[s.jsx("i",{className:"fas fa-check me-1"}),"Sent"]}):s.jsxs("span",{className:"badge bg-warning text-dark",children:[s.jsx("i",{className:"fas fa-clock me-1"}),"Local Only"]})})]},e.id))})]})})})})]})})})};export{a as Q};
