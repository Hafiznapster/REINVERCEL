import{r as e,a as t,u as n,R as s,L as r,b as i,N as a,c as o,d as l,g as c,H as u,e as h,f as d}from"./vendor-Dx4qQQC8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var f={exports:{}},p={},m=e,g=Symbol.for("react.element"),y=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,b=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function w(e,t,n){var s,r={},i=null,a=null;for(s in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(a=t.ref),t)v.call(t,s)&&!x.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===r[s]&&(r[s]=t[s]);return{$$typeof:g,type:e,key:i,ref:a,props:r,_owner:b.current}}p.Fragment=y,p.jsx=w,p.jsxs=w,f.exports=p;var N,_=f.exports,j=t;N=j.createRoot,j.hydrateRoot;const E=()=>{const[t,i]=e.useState(!1),a=e.useRef(null),o=n(),l=o.pathname.startsWith("/services");e.useEffect(()=>{const e=e=>{a.current&&!a.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const c=()=>{i(!1)};return _.jsxs("div",{className:"nav-item dropdown me-4",ref:a,children:[_.jsx("a",{className:"nav-link dropdown-toggle "+(l?"active":""),href:"#",role:"button",onClick:e=>{e.preventDefault(),i(!t)},"aria-expanded":t,children:"Services"}),_.jsx("ul",{className:"dropdown-menu "+(t?"show":""),children:[{path:"/services",icon:"fas fa-list-ul",label:"All Services"},{path:"/services/design-consultancy",icon:"fas fa-drafting-compass",label:"Design & Consultancy"},{path:"/services/solar-battery-ev",icon:"fas fa-solar-panel",label:"Solar, Battery & EV"},{path:"/services/wind-energy",icon:"fas fa-wind",label:"Wind Energy"},{path:"/services/energy-audit",icon:"fas fa-chart-line",label:"Energy Audit & Monitoring"},{path:"/services/maintenance-servicing",icon:"fas fa-tools",label:"Servicing"}].map((e,t)=>_.jsxs(s.Fragment,{children:[1===t&&_.jsx("li",{children:_.jsx("hr",{className:"dropdown-divider"})}),_.jsx("li",{children:_.jsxs(r,{className:"dropdown-item "+(o.pathname===e.path?"active":""),to:e.path,onClick:c,children:[_.jsx("i",{className:`${e.icon} me-2`}),e.label]})})]},e.path))})]})},k=()=>{e.useState(!1);const t=n();return _.jsxs(_.Fragment,{children:[_.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark fixed-top d-none d-lg-block",style:{backgroundColor:"#336021"},children:_.jsxs("div",{className:"container",children:[_.jsx(r,{className:"navbar-brand",to:"/",children:_.jsx("img",{src:"/images/logo-02.png",alt:"REIN Logo",height:"40",className:"d-inline-block align-text-top"})}),_.jsxs("div",{className:"navbar-nav ms-auto d-flex flex-row",children:[_.jsx(r,{className:"nav-link me-4 "+("/"===t.pathname?"active":""),to:"/",children:"Home"}),_.jsx(r,{className:"nav-link me-4 "+("/about"===t.pathname?"active":""),to:"/about",children:"About"}),_.jsx(r,{className:"nav-link me-4 "+("/projects"===t.pathname?"active":""),to:"/projects",children:"Projects"}),_.jsx(E,{}),_.jsx(r,{className:"nav-link me-4 "+("/blogs"===t.pathname?"active":""),to:"/blogs",children:"Blog"}),_.jsx(r,{className:"nav-link me-4 "+("/contact"===t.pathname?"active":""),to:"/contact",children:"Contact"}),_.jsxs(r,{to:"/quote",className:"btn btn-secondary",children:[_.jsx("i",{className:"fas fa-calculator me-2"}),"Get Quote"]})]})]})}),_.jsx("div",{className:"mobile-top-bar d-lg-none",style:{backgroundColor:"#336021",padding:"10px 0"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"d-flex justify-content-center",children:_.jsx(r,{to:"/",children:_.jsx("img",{src:"/images/logo-02.png",alt:"REIN Logo",height:"35"})})})})}),_.jsx("nav",{className:"mobile-bottom-nav d-lg-none fixed-bottom",style:{backgroundColor:"#336021",padding:"8px 0"},children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"d-flex justify-content-around",children:[_.jsxs(r,{to:"/",className:"text-white text-center text-decoration-none "+("/"===t.pathname?"opacity-100":"opacity-75"),children:[_.jsx("div",{children:_.jsx("i",{className:"fas fa-home"})}),_.jsx("small",{children:"Home"})]}),_.jsxs(r,{to:"/about",className:"text-white text-center text-decoration-none "+("/about"===t.pathname?"opacity-100":"opacity-75"),children:[_.jsx("div",{children:_.jsx("i",{className:"fas fa-info-circle"})}),_.jsx("small",{children:"About"})]}),_.jsxs(r,{to:"/services",className:"text-white text-center text-decoration-none "+("/services"===t.pathname?"opacity-100":"opacity-75"),children:[_.jsx("div",{children:_.jsx("i",{className:"fas fa-cogs"})}),_.jsx("small",{children:"Services"})]}),_.jsxs(r,{to:"/projects",className:"text-white text-center text-decoration-none "+("/projects"===t.pathname?"opacity-100":"opacity-75"),children:[_.jsx("div",{children:_.jsx("i",{className:"fas fa-project-diagram"})}),_.jsx("small",{children:"Projects"})]}),_.jsxs(r,{to:"/blogs",className:"text-white text-center text-decoration-none "+("/blogs"===t.pathname?"opacity-100":"opacity-75"),children:[_.jsx("div",{children:_.jsx("i",{className:"fas fa-blog"})}),_.jsx("small",{children:"Blog"})]}),_.jsxs(r,{to:"/contact",className:"text-white text-center text-decoration-none "+("/contact"===t.pathname?"opacity-100":"opacity-75"),children:[_.jsx("div",{children:_.jsx("i",{className:"fas fa-phone"})}),_.jsx("small",{children:"Contact"})]})]})})})]})},T=()=>_.jsx("footer",{className:"bg-dark text-white py-5",children:_.jsxs("div",{className:"container",children:[_.jsxs("div",{className:"row g-4",children:[_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsxs("div",{className:"mb-4",children:[_.jsx("img",{src:"/images/logo-02.png",alt:"REIN Logo",height:"40",className:"mb-3"}),_.jsx("p",{className:"text-light opacity-75",children:"REIN is dedicated to providing sustainable energy solutions that help reduce carbon footprints while saving costs. Our mission is to accelerate the transition to clean, renewable energy."}),_.jsxs("div",{className:"d-flex gap-2",children:[_.jsx("a",{href:"#",className:"btn btn-outline-light btn-sm",children:_.jsx("i",{className:"fab fa-facebook-f"})}),_.jsx("a",{href:"#",className:"btn btn-outline-light btn-sm",children:_.jsx("i",{className:"fab fa-twitter"})}),_.jsx("a",{href:"#",className:"btn btn-outline-light btn-sm",children:_.jsx("i",{className:"fab fa-linkedin-in"})}),_.jsx("a",{href:"#",className:"btn btn-outline-light btn-sm",children:_.jsx("i",{className:"fab fa-youtube"})})]})]})}),_.jsxs("div",{className:"col-lg-2 col-md-6",children:[_.jsx("h5",{className:"fw-bold mb-3",children:"Quick Links"}),_.jsxs("ul",{className:"list-unstyled",children:[_.jsx("li",{className:"mb-2",children:_.jsx("a",{href:"#home",className:"text-light text-decoration-none opacity-75",children:"Home"})}),_.jsx("li",{className:"mb-2",children:_.jsx("a",{href:"#about",className:"text-light text-decoration-none opacity-75",children:"About Us"})}),_.jsx("li",{className:"mb-2",children:_.jsx("a",{href:"#services",className:"text-light text-decoration-none opacity-75",children:"Services"})}),_.jsx("li",{className:"mb-2",children:_.jsx("a",{href:"#projects",className:"text-light text-decoration-none opacity-75",children:"Projects"})}),_.jsx("li",{className:"mb-2",children:_.jsx("a",{href:"#contact",className:"text-light text-decoration-none opacity-75",children:"Contact"})})]})]}),_.jsxs("div",{className:"col-lg-3 col-md-6",children:[_.jsx("h5",{className:"fw-bold mb-3",children:"Our Services"}),_.jsxs("ul",{className:"list-unstyled",children:[_.jsx("li",{className:"mb-2",children:_.jsx("a",{href:"#solar",className:"text-light text-decoration-none opacity-75",children:"Solar Installation"})}),_.jsx("li",{className:"mb-2",children:_.jsx("a",{href:"#wind",className:"text-light text-decoration-none opacity-75",children:"Wind Energy Solutions"})}),_.jsx("li",{className:"mb-2",children:_.jsx("a",{href:"#audit",className:"text-light text-decoration-none opacity-75",children:"Energy Audit & Monitoring"})}),_.jsx("li",{className:"mb-2",children:_.jsx("a",{href:"#maintenance",className:"text-light text-decoration-none opacity-75",children:"Maintenance & Support"})}),_.jsx("li",{className:"mb-2",children:_.jsx("a",{href:"#design",className:"text-light text-decoration-none opacity-75",children:"Consultancy Services"})})]})]}),_.jsxs("div",{className:"col-lg-3 col-md-6",children:[_.jsx("h5",{className:"fw-bold mb-3",children:"Newsletter"}),_.jsx("p",{className:"text-light opacity-75 mb-3",children:"Subscribe to our newsletter to receive updates on the latest renewable energy trends and our services."}),_.jsxs("form",{className:"d-flex",children:[_.jsx("input",{type:"email",className:"form-control me-2",placeholder:"Your Email Address",required:!0}),_.jsx("button",{type:"submit",className:"btn btn-success",children:_.jsx("i",{className:"fas fa-paper-plane"})})]})]})]}),_.jsx("hr",{className:"my-4 opacity-25"}),_.jsxs("div",{className:"row",children:[_.jsx("div",{className:"col-md-6",children:_.jsx("p",{className:"mb-0 text-light opacity-75",children:"Â© 2025 REIN. All Rights Reserved."})}),_.jsx("div",{className:"col-md-6 text-md-end",children:_.jsxs("ul",{className:"list-inline mb-0",children:[_.jsx("li",{className:"list-inline-item",children:_.jsx("a",{href:"#",className:"text-light text-decoration-none opacity-75",children:"Privacy Policy"})}),_.jsx("li",{className:"list-inline-item mx-2 opacity-50",children:"|"}),_.jsx("li",{className:"list-inline-item",children:_.jsx("a",{href:"#",className:"text-light text-decoration-none opacity-75",children:"Terms of Service"})}),_.jsx("li",{className:"list-inline-item mx-2 opacity-50",children:"|"}),_.jsx("li",{className:"list-inline-item",children:_.jsx("a",{href:"#",className:"text-light text-decoration-none opacity-75",children:"Sitemap"})})]})})]})]})}),S=({children:t})=>{const[n,s]=e.useState(!1);return e.useEffect(()=>{window.scrollTo(0,0);const e=setTimeout(()=>{s(!0)},50);return()=>clearTimeout(e)},[]),_.jsx("div",{className:"page-content "+(n?"fade-in-up":""),children:t})},O=()=>_.jsxs("section",{id:"home",className:"hero-section position-relative",style:{minHeight:"100vh",paddingTop:"80px"},children:[_.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100",style:{zIndex:-2},children:_.jsxs("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-100 h-100",style:{objectFit:"cover"},children:[_.jsx("source",{src:"/images/18.webm",type:"video/webm"}),_.jsx("img",{src:"https://images.unsplash.com/photo-1509391366360-2e959784a276?ixlib=rb-4.0.3&auto=format&fit=crop&w=1744&q=80",alt:"Solar Panels Background",className:"w-100 h-100",style:{objectFit:"cover"}})]})}),_.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100",style:{backgroundColor:"rgba(0,0,0,0.5)",zIndex:-1}}),_.jsx("div",{className:"container",children:_.jsx("div",{className:"row align-items-center min-vh-100",children:_.jsx("div",{className:"col-lg-6 col-md-8",children:_.jsxs("div",{className:"hero-content text-white",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge bg-success px-3 py-2",children:"SUSTAINABLE ENERGY SOLUTIONS"})}),_.jsxs("h1",{className:"display-3 fw-bold mb-4",children:["Powering a ",_.jsx("span",{style:{color:"#e68c3a"},children:"Sustainable"}),_.jsx("br",{}),"Future with ",_.jsx("span",{style:{color:"#e68c3a"},children:"Clean Energy"})]}),_.jsx("p",{className:"lead mb-4",children:"Harness the power of renewable energy to reduce your carbon footprint and save on energy costs with our innovative solar, wind, and sustainable energy solutions."}),_.jsxs("div",{className:"d-flex gap-3 flex-wrap",children:[_.jsxs("a",{href:"#services",className:"btn btn-success btn-lg",children:[_.jsx("i",{className:"fas fa-cogs me-2"}),"Our Services"]}),_.jsxs("a",{href:"/quote",className:"btn btn-outline-light btn-lg",children:[_.jsx("i",{className:"fas fa-calculator me-2"}),"Get Quote"]})]})]})})})})]}),C=()=>_.jsx("section",{className:"py-5",style:{backgroundColor:"#f8f9fa"},children:_.jsxs("div",{className:"container",children:[_.jsxs("div",{className:"text-center mb-5",children:[_.jsx("div",{className:"mb-2",children:_.jsx("span",{className:"badge bg-success px-3 py-2",children:"OUR VALUES"})}),_.jsxs("h2",{className:"display-5 fw-bold mb-3",children:["What Drives Us ",_.jsx("span",{style:{color:"#336021"},children:"Forward"})]}),_.jsx("p",{className:"lead text-muted",children:"Our core values guide every decision we make and every project we undertake."})]}),_.jsx("div",{className:"row g-4",children:[{icon:"fas fa-leaf",title:"Sustainability",description:"Committed to environmental stewardship and sustainable practices in all our operations."},{icon:"fas fa-lightbulb",title:"Innovation",description:"Continuously exploring new technologies and solutions to improve energy efficiency."},{icon:"fas fa-shield-alt",title:"Reliability",description:"Delivering dependable solutions and maintaining long-term relationships with our clients."},{icon:"fas fa-star",title:"Excellence",description:"Striving for the highest standards in quality, service, and customer satisfaction."}].map((e,t)=>_.jsx("div",{className:"col-lg-3 col-md-6",children:_.jsxs("div",{className:"text-center h-100 p-4",children:[_.jsx("div",{className:"mb-3",children:_.jsx("i",{className:`${e.icon} fa-3x`,style:{color:"#336021"}})}),_.jsx("h4",{className:"fw-bold mb-3",children:e.title}),_.jsx("p",{className:"text-muted",children:e.description})]})},t))})]})}),A=()=>_.jsx("section",{id:"about",className:"py-5 bg-light",children:_.jsxs("div",{className:"container",children:[_.jsxs("div",{className:"text-center mb-5",children:[_.jsx("div",{className:"mb-2",children:_.jsx("span",{className:"badge bg-success px-3 py-2",children:"ABOUT US"})}),_.jsxs("h2",{className:"display-5 fw-bold mb-3",children:["Leading the ",_.jsx("span",{style:{color:"#336021"},children:"Renewable Energy"})," Revolution"]})]}),_.jsxs("div",{className:"row",children:[_.jsx("div",{className:"col-lg-8 col-md-7 mb-4",children:_.jsx("div",{className:"pe-lg-4",children:_.jsx("p",{className:"lead",children:"At REIN, we are dedicated to shaping a cleaner and more sustainable future through the power of renewable energy. With a passion for excellence and innovation, our team provides comprehensive solutions that empower individuals, businesses, and communities to embrace a greener way of life while enjoying significant cost savings."})})}),_.jsx("div",{className:"col-lg-4 col-md-5 mb-4",children:_.jsx("div",{className:"card h-100 border-0 shadow-sm",children:_.jsxs("div",{className:"card-body text-center",children:[_.jsx("div",{className:"mb-3",children:_.jsx("i",{className:"fas fa-users fa-3x",style:{color:"#336021"}})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Our Expert Team"}),_.jsx("p",{className:"text-muted",children:"Dedicated professionals working towards a sustainable future"})]})})})]}),_.jsxs("div",{className:"row mt-5",children:[_.jsx("div",{className:"col-lg-6 col-md-6 mb-4",children:_.jsx("div",{className:"card h-100 border-0 shadow-sm",children:_.jsxs("div",{className:"card-body",children:[_.jsxs("div",{className:"d-flex align-items-center mb-3",children:[_.jsx("div",{className:"me-3",children:_.jsx("i",{className:"fas fa-bullseye fa-2x",style:{color:"#336021"}})}),_.jsx("h4",{className:"fw-bold mb-0",children:"Our Mission"})]}),_.jsx("p",{className:"text-muted",children:"To accelerate the global transition to sustainable energy through innovative solutions and cutting-edge technology that makes renewable energy accessible and affordable for everyone."})]})})}),_.jsx("div",{className:"col-lg-6 col-md-6 mb-4",children:_.jsx("div",{className:"card h-100 border-0 shadow-sm",children:_.jsxs("div",{className:"card-body",children:[_.jsxs("div",{className:"d-flex align-items-center mb-3",children:[_.jsx("div",{className:"me-3",children:_.jsx("i",{className:"fas fa-eye fa-2x",style:{color:"#336021"}})}),_.jsx("h4",{className:"fw-bold mb-0",children:"Our Vision"})]}),_.jsx("p",{className:"text-muted",children:"A world powered by clean, renewable energy that is accessible and affordable for everyone, creating a sustainable future for generations to come."})]})})})]})]})}),I=()=>_.jsx("section",{className:"py-5",children:_.jsxs("div",{className:"container",children:[_.jsxs("div",{className:"text-center mb-5",children:[_.jsx("div",{className:"mb-2",children:_.jsx("span",{className:"badge bg-success px-3 py-2",children:"WHY CHOOSE REIN"})}),_.jsxs("h2",{className:"display-5 fw-bold mb-3",children:["Why Choose ",_.jsx("span",{style:{color:"#336021"},children:"Our Solutions"})]}),_.jsx("p",{className:"lead text-muted",children:"We combine technical expertise with a passion for sustainability to deliver exceptional results for our clients."})]}),_.jsx("div",{className:"row g-4 mb-5",children:[{icon:"fas fa-leaf",title:"Comprehensive Eco-friendly Energy Solutions",description:"Complete renewable energy systems designed for maximum efficiency and environmental impact."},{icon:"fas fa-headset",title:"Expert Consultation and 24/7 Support",description:"Professional guidance throughout your journey with round-the-clock technical support."},{icon:"fas fa-chart-line",title:"Up to 70% Reduction in Energy Bills",description:"Significant cost savings through optimized renewable energy solutions and smart technology."},{icon:"fas fa-cogs",title:"Customized Solutions for All Sectors",description:"Tailored renewable energy systems for residential, commercial, and industrial applications."}].map((e,t)=>_.jsx("div",{className:"col-lg-6 col-md-6",children:_.jsxs("div",{className:"d-flex align-items-start",children:[_.jsx("div",{className:"me-3 flex-shrink-0",children:_.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"60px",height:"60px",backgroundColor:"#336021"},children:_.jsx("i",{className:`${e.icon} text-white fa-lg`})})}),_.jsxs("div",{children:[_.jsx("h5",{className:"fw-bold mb-2",children:e.title}),_.jsx("p",{className:"text-muted mb-0",children:e.description})]})]})},t))}),_.jsxs("div",{className:"row mt-5",children:[_.jsx("div",{className:"col-lg-6 mb-4",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4",children:[_.jsxs("div",{className:"d-flex align-items-center mb-3",children:[_.jsx("div",{className:"me-3",children:_.jsx("img",{src:"/images/vishnu.webp",alt:"Vishnu Menon - Director",className:"rounded-circle",width:"70",height:"70",style:{objectFit:"cover"}})}),_.jsxs("div",{children:[_.jsx("h4",{className:"fw-bold mb-1",children:"Vishnu Menon"}),_.jsx("p",{className:"text-muted mb-0",children:"Director"})]})]}),_.jsx("blockquote",{className:"mb-3",children:_.jsx("p",{className:"fst-italic",children:'"Our team combines technical expertise with a passion for sustainability to deliver exceptional results for our clients."'})}),_.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[_.jsxs("span",{className:"badge bg-success",children:[_.jsx("i",{className:"fas fa-award me-2"}),"Renewable Energy Expert"]}),_.jsxs("div",{className:"d-flex gap-2",children:[_.jsx("a",{href:"https://www.linkedin.com/in/vishnu-menon-rein/",target:"_blank",className:"btn btn-outline-primary btn-sm",children:_.jsx("i",{className:"fab fa-linkedin-in"})}),_.jsx("a",{href:"mailto:vishnu.menon@revolutionenergyindia.in",className:"btn btn-outline-primary btn-sm",children:_.jsx("i",{className:"fas fa-envelope"})})]})]})]})})}),_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"row g-3",children:[{icon:"fas fa-solar-panel",value:"20+",label:"Projects"},{icon:"fas fa-calendar-check",value:"2+",label:"Years Exp."},{icon:"fas fa-thumbs-up",value:"98%",label:"Satisfaction"},{icon:"fas fa-leaf",value:"100%",label:"Clean Energy"}].map((e,t)=>_.jsx("div",{className:"col-6",children:_.jsx("div",{className:"card border-0 shadow-sm text-center h-100",children:_.jsxs("div",{className:"card-body p-3",children:[_.jsx("div",{className:"mb-2",children:_.jsx("i",{className:`${e.icon} fa-2x`,style:{color:"#336021"}})}),_.jsx("h3",{className:"fw-bold mb-1",style:{color:"#336021"},children:e.value}),_.jsx("p",{className:"text-muted mb-0 small",children:e.label})]})})},t))})})]})]})}),P=()=>_.jsxs(_.Fragment,{children:[_.jsx(O,{}),_.jsx(C,{}),_.jsx(A,{}),_.jsx(I,{})]}),R=()=>_.jsxs(_.Fragment,{children:[_.jsx("section",{className:"hero-section",style:{background:"linear-gradient(135deg, #336021 0%, #4a7c59 100%)",minHeight:"60vh",display:"flex",alignItems:"center",paddingTop:"80px"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row align-items-center",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center text-white",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge bg-light text-dark px-4 py-2 rounded-pill",children:"About Our Company"})}),_.jsxs("h1",{className:"display-4 fw-bold mb-4",children:["Powering a ",_.jsx("span",{className:"text-warning",children:"Sustainable"}),_.jsx("br",{}),"Future with ",_.jsx("span",{className:"text-warning",children:"Expert Team"})]}),_.jsx("p",{className:"lead mb-4",children:"Learn about our mission, vision, and the dedicated team of professionals working to revolutionize the renewable energy landscape with innovative solutions."}),_.jsxs("div",{className:"d-flex justify-content-center gap-3 flex-wrap",children:[_.jsxs("a",{href:"#team",className:"btn btn-warning btn-lg",children:[_.jsx("i",{className:"fas fa-users me-2"}),"Meet Our Team"]}),_.jsxs("a",{href:"/contact",className:"btn btn-outline-light btn-lg",children:[_.jsx("i",{className:"fas fa-phone me-2"}),"Get In Touch"]})]})]})})})}),_.jsx("section",{className:"py-5 bg-light",children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row g-5",children:[_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"card h-100 border-0 shadow-sm",children:_.jsxs("div",{className:"card-body p-5 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-bullseye fa-3x"})}),_.jsx("h3",{className:"card-title fw-bold mb-4",children:"Our Mission"}),_.jsx("p",{className:"card-text",children:"To accelerate India's transition to sustainable energy by providing innovative, reliable, and cost-effective renewable energy solutions that empower communities and businesses to achieve energy independence while contributing to a cleaner environment."})]})})}),_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"card h-100 border-0 shadow-sm",children:_.jsxs("div",{className:"card-body p-5 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-eye fa-3x"})}),_.jsx("h3",{className:"card-title fw-bold mb-4",children:"Our Vision"}),_.jsx("p",{className:"card-text",children:"To be India's leading renewable energy company, recognized for our commitment to sustainability, innovation, and excellence in delivering clean energy solutions that create lasting positive impact for future generations."})]})})})]})})}),_.jsx("section",{className:"py-5",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Our Values"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["What Drives Us ",_.jsx("span",{style:{color:"#336021"},children:"Forward"})]}),_.jsx("p",{className:"lead",children:"Our core values guide every decision we make and every project we undertake."})]})}),_.jsxs("div",{className:"row g-4",children:[_.jsx("div",{className:"col-lg-3 col-md-6",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"mb-3",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-leaf fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Sustainability"}),_.jsx("p",{children:"Committed to environmental stewardship and sustainable practices in all our operations."})]})}),_.jsx("div",{className:"col-lg-3 col-md-6",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"mb-3",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-lightbulb fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Innovation"}),_.jsx("p",{children:"Continuously exploring new technologies and solutions to improve energy efficiency."})]})}),_.jsx("div",{className:"col-lg-3 col-md-6",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"mb-3",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-shield-alt fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Reliability"}),_.jsx("p",{children:"Delivering dependable solutions and maintaining long-term relationships with our clients."})]})}),_.jsx("div",{className:"col-lg-3 col-md-6",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"mb-3",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-star fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Excellence"}),_.jsx("p",{children:"Striving for the highest standards in quality, service, and customer satisfaction."})]})})]})]})}),_.jsx("section",{id:"team",className:"py-5 bg-light",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"OUR EXPERT TEAM"})}),_.jsxs("h2",{className:"display-5 fw-bold mb-4",children:["Expert Team ",_.jsx("span",{style:{color:"#336021"},children:"Members"})]}),_.jsx("p",{className:"lead",children:"Meet our dedicated professionals who are passionate about renewable energy and committed to delivering exceptional results."})]})}),_.jsxs("div",{className:"row justify-content-center g-4",children:[_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[_.jsxs("div",{className:"position-relative overflow-hidden",style:{height:"350px"},children:[_.jsx("img",{src:"/images/karthik.webp",alt:"Karthikeya Singh",className:"card-img-top",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center center"}}),_.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{background:"rgba(51, 96, 33, 0.8)",opacity:0,transition:"opacity 0.3s ease"},onMouseEnter:e=>e.currentTarget.style.opacity="1",onMouseLeave:e=>e.currentTarget.style.opacity="0",children:_.jsx("a",{href:"https://www.linkedin.com/in/kartikeya-singh-028685363",target:"_blank",rel:"noopener noreferrer",className:"btn btn-light rounded-circle d-flex align-items-center justify-content-center",style:{width:"60px",height:"60px"},children:_.jsx("i",{className:"fab fa-linkedin-in fa-lg",style:{color:"#336021"}})})})]}),_.jsxs("div",{className:"card-body text-center p-4 d-flex flex-column",children:[_.jsx("h4",{className:"fw-bold mb-2",children:"Karthikeya Singh"}),_.jsx("p",{className:"text-muted mb-2",children:"Senior Design Engineer"}),_.jsx("p",{className:"small flex-grow-1",children:"Expert in renewable energy system design with extensive experience in solar and wind energy projects."})]})]})}),_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[_.jsxs("div",{className:"position-relative overflow-hidden",style:{height:"350px"},children:[_.jsx("img",{src:"/images/vishnu.webp",alt:"Vishnu Menon",className:"card-img-top",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"65% 70%",transform:"scale(0.9) translateY(20px)"}}),_.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{background:"rgba(51, 96, 33, 0.8)",opacity:0,transition:"opacity 0.3s ease"},onMouseEnter:e=>e.currentTarget.style.opacity="1",onMouseLeave:e=>e.currentTarget.style.opacity="0",children:_.jsx("a",{href:"https://www.linkedin.com/in/vishnu-menon-6130b7125",target:"_blank",rel:"noopener noreferrer",className:"btn btn-light rounded-circle d-flex align-items-center justify-content-center",style:{width:"60px",height:"60px"},children:_.jsx("i",{className:"fab fa-linkedin-in fa-lg",style:{color:"#336021"}})})})]}),_.jsxs("div",{className:"card-body text-center p-4 d-flex flex-column",children:[_.jsx("h4",{className:"fw-bold mb-2",children:"Vishnu Menon"}),_.jsx("p",{className:"text-muted mb-2",children:"Director"}),_.jsx("p",{className:"small flex-grow-1",children:"Visionary leader driving REIN's mission to revolutionize India's renewable energy landscape with innovative solutions."})]})]})})]})]})}),_.jsx("section",{className:"py-5",children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center",children:[_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Ready to Join the"," ",_.jsx("span",{style:{color:"#336021"},children:"Clean Energy"})," ","Revolution?"]}),_.jsx("p",{className:"lead mb-4",children:"Let's work together to create a sustainable future with renewable energy solutions tailored to your needs."}),_.jsxs("div",{className:"d-flex justify-content-center gap-3 flex-wrap",children:[_.jsxs("a",{href:"/contact",className:"btn btn-lg",style:{backgroundColor:"#336021",color:"white"},children:[_.jsx("i",{className:"fas fa-phone me-2"}),"Get Started"]}),_.jsxs("a",{href:"/services",className:"btn btn-outline-success btn-lg",children:[_.jsx("i",{className:"fas fa-info-circle me-2"}),"Learn More"]})]})]})})})})]}),L=()=>_.jsxs("div",{style:{paddingTop:"80px"},children:[_.jsx("header",{className:"py-5",style:{background:"linear-gradient(135deg, #336021 0%, #4a7c59 100%)",minHeight:"60vh",display:"flex",alignItems:"center"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-12 text-center text-white",children:[_.jsx("h1",{className:"display-3 fw-bold mb-4",children:"Our Services"}),_.jsx("p",{className:"lead mb-4",style:{fontSize:"1.25rem"},children:"Comprehensive renewable energy solutions tailored to meet your specific needs and requirements."}),_.jsxs("div",{className:"d-flex justify-content-center align-items-center my-4",children:[_.jsx("div",{style:{height:"2px",width:"60px",backgroundColor:"#ffc107"}}),_.jsx("div",{className:"mx-3",style:{color:"#ffc107"},children:_.jsx("i",{className:"fas fa-cogs fa-2x"})}),_.jsx("div",{style:{height:"2px",width:"60px",backgroundColor:"#ffc107"}})]})]})})})}),_.jsx("section",{className:"py-5",children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"What We Offer"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Complete ",_.jsx("span",{style:{color:"#336021"},children:"Renewable Energy"})," Solutions"]}),_.jsx("p",{className:"lead",children:"From initial consultation to ongoing maintenance, we provide end-to-end renewable energy services that help you achieve energy independence and sustainability goals."})]})})})}),_.jsx("section",{className:"py-5 bg-light",children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row g-5 stagger-animation",children:[_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"card h-100 border-0 shadow-sm hover-lift",children:_.jsxs("div",{className:"card-body p-5",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-solar-panel fa-3x"})}),_.jsx("h3",{className:"card-title fw-bold mb-3",children:"Solar Energy Solutions"}),_.jsx("p",{className:"card-text mb-4",children:"Complete solar installation services including rooftop solar systems, ground-mounted installations, and solar battery storage solutions for residential, commercial, and industrial applications."}),_.jsxs("ul",{className:"list-unstyled mb-4",children:[_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Rooftop Solar Installation"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Ground-Mounted Systems"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Solar Battery Storage"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Grid-Tie & Off-Grid Systems"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"EV Charging Integration"]})]}),_.jsxs(r,{to:"/services/solar-battery-ev",className:"btn",style:{backgroundColor:"#336021",color:"white"},children:[_.jsx("i",{className:"fas fa-arrow-right me-2"}),"Learn More"]})]})})}),_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"card h-100 border-0 shadow-sm hover-lift",children:_.jsxs("div",{className:"card-body p-5",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-wind fa-3x"})}),_.jsx("h3",{className:"card-title fw-bold mb-3",children:"Wind Energy Solutions"}),_.jsx("p",{className:"card-text mb-4",children:"Professional wind turbine installation and maintenance services for both commercial and residential applications, helping you harness the power of wind for clean energy generation."}),_.jsxs("ul",{className:"list-unstyled mb-4",children:[_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Wind Resource Assessment"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Turbine Installation"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Grid Connection"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Performance Monitoring"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Maintenance Services"]})]}),_.jsxs(r,{to:"/services/wind-energy",className:"btn",style:{backgroundColor:"#336021",color:"white"},children:[_.jsx("i",{className:"fas fa-arrow-right me-2"}),"Learn More"]})]})})}),_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"card h-100 border-0 shadow-sm hover-lift",children:_.jsxs("div",{className:"card-body p-5",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-drafting-compass fa-3x"})}),_.jsx("h3",{className:"card-title fw-bold mb-3",children:"Design & Consultancy"}),_.jsx("p",{className:"card-text mb-4",children:"Expert design and consultancy services for renewable energy projects of all scales. Our experienced team provides comprehensive planning and engineering solutions."}),_.jsxs("ul",{className:"list-unstyled mb-4",children:[_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Feasibility Studies"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"System Design"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Engineering Services"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Project Management"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Regulatory Compliance"]})]}),_.jsxs(r,{to:"/services/design-consultancy",className:"btn",style:{backgroundColor:"#336021",color:"white"},children:[_.jsx("i",{className:"fas fa-arrow-right me-2"}),"Learn More"]})]})})}),_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"card h-100 border-0 shadow-sm hover-lift",children:_.jsxs("div",{className:"card-body p-5",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-chart-line fa-3x"})}),_.jsx("h3",{className:"card-title fw-bold mb-3",children:"Energy Audit, Monitoring & Management"}),_.jsx("p",{className:"card-text mb-4",children:"Comprehensive energy services designed to optimize your energy consumption, reduce costs, and promote sustainability through expert audit, monitoring, and management solutions."}),_.jsxs("ul",{className:"list-unstyled mb-4",children:[_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Energy Audit Services"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Real-time Energy Monitoring"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Energy Management Systems"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Cost Reduction Strategies"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Performance Optimization"]})]}),_.jsxs(r,{to:"/services/energy-audit",className:"btn",style:{backgroundColor:"#336021",color:"white"},children:[_.jsx("i",{className:"fas fa-arrow-right me-2"}),"Learn More"]})]})})}),_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"card h-100 border-0 shadow-sm hover-lift",children:_.jsxs("div",{className:"card-body p-5",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-tools fa-3x"})}),_.jsx("h3",{className:"card-title fw-bold mb-3",children:"Servicing & Maintenance"}),_.jsx("p",{className:"card-text mb-4",children:"Regular maintenance, repair, and optimization services for all your renewable energy systems to ensure peak performance and longevity."}),_.jsxs("ul",{className:"list-unstyled mb-4",children:[_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Preventive Maintenance"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"System Repairs"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Performance Optimization"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"Component Replacement"]}),_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),"24/7 Emergency Support"]})]}),_.jsxs(r,{to:"/services/maintenance-servicing",className:"btn",style:{backgroundColor:"#336021",color:"white"},children:[_.jsx("i",{className:"fas fa-arrow-right me-2"}),"Learn More"]})]})})})]})})}),_.jsx("section",{className:"py-5",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Additional ",_.jsx("span",{style:{color:"#336021"},children:"Services"})]}),_.jsx("p",{className:"lead",children:"Supporting services to ensure your renewable energy systems operate at peak performance."})]})}),_.jsxs("div",{className:"row g-4",children:[_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-tools fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Maintenance & Support"}),_.jsx("p",{className:"mb-4",children:"Regular maintenance services to ensure optimal performance and longevity of your renewable energy systems."}),_.jsx(r,{to:"/services/maintenance-servicing",className:"btn btn-outline-success",children:"Learn More"})]})}),_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-car-battery fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"EV Charging Solutions"}),_.jsx("p",{className:"mb-4",children:"Electric vehicle charging station installation and integration with renewable energy systems."}),_.jsx(r,{to:"/services/solar-battery-ev",className:"btn btn-outline-success",children:"Learn More"})]})}),_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-certificate fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Certification & Compliance"}),_.jsx("p",{className:"mb-4",children:"Assistance with regulatory compliance, certifications, and government incentive applications."}),_.jsx(r,{to:"/contact",className:"btn btn-outline-success",children:"Learn More"})]})})]})]})}),_.jsx("section",{className:"py-5",style:{backgroundColor:"#336021"},children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row align-items-center",children:[_.jsxs("div",{className:"col-lg-8 text-white",children:[_.jsx("h2",{className:"display-6 fw-bold mb-3",children:"Ready to Get Started?"}),_.jsx("p",{className:"lead mb-0",children:"Contact our experts today to discuss your renewable energy needs and get a customized solution for your project."})]}),_.jsx("div",{className:"col-lg-4 text-lg-end mt-3 mt-lg-0",children:_.jsxs(r,{to:"/contact",className:"btn btn-warning btn-lg",children:[_.jsx("i",{className:"fas fa-phone me-2"}),"Get Free Consultation"]})})]})})})]}),D=()=>_.jsxs("div",{style:{paddingTop:"80px"},children:[_.jsx("header",{className:"py-5",style:{background:"linear-gradient(135deg, #336021 0%, #4a7c59 100%)",minHeight:"60vh",display:"flex",alignItems:"center"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-12 text-center text-white",children:[_.jsx("h1",{className:"display-3 fw-bold mb-4",children:"Our Projects"}),_.jsx("p",{className:"lead mb-4",style:{fontSize:"1.25rem"},children:"Showcasing our successful renewable energy installations across India, from residential rooftops to large-scale commercial projects."}),_.jsxs("div",{className:"d-flex justify-content-center align-items-center my-4",children:[_.jsx("div",{style:{height:"2px",width:"60px",backgroundColor:"#ffc107"}}),_.jsx("div",{className:"mx-3",style:{color:"#ffc107"},children:_.jsx("i",{className:"fas fa-solar-panel fa-2x"})}),_.jsx("div",{style:{height:"2px",width:"60px",backgroundColor:"#ffc107"}})]})]})})})}),_.jsx("section",{className:"py-5",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsx("div",{className:"col-lg-12",children:_.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-5",children:[_.jsxs("div",{children:[_.jsx("div",{className:"mb-2",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Featured Projects"})}),_.jsxs("h2",{className:"display-5 fw-bold mb-0",children:["Our ",_.jsx("span",{style:{color:"#336021"},children:"Success Stories"})]})]}),_.jsx("div",{className:"d-none d-md-block",children:_.jsxs("a",{href:"/contact",className:"btn btn-outline-success btn-lg",children:[_.jsx("i",{className:"fas fa-phone me-2"}),"Get Consultation"]})})]})})}),_.jsxs("div",{className:"row g-4",children:[_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[_.jsxs("div",{className:"position-relative overflow-hidden",style:{height:"250px"},children:[_.jsx("img",{src:"/images/monroe.webp",alt:"Monroe Solar Farm",className:"card-img-top w-100 h-100",style:{objectFit:"cover"},onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextElementSibling.style.display="flex"}}),_.jsx("div",{className:"w-100 h-100 bg-light align-items-center justify-content-center",style:{display:"none"},children:_.jsx("i",{className:"fas fa-solar-panel fa-4x",style:{color:"#336021"}})}),_.jsx("div",{className:"position-absolute top-0 end-0 m-3",children:_.jsx("span",{className:"badge",style:{backgroundColor:"#336021",color:"white"},children:"Solar Farm"})})]}),_.jsxs("div",{className:"card-body",children:[_.jsx("h4",{className:"card-title fw-bold",children:"Monroe Solar Farm"}),_.jsx("p",{className:"card-text",children:"A 14MW solar farm project that overcame unique terrain challenges to deliver sustainable energy to over 3,500 homes."}),_.jsxs("div",{className:"row g-2 mb-3",children:[_.jsx("div",{className:"col-6",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("i",{className:"fas fa-bolt me-2",style:{color:"#336021"}}),_.jsx("span",{className:"small",children:"14MW Capacity"})]})}),_.jsx("div",{className:"col-6",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("i",{className:"fas fa-home me-2",style:{color:"#336021"}}),_.jsx("span",{className:"small",children:"3,500+ Homes"})]})})]}),_.jsxs(r,{to:"/projects/monroe-solar-farm",className:"text-decoration-none",style:{color:"#336021"},children:["View Project ",_.jsx("i",{className:"fas fa-arrow-right"})]})]})]})}),_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[_.jsxs("div",{className:"position-relative overflow-hidden",style:{height:"250px"},children:[_.jsx("img",{src:"/images/follain.webp",alt:"Follain Solar Project",className:"card-img-top w-100 h-100",style:{objectFit:"cover"},onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextElementSibling.style.display="flex"}}),_.jsx("div",{className:"w-100 h-100 bg-light align-items-center justify-content-center",style:{display:"none"},children:_.jsx("i",{className:"fas fa-industry fa-4x",style:{color:"#336021"}})}),_.jsx("div",{className:"position-absolute top-0 end-0 m-3",children:_.jsx("span",{className:"badge",style:{backgroundColor:"#336021",color:"white"},children:"Commercial Solar"})})]}),_.jsxs("div",{className:"card-body",children:[_.jsx("h4",{className:"card-title fw-bold",children:"Follain Project"}),_.jsx("p",{className:"card-text",children:"A 484 kWp solar installation for a commercial facility, reducing carbon emissions by 210 tons annually."}),_.jsxs("div",{className:"row g-2 mb-3",children:[_.jsx("div",{className:"col-6",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("i",{className:"fas fa-solar-panel me-2",style:{color:"#336021"}}),_.jsx("span",{className:"small",children:"484 kWp"})]})}),_.jsx("div",{className:"col-6",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("i",{className:"fas fa-leaf me-2",style:{color:"#336021"}}),_.jsx("span",{className:"small",children:"210 Tons COâ Saved"})]})})]}),_.jsxs(r,{to:"/projects/follain-project",className:"text-decoration-none",style:{color:"#336021"},children:["View Project ",_.jsx("i",{className:"fas fa-arrow-right"})]})]})]})}),_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[_.jsxs("div",{className:"position-relative overflow-hidden",style:{height:"250px"},children:[_.jsx("img",{src:"/images/mahony.webp",alt:"Denis Mahony Project",className:"card-img-top w-100 h-100",style:{objectFit:"cover"},onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextElementSibling.style.display="flex"}}),_.jsx("div",{className:"w-100 h-100 bg-light align-items-center justify-content-center",style:{display:"none"},children:_.jsx("i",{className:"fas fa-cog fa-4x",style:{color:"#336021"}})}),_.jsx("div",{className:"position-absolute top-0 end-0 m-3",children:_.jsx("span",{className:"badge",style:{backgroundColor:"#336021",color:"white"},children:"Hybrid System"})})]}),_.jsxs("div",{className:"card-body",children:[_.jsx("h4",{className:"card-title fw-bold",children:"Denis Mahony"}),_.jsx("p",{className:"card-text",children:"An integrated renewable energy system producing 95 MWh annually and covering 60% of the facility's energy needs."}),_.jsxs("div",{className:"row g-2 mb-3",children:[_.jsx("div",{className:"col-6",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("i",{className:"fas fa-chart-line me-2",style:{color:"#336021"}}),_.jsx("span",{className:"small",children:"95 MWh/Year"})]})}),_.jsx("div",{className:"col-6",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("i",{className:"fas fa-percentage me-2",style:{color:"#336021"}}),_.jsx("span",{className:"small",children:"60% Coverage"})]})})]}),_.jsxs(r,{to:"/projects/denis-mahony-project",className:"text-decoration-none",style:{color:"#336021"},children:["View Project ",_.jsx("i",{className:"fas fa-arrow-right"})]})]})]})})]}),_.jsx("div",{className:"row mt-4 d-md-none",children:_.jsx("div",{className:"col-12 text-center",children:_.jsxs("a",{href:"/contact",className:"btn btn-outline-success",children:[_.jsx("i",{className:"fas fa-phone me-2"}),"Get Consultation"]})})})]})}),_.jsx("section",{className:"py-5 bg-light",children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row text-center",children:[_.jsxs("div",{className:"col-lg-3 col-md-6 mb-4",children:[_.jsx("div",{className:"h2 fw-bold",style:{color:"#336021"},children:"50+"}),_.jsx("p",{className:"mb-0",children:"Projects Completed"})]}),_.jsxs("div",{className:"col-lg-3 col-md-6 mb-4",children:[_.jsx("div",{className:"h2 fw-bold",style:{color:"#336021"},children:"2MW+"}),_.jsx("p",{className:"mb-0",children:"Total Capacity Installed"})]}),_.jsxs("div",{className:"col-lg-3 col-md-6 mb-4",children:[_.jsx("div",{className:"h2 fw-bold",style:{color:"#336021"},children:"1000+"}),_.jsx("p",{className:"mb-0",children:"Tons CO2 Reduced"})]}),_.jsxs("div",{className:"col-lg-3 col-md-6 mb-4",children:[_.jsx("div",{className:"h2 fw-bold",style:{color:"#336021"},children:"100%"}),_.jsx("p",{className:"mb-0",children:"Client Satisfaction"})]})]})})}),_.jsx("section",{className:"py-5",style:{backgroundColor:"#336021"},children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row align-items-center",children:[_.jsxs("div",{className:"col-lg-8 text-white",children:[_.jsx("h2",{className:"display-6 fw-bold mb-3",children:"Ready to Start Your Project?"}),_.jsx("p",{className:"lead mb-0",children:"Join our growing list of satisfied customers who have made the switch to renewable energy. Get a free consultation today!"})]}),_.jsx("div",{className:"col-lg-4 text-lg-end mt-3 mt-lg-0",children:_.jsxs("a",{href:"/contact",className:"btn btn-warning btn-lg",children:[_.jsx("i",{className:"fas fa-rocket me-2"}),"Start Your Project"]})})]})})})]});class M{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const q={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},U=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},F=async(e,t,n={})=>{const s=await fetch(q.origin+e,{method:"POST",headers:n,body:t}),r=await s.text(),i=new M(s.status,r);if(s.ok)return i;throw i},V=(e,t,n)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!=typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},B=e=>e.webdriver||!e.languages||0===e.languages.length,z=()=>new M(451,"Unavailable For Headless Browser"),H=(e,t)=>{if((e=>{var t;return!(null==(t=e.list)?void 0:t.length)||!e.watchVariable})(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const n=(s=t,r=e.watchVariable,s instanceof FormData?s.get(r):s[r]);var s,r;return"string"==typeof n&&e.list.includes(n)},$=()=>new M(403,"Forbidden"),K=async(e,t,n)=>{if(!t.throttle||!n)return!1;((e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const s=t.id||e,r=await(async(e,t,n)=>{const s=Number(await n.get(e)||0);return t-Date.now()+s})(s,t.throttle,n);return r>0||(await n.set(s,Date.now().toString()),!1)},W=()=>new M(429,"Too Many Requests"),G=async(e,t,n,s)=>{const r=U(s),i=r.publicKey||q.publicKey,a=r.blockHeadless||q.blockHeadless,o=r.storageProvider||q.storageProvider,l={...q.blockList,...r.blockList},c={...q.limitRate,...r.limitRate};if(a&&B(navigator))return Promise.reject(z());if(V(i,e,t),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(n),n&&H(l,n))return Promise.reject($());if(await K(location.pathname,c,o))return Promise.reject(W());const u={lib_version:"4.4.1",user_id:i,service_id:e,template_id:t,template_params:n};return F("/api/v1.0/email/send",JSON.stringify(u),{"Content-type":"application/json"})},Q=()=>{const[t,n]=e.useState({name:"",email:"",phone:"",service:"",message:""}),[s,r]=e.useState(!1),[i,a]=e.useState(""),[o,l]=e.useState(!1),[c,u]=e.useState(!1),h=e=>{n({...t,[e.target.name]:e.target.value})};return _.jsxs("section",{id:"contact",className:"py-5 bg-light",children:[o&&_.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:-1,children:_.jsx("div",{className:"modal-dialog modal-dialog-centered",children:_.jsx("div",{className:"modal-content border-0 shadow-lg",children:_.jsx("div",{className:"modal-body text-center p-5",children:_.jsxs("div",{className:"mb-4",children:[_.jsx("div",{className:"rounded-circle d-inline-flex align-items-center justify-content-center mb-3",style:{width:"80px",height:"80px",backgroundColor:"#336021"},children:_.jsx("i",{className:"fas fa-check text-white fa-2x"})}),_.jsx("h3",{className:"fw-bold mb-3",style:{color:"#336021"},children:"Message Sent Successfully!"}),_.jsx("p",{className:"lead mb-4",children:"Thank you for contacting REIN! We've received your message and will get back to you within 24 hours."}),_.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[_.jsxs("button",{className:"btn btn-success",onClick:()=>l(!1),children:[_.jsx("i",{className:"fas fa-thumbs-up me-2"}),"Great!"]}),_.jsx("button",{className:"btn btn-outline-success",onClick:()=>l(!1),children:"Close"})]})]})})})})}),c&&_.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:-1,children:_.jsx("div",{className:"modal-dialog modal-dialog-centered",children:_.jsx("div",{className:"modal-content border-0 shadow-lg",children:_.jsx("div",{className:"modal-body text-center p-5",children:_.jsxs("div",{className:"mb-4",children:[_.jsx("div",{className:"rounded-circle d-inline-flex align-items-center justify-content-center mb-3",style:{width:"80px",height:"80px",backgroundColor:"#dc3545"},children:_.jsx("i",{className:"fas fa-exclamation-triangle text-white fa-2x"})}),_.jsx("h3",{className:"fw-bold mb-3",style:{color:"#dc3545"},children:"Message Failed to Send"}),_.jsx("p",{className:"lead mb-4",children:"Sorry, there was an error sending your message. Please try again or contact us directly at vishnu.menon@revolutionenergyindia.in"}),_.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[_.jsxs("button",{className:"btn btn-danger",onClick:()=>u(!1),children:[_.jsx("i",{className:"fas fa-times me-2"}),"Try Again"]}),_.jsx("button",{className:"btn btn-outline-danger",onClick:()=>u(!1),children:"Close"})]})]})})})})}),i&&_.jsx("div",{className:"position-fixed top-0 end-0 p-3",style:{zIndex:1050},children:_.jsxs("div",{className:"toast show",role:"alert","aria-live":"assertive","aria-atomic":"true",children:[_.jsxs("div",{className:"toast-header",children:[_.jsx("i",{className:"fas fa-copy text-success me-2"}),_.jsx("strong",{className:"me-auto",children:"Copied!"}),_.jsx("button",{type:"button",className:"btn-close",onClick:()=>a(""),"aria-label":"Close"})]}),_.jsx("div",{className:"toast-body",children:i})]})}),_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsx("div",{className:"mb-2",children:_.jsx("span",{className:"badge bg-success px-3 py-2",children:"GET IN TOUCH"})}),_.jsxs("h2",{className:"display-5 fw-bold mb-3",children:["Ready to Switch to ",_.jsx("span",{style:{color:"#336021"},children:"Clean Energy?"})]}),_.jsx("p",{className:"lead",children:"Fill out the form below and our team will get back to you within 24 hours to discuss your renewable energy needs."})]})}),_.jsxs("div",{className:"row g-5",children:[_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"card border-0 shadow-sm",children:_.jsx("div",{className:"card-body p-4",children:_.jsxs("form",{onSubmit:async e=>{e.preventDefault(),r(!0);try{await G("service_ynplrof","template_qz7myg9",{from_name:t.name,from_email:t.email,phone:t.phone,service:t.service,message:t.message},"wvDuNJnsPNn0OFV-A");l(!0),n({name:"",email:"",phone:"",service:"",message:""}),setTimeout(()=>{l(!1)},5e3)}catch(s){u(!0),setTimeout(()=>{u(!1)},5e3)}finally{r(!1)}},children:[_.jsxs("div",{className:"row",children:[_.jsxs("div",{className:"col-md-6 mb-3",children:[_.jsx("label",{htmlFor:"name",className:"form-label",children:"Full Name"}),_.jsx("input",{type:"text",name:"name",id:"name",className:"form-control",placeholder:"Enter your full name",value:t.name,onChange:h,required:!0})]}),_.jsxs("div",{className:"col-md-6 mb-3",children:[_.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),_.jsx("input",{type:"email",name:"email",id:"email",className:"form-control",placeholder:"Enter your email",value:t.email,onChange:h,required:!0})]})]}),_.jsxs("div",{className:"row",children:[_.jsxs("div",{className:"col-md-6 mb-3",children:[_.jsx("label",{htmlFor:"phone",className:"form-label",children:"Phone Number"}),_.jsx("input",{type:"tel",name:"phone",id:"phone",className:"form-control",placeholder:"Enter your phone number",value:t.phone,onChange:h})]}),_.jsxs("div",{className:"col-md-6 mb-3",children:[_.jsx("label",{htmlFor:"service",className:"form-label",children:"Service Interest"}),_.jsxs("select",{name:"service",id:"service",className:"form-control",value:t.service,onChange:h,children:[_.jsx("option",{value:"",children:"Select a service"}),_.jsx("option",{value:"solar",children:"Solar Installation"}),_.jsx("option",{value:"wind",children:"Wind Energy"}),_.jsx("option",{value:"energy-audit",children:"Energy Audit"}),_.jsx("option",{value:"consultation",children:"Consultation"}),_.jsx("option",{value:"other",children:"Other"})]})]})]}),_.jsxs("div",{className:"mb-3",children:[_.jsx("label",{htmlFor:"message",className:"form-label",children:"Message"}),_.jsx("textarea",{name:"message",id:"message",className:"form-control",rows:4,placeholder:"Tell us about your project requirements...",value:t.message,onChange:h,required:!0})]}),_.jsx("button",{type:"submit",className:"btn btn-success btn-lg w-100",disabled:s,children:s?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Sending..."]}):_.jsxs(_.Fragment,{children:[_.jsx("i",{className:"fas fa-paper-plane me-2"}),"Send Message"]})})]})})})}),_.jsxs("div",{className:"col-lg-6",children:[_.jsxs("div",{className:"row g-4",children:[_.jsx("div",{className:"col-12",children:_.jsx("div",{className:"card border-0 shadow-sm",children:_.jsx("div",{className:"card-body p-4",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("div",{className:"me-4",children:_.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"60px",height:"60px",backgroundColor:"#336021"},children:_.jsx("i",{className:"fas fa-phone text-white fa-lg"})})}),_.jsxs("div",{className:"flex-grow-1",children:[_.jsx("h4",{className:"fw-bold mb-2",children:"Call Us"}),_.jsx("h5",{className:"mb-2",style:{color:"#336021"},children:_.jsx("button",{className:"btn btn-link p-0 text-decoration-none fw-semibold",style:{color:"#336021"},onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),a("Phone number copied!"),setTimeout(()=>a(""),3e3)}catch(t){a("Failed to copy number"),setTimeout(()=>a(""),3e3)}})("9633126288"),children:"9633126288"})}),_.jsx("p",{className:"mb-0 text-muted",children:"Click to copy number"})]})]})})})}),_.jsx("div",{className:"col-12",children:_.jsx("div",{className:"card border-0 shadow-sm",children:_.jsx("div",{className:"card-body p-4",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("div",{className:"me-4",children:_.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"60px",height:"60px",backgroundColor:"#336021"},children:_.jsx("i",{className:"fas fa-envelope text-white fa-lg"})})}),_.jsxs("div",{className:"flex-grow-1",children:[_.jsx("h4",{className:"fw-bold mb-2",children:"Email Us"}),_.jsx("p",{className:"mb-1",children:_.jsx("a",{href:"mailto:vishnu.menon@revolutionenergyindia.in",className:"text-decoration-none",style:{color:"#336021"},children:"vishnu.menon@revolutionenergyindia.in"})}),_.jsx("p",{className:"mb-0",children:_.jsx("a",{href:"mailto:info@revolutionenergyindia.in",className:"text-decoration-none",style:{color:"#336021"},children:"info@revolutionenergyindia.in"})})]})]})})})}),_.jsx("div",{className:"col-12",children:_.jsx("div",{className:"card border-0 shadow-sm",children:_.jsx("div",{className:"card-body p-4",children:_.jsxs("div",{className:"d-flex align-items-start",children:[_.jsx("div",{className:"me-4",children:_.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"60px",height:"60px",backgroundColor:"#336021"},children:_.jsx("i",{className:"fas fa-map-marker-alt text-white fa-lg"})})}),_.jsxs("div",{className:"flex-grow-1",children:[_.jsx("h4",{className:"fw-bold mb-2",children:"Visit Us"}),_.jsxs("p",{className:"mb-0 text-muted",children:["No 27 New, MGR Main Rd, Kandhanchavadi,",_.jsx("br",{}),"Perungudi, Chennai, Tamil Nadu 600096, India"]})]})]})})})})]}),_.jsx("div",{className:"mt-4",children:_.jsx("div",{className:"card border-0 shadow-sm",children:_.jsx("div",{className:"card-body p-0",children:_.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3887.4657686057393!2d80.24863007486515!3d13.007999714280781!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a5267a0673d1e8f%3A0x5b8f47d9b7e62f19!2sMGR%20Main%20Rd%2C%20Kandhanchavadi%2C%20Perungudi%2C%20Chennai%2C%20Tamil%20Nadu%20600096!5e0!3m2!1sen!2sin!4v1689321234567!5m2!1sen!2sin",width:"100%",height:"280",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"rounded-3"})})})})]})]})]})]})},Y=()=>_.jsx("div",{style:{paddingTop:"80px"},children:_.jsx(Q,{})}),X=()=>{const[t,n]=e.useState({firstName:"",lastName:"",address:"",email:"",phone:"",notes:"",roofType:"",numberOfPhases:""}),[s,r]=e.useState(!1),[i,a]=e.useState(!1),[o,l]=e.useState(""),[c,u]=e.useState(!1);e.useState(!1),e.useRef(null),e.useRef(null);e.useEffect(()=>{},[]);const h=e=>{const{name:t,value:s}=e.target;n(e=>({...e,[t]:s}))};return i?_.jsx("div",{className:"card border-0 shadow-lg",children:_.jsxs("div",{className:"card-body text-center py-5",children:[_.jsx("div",{className:"mb-4",children:_.jsx("i",{className:"fas fa-check-circle text-success",style:{fontSize:"4rem"}})}),_.jsx("h3",{className:"text-success mb-3",children:"Quote Request Submitted!"}),_.jsx("p",{className:"text-muted mb-4",children:"Thank you for your interest in solar energy. Our team will contact you within 24 hours to discuss your project."}),_.jsx("button",{onClick:()=>{a(!1),u(!1)},className:"btn btn-success",children:"Submit Another Quote"})]})}):_.jsxs("div",{className:"card border-0 shadow-lg overflow-hidden",children:[_.jsxs("div",{className:"card-header text-center py-5 position-relative",style:{backgroundColor:"#336021"},children:[_.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100",style:{opacity:.1},children:_.jsx("div",{className:"position-absolute",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.3'%3E%3Ccircle cx='20' cy='20' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")",backgroundSize:"40px 40px",width:"100%",height:"100%"}})}),_.jsxs("div",{className:"position-relative",children:[_.jsx("div",{className:"mb-3",children:_.jsx("i",{className:"fas fa-calculator text-white",style:{fontSize:"2.5rem"}})}),_.jsx("h3",{className:"text-white mb-2 fw-bold",children:"Get Your Free Solar Quote"}),_.jsx("p",{className:"text-white-50 mb-0",children:"Personalized solution for your home"})]})]}),_.jsx("div",{className:"card-body p-4",children:_.jsxs("form",{onSubmit:async e=>{e.preventDefault(),r(!0),l("");try{if(!(t.firstName&&t.lastName&&t.email&&t.phone&&t.address))throw new Error("Please fill in all required fields");const{localSuccess:e,apiSuccess:s}=await(async e=>{let t=!1,n=!1;try{const n={...e,timestamp:(new Date).toISOString(),id:Date.now().toString(),apiSubmitted:!1},s=JSON.parse(localStorage.getItem("solarQuotes")||"[]");s.push(n),localStorage.setItem("solarQuotes",JSON.stringify(s)),t=!0}catch(o){}try{try{const s=await fetch("/api/opensolar-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok&&(await s.json()).success&&(n=!0,t)){const e=JSON.parse(localStorage.getItem("solarQuotes")||"[]");e.length>0&&(e[e.length-1].apiSubmitted=!0,localStorage.setItem("solarQuotes",JSON.stringify(e)))}}catch(s){}if(!n)try{const s=await fetch("/opensolar-proxy.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok&&(await s.json()).success&&(n=!0,t)){const e=JSON.parse(localStorage.getItem("solarQuotes")||"[]");e.length>0&&(e[e.length-1].apiSubmitted=!0,localStorage.setItem("solarQuotes",JSON.stringify(e)))}}catch(r){}if(!n)try{const s=new FormData;if(s.append("first_name",e.firstName),s.append("last_name",e.lastName),s.append("email",e.email),s.append("phone",e.phone),s.append("address",e.address),s.append("notes",e.notes||`Roof Type: ${e.roofType||"Not specified"}, Phases: ${e.numberOfPhases||"Not specified"}`),s.append("roof_type",e.roofType||""),s.append("number_of_phases",e.numberOfPhases||""),s.append("widget_id","ca8ae2d8109747b496bf67a411ac789b"),await fetch("https://api.opensolar.com/api/lead_capture_widget/ca8ae2d8109747b496bf67a411ac789b",{method:"POST",body:s,mode:"no-cors",credentials:"omit"}),n=!0,t){const e=JSON.parse(localStorage.getItem("solarQuotes")||"[]");e.length>0&&(e[e.length-1].apiSubmitted=!0,localStorage.setItem("solarQuotes",JSON.stringify(e)))}}catch(i){}if(!n)try{const s=document.createElement("form");s.method="POST",s.action="https://api.opensolar.com/api/lead_capture_widget/ca8ae2d8109747b496bf67a411ac789b",s.target="opensolar_frame",s.style.display="none";let r=document.getElementById("opensolar_frame");r||(r=document.createElement("iframe"),r.id="opensolar_frame",r.name="opensolar_frame",r.style.display="none",document.body.appendChild(r));const i={first_name:e.firstName,last_name:e.lastName,email:e.email,phone:e.phone,address:e.address,notes:e.notes||`Roof Type: ${e.roofType||"Not specified"}, Phases: ${e.numberOfPhases||"Not specified"}`,roof_type:e.roofType||"",number_of_phases:e.numberOfPhases||"",widget_id:"ca8ae2d8109747b496bf67a411ac789b"};if(Object.entries(i).forEach(([e,t])=>{if(t){const n=document.createElement("input");n.type="hidden",n.name=e,n.value=String(t),s.appendChild(n)}}),document.body.appendChild(s),s.submit(),setTimeout(()=>{document.body.contains(s)&&document.body.removeChild(s)},2e3),n=!0,t){const e=JSON.parse(localStorage.getItem("solarQuotes")||"[]");e.length>0&&(e[e.length-1].apiSubmitted=!0,localStorage.setItem("solarQuotes",JSON.stringify(e)))}}catch(a){}}catch(o){}return{localSuccess:t,apiSuccess:n}})(t);if(!e)throw new Error("Failed to store quote data locally");a(!0),n({firstName:"",lastName:"",address:"",email:"",phone:"",notes:"",roofType:"",numberOfPhases:""}),u(!1)}catch(s){l(s instanceof Error?s.message:"There was an issue submitting your quote. Please try again or contact us directly.")}finally{r(!1)}},children:[o&&_.jsxs("div",{className:"alert alert-danger d-flex align-items-center mb-4",role:"alert",children:[_.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),_.jsx("div",{children:o})]}),_.jsxs("div",{className:"row g-3 mb-3",children:[_.jsxs("div",{className:"col-md-6",children:[_.jsxs("label",{htmlFor:"firstName",className:"form-label fw-semibold",children:[_.jsx("i",{className:"fas fa-user text-muted me-2"}),"First Name *"]}),_.jsx("input",{type:"text",className:"form-control",id:"firstName",name:"firstName",value:t.firstName,onChange:h,required:!0,placeholder:"Enter your first name"})]}),_.jsxs("div",{className:"col-md-6",children:[_.jsxs("label",{htmlFor:"lastName",className:"form-label fw-semibold",children:[_.jsx("i",{className:"fas fa-user text-muted me-2"}),"Last Name *"]}),_.jsx("input",{type:"text",className:"form-control",id:"lastName",name:"lastName",value:t.lastName,onChange:h,required:!0,placeholder:"Enter your last name"})]})]}),_.jsxs("div",{className:"mb-3",children:[_.jsxs("label",{htmlFor:"address",className:"form-label fw-semibold",children:[_.jsx("i",{className:"fas fa-map-marker-alt text-muted me-2"}),"Address *"]}),_.jsx("input",{type:"text",className:"form-control",id:"address",name:"address",value:t.address,onChange:e=>{n(t=>({...t,address:e.target.value})),u(!0)},required:!0,placeholder:"Enter your complete address..."}),_.jsx("div",{className:"form-text",children:_.jsx("small",{className:"text-muted",children:"Please enter your complete address including street, city, state, and zip code"})})]}),_.jsxs("div",{className:"row g-3 mb-3",children:[_.jsxs("div",{className:"col-md-6",children:[_.jsxs("label",{htmlFor:"email",className:"form-label fw-semibold",children:[_.jsx("i",{className:"fas fa-envelope text-muted me-2"}),"Email *"]}),_.jsx("input",{type:"email",className:"form-control",id:"email",name:"email",value:t.email,onChange:h,required:!0,placeholder:"Enter your email"})]}),_.jsxs("div",{className:"col-md-6",children:[_.jsxs("label",{htmlFor:"phone",className:"form-label fw-semibold",children:[_.jsx("i",{className:"fas fa-phone text-muted me-2"}),"Phone *"]}),_.jsx("input",{type:"tel",className:"form-control",id:"phone",name:"phone",value:t.phone,onChange:h,required:!0,placeholder:"Enter your phone number"})]})]}),_.jsxs("div",{className:"mb-3",children:[_.jsxs("label",{htmlFor:"notes",className:"form-label fw-semibold",children:[_.jsx("i",{className:"fas fa-sticky-note text-muted me-2"}),"Notes"]}),_.jsx("textarea",{className:"form-control",id:"notes",name:"notes",rows:3,value:t.notes,onChange:h,placeholder:"Any additional information or questions..."})]}),_.jsxs("div",{className:"row g-3 mb-4",children:[_.jsxs("div",{className:"col-md-6",children:[_.jsxs("label",{htmlFor:"roofType",className:"form-label fw-semibold",children:[_.jsx("i",{className:"fas fa-home text-muted me-2"}),"Roof Type"]}),_.jsxs("select",{className:"form-select",id:"roofType",name:"roofType",value:t.roofType,onChange:h,children:[_.jsx("option",{value:"",children:"Choose Roof Type"}),[{value:"6",label:"Composition / Asphalt Shingle"},{value:"7",label:"Flat Concrete"},{value:"8",label:"Flat Foam"},{value:"9",label:"Membrane EPDM"},{value:"10",label:"Membrane PVC"},{value:"11",label:"Membrane TPO"},{value:"12",label:"Metal Decramastic"},{value:"13",label:"Metal Shingle"},{value:"14",label:"Metal Standing Seam"},{value:"15",label:"Metal Stone Coated"},{value:"16",label:"Metal Tin"},{value:"17",label:"Tar and Gravel / Bitumen"},{value:"18",label:"Thatched"},{value:"19",label:"Tile Clay"},{value:"20",label:"Tile Concrete"},{value:"21",label:"Tile Slate"},{value:"22",label:"Wood/Shake Shingle"},{value:"23",label:"Other"},{value:"24",label:"Kliplock"},{value:"25",label:"Rolled Asphalt"},{value:"26",label:"Trapezoidal"}].map(e=>_.jsx("option",{value:e.value,children:e.label},e.value))]})]}),_.jsxs("div",{className:"col-md-6",children:[_.jsxs("label",{htmlFor:"numberOfPhases",className:"form-label fw-semibold",children:[_.jsx("i",{className:"fas fa-bolt text-muted me-2"}),"Number of Phases"]}),_.jsxs("select",{className:"form-select",id:"numberOfPhases",name:"numberOfPhases",value:t.numberOfPhases,onChange:h,children:[_.jsx("option",{value:"",children:"Choose Number of Phases"}),[{value:"1",label:"1 Phase"},{value:"2",label:"2 Phase"},{value:"3",label:"3 Phase"}].map(e=>_.jsx("option",{value:e.value,children:e.label},e.value))]})]})]}),_.jsx("div",{className:"d-grid",children:_.jsx("button",{type:"submit",className:"btn btn-success btn-lg",disabled:s,children:s?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Submitting Quote..."]}):_.jsxs(_.Fragment,{children:[_.jsx("i",{className:"fas fa-paper-plane me-2"}),"Submit Quote Request"]})})})]})})]})},J=()=>_.jsxs("div",{style:{paddingTop:"80px"},children:[_.jsx("section",{className:"py-5",style:{backgroundColor:"#336021"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-12 text-center text-white",children:[_.jsx("h1",{className:"display-4 fw-bold mb-4",children:"Get Your Free Solar Quote"}),_.jsx("p",{className:"lead mb-4",children:"Professional solar solutions for your home"}),_.jsx("a",{href:"#quote-form",className:"btn btn-warning btn-lg",children:"Get Free Quote"})]})})})}),_.jsx("section",{id:"quote-form",className:"py-5",style:{backgroundColor:"#f8f9fa"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row justify-content-center",children:_.jsx("div",{className:"col-lg-8",children:_.jsx(X,{})})})})}),_.jsx("section",{className:"py-5 bg-white",children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row text-center",children:[_.jsx("div",{className:"col-12 mb-5",children:_.jsx("h2",{className:"fw-bold",children:"Why Choose Solar?"})}),_.jsxs("div",{className:"col-md-4 mb-4",children:[_.jsx("i",{className:"fas fa-dollar-sign text-success fs-1 mb-3"}),_.jsx("h4",{children:"Save Money"}),_.jsx("p",{children:"Reduce electricity bills by up to 90%"})]}),_.jsxs("div",{className:"col-md-4 mb-4",children:[_.jsx("i",{className:"fas fa-leaf text-success fs-1 mb-3"}),_.jsx("h4",{children:"Go Green"}),_.jsx("p",{children:"Reduce your carbon footprint"})]}),_.jsxs("div",{className:"col-md-4 mb-4",children:[_.jsx("i",{className:"fas fa-home text-success fs-1 mb-3"}),_.jsx("h4",{children:"Increase Value"}),_.jsx("p",{children:"Boost your property value"})]})]})})}),_.jsx("section",{className:"py-5",style:{backgroundColor:"#f8f9fa"},children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row text-center",children:[_.jsx("div",{className:"col-12 mb-5",children:_.jsx("h2",{className:"fw-bold",children:"Our Process"})}),_.jsxs("div",{className:"col-md-3 mb-4",children:[_.jsx("div",{className:"bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3",style:{width:"60px",height:"60px"},children:"1"}),_.jsx("h5",{children:"Get Quote"}),_.jsx("p",{children:"Fill out our form"})]}),_.jsxs("div",{className:"col-md-3 mb-4",children:[_.jsx("div",{className:"bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3",style:{width:"60px",height:"60px"},children:"2"}),_.jsx("h5",{children:"Assessment"}),_.jsx("p",{children:"Site evaluation"})]}),_.jsxs("div",{className:"col-md-3 mb-4",children:[_.jsx("div",{className:"bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3",style:{width:"60px",height:"60px"},children:"3"}),_.jsx("h5",{children:"Design"}),_.jsx("p",{children:"Custom solution"})]}),_.jsxs("div",{className:"col-md-3 mb-4",children:[_.jsx("div",{className:"bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3",style:{width:"60px",height:"60px"},children:"4"}),_.jsx("h5",{children:"Install"}),_.jsx("p",{children:"Professional setup"})]})]})})}),_.jsx("section",{className:"py-5 bg-white",children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-12 text-center",children:[_.jsx("h2",{className:"fw-bold mb-4",children:"Ready to Start?"}),_.jsx("a",{href:"#quote-form",className:"btn btn-success btn-lg me-3",children:"Get Quote"}),_.jsx("a",{href:"tel:9633126288",className:"btn btn-outline-success btn-lg",children:"Call Now"})]})})})})]}),Z=()=>{const{serviceId:e}=i(),t={"follain-project":{title:"Follain Solar Project",subtitle:"484 kWp Commercial Installation",category:"Commercial Solar Installation",description:"A 484 kWp commercial solar photovoltaic system in Cork, Ireland, delivering exceptional performance with 81+ MWh generated and 40 tons of COâ emissions prevented.",image:"/images/follain.webp",stats:[{number:"484",label:"kWp Capacity"},{number:"81+",label:"MWh Generated"},{number:"40",label:"Tons COâ Saved"},{number:"20%",label:"Grid Offset"}],details:{client:"Follain",location:"Cork, Ireland",completed:"May 2024",duration:"3 Weeks"},specifications:{panels:{type:"590W JA Solar High-Efficiency",configuration:"46 Strings",mounting:"Enerack Mounting Gear",capacity:"484 kWp"},inverters:{brand:"Huawei Advanced Inverters",units:"3 Inverters",capacity:"330 kW",efficiency:"98.6%"}},features:[{icon:"fas fa-solar-panel",title:"High-Efficiency Panels",description:"590W JA Solar panels providing maximum energy generation in limited roof space with superior performance."},{icon:"fas fa-bolt",title:"Exceptional Output",description:"81+ MWh of clean electricity generated, offsetting 20% of the facility's grid consumption."},{icon:"fas fa-leaf",title:"Environmental Impact",description:"40 tons of COâ emissions prevented, equivalent to planting approximately 53 mature trees."},{icon:"fas fa-gauge-high",title:"Advanced Technology",description:"Three Huawei inverters delivering 330 kW of AC capacity with exceptional reliability and efficiency."}]},"denis-mahony-project":{title:"Denis Mahony Project",subtitle:"122 kWp Hybrid Solar System",category:"Hybrid Solar System",description:"A 122 kWp hybrid solar system in Dublin & Kilbarrack, producing 95 MWh annually and meeting 60% of the client's energy needs with exceptional 3-year payback period.",image:"/images/mahony.webp",stats:[{number:"122",label:"kWp Capacity"},{number:"95",label:"MWh/Year"},{number:"60%",label:"Energy Coverage"},{number:"3",label:"Year Payback"}],details:{client:"Denis Mahony",location:"Dublin & Kilbarrack",completed:"May 2024",grant:"SEAI Grant"},specifications:{panels:{type:"JA Solar 500W PV Panels",capacity:"122 kWp",mounting:"Renusol Mounting System",roofType:"Flat & Trapezoidal Roofing"},inverters:{type:"Two 50kW Solax Inverters",production:"95 MWh Annual",coverage:"60% of Client's Needs",systemType:"Hybrid Solar System"}},features:[{icon:"fas fa-solar-panel",title:"High-Efficiency System",description:"JA Solar 500W PV panels with Renusol mounting system for optimal energy generation."},{icon:"fas fa-bolt",title:"95 MWh Annual Output",description:"Clean electricity production meeting 60% of the facility's energy requirements."},{icon:"fas fa-leaf",title:"16.12 Tons COâ Reduction",description:"Significant environmental impact through reduced carbon emissions."},{icon:"fas fa-coins",title:"3-Year Payback Period",description:"Exceptional ROI supported by SEAI grant and energy cost savings."}]},"monroe-solar-farm":{title:"Monroe Solar Farm",subtitle:"14 MWp Solar Farm Project",category:"Solar Farm Project",description:"A 14 megawatts peak (MWp) capacity solar farm powering more than 10,000 homes with clean, sustainable electricity for the next twenty years.",image:"/images/monroe.webp",stats:[{number:"14",label:"MWp Capacity"},{number:"10K+",label:"Homes Powered"},{number:"50",label:"Acres"},{number:"20K+",label:"Solar Panels"}],details:{type:"Solar Farm",area:"50 Acres",completion:"April 2024",operations:"May 2024"},specifications:{panels:{total:"20,000+ Solar PV Modules",area:"50 Acres",type:"Ground-Mounted Solar Farm",capacity:"14 MWp"},grid:{connection:"National Grid",homes:"10,000+ Homes",period:"20 Years",start:"May 2024"}},features:[{icon:"fas fa-solar-panel",title:"20,000+ Solar Panels",description:"High-efficiency photovoltaic modules covering approximately 50 acres of land, harnessing the sun's energy to generate power."},{icon:"fas fa-bolt",title:"14 MWp Capacity",description:"Generating enough clean electricity to power more than 10,000 homes for twenty years."},{icon:"fas fa-leaf",title:"Environmental Impact",description:"Annual carbon offset equivalent to planting approximately 7.26 million trees."},{icon:"fas fa-monument",title:"Archaeological Preservation",description:"Special measures to protect sensitive areas within the site for future generations."}]}}[e];return t?_.jsxs("div",{style:{paddingTop:"80px"},children:[_.jsxs("section",{className:"position-relative",style:{minHeight:"100vh",background:"linear-gradient(135deg, #336021 0%, #4a7c59 100%)"},children:[_.jsxs("div",{className:"position-absolute w-100 h-100",style:{top:0,left:0,zIndex:1},children:[_.jsx("img",{src:t.image,alt:t.title,className:"w-100 h-100",style:{objectFit:"cover",opacity:.3},onError:e=>{e.target.style.display="none"}}),_.jsx("div",{className:"position-absolute w-100 h-100",style:{background:"rgba(51, 96, 33, 0.8)",top:0,left:0}})]}),_.jsxs("div",{className:"position-absolute text-center text-white",style:{top:"20%",left:"50%",transform:"translateX(-50%)",zIndex:3},children:[_.jsx("h1",{className:"display-4 fw-bold",children:t.title}),_.jsx("p",{className:"lead",children:t.subtitle})]}),_.jsx("div",{className:"container position-relative",style:{zIndex:2},children:_.jsx("div",{className:"row align-items-center min-vh-100",children:_.jsx("div",{className:"col-lg-8",children:_.jsxs("div",{className:"text-white",children:[_.jsx("nav",{"aria-label":"breadcrumb",className:"mb-4",children:_.jsxs("ol",{className:"breadcrumb",children:[_.jsx("li",{className:"breadcrumb-item",children:_.jsx(r,{to:"/",className:"text-white-50",children:"Home"})}),_.jsx("li",{className:"breadcrumb-item",children:_.jsx(r,{to:"/projects",className:"text-white-50",children:"Projects"})}),_.jsx("li",{className:"breadcrumb-item active text-white",children:t.title})]})}),_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge bg-light text-dark px-4 py-2 rounded-pill",children:t.category})}),_.jsxs("h1",{className:"display-4 fw-bold mb-4",children:[t.title.split(" ")[0]," ",_.jsx("span",{className:"text-warning",children:t.title.split(" ").slice(1).join(" ")}),_.jsx("br",{}),"Sustainable Energy"," ",_.jsx("span",{className:"text-warning",children:"Excellence"})]}),_.jsx("p",{className:"lead mb-5",children:t.description}),_.jsx("div",{className:"row g-4",children:t.stats.map((e,t)=>_.jsx("div",{className:"col-6 col-md-3",children:_.jsxs("div",{className:"text-center",children:[_.jsx("h3",{className:"text-warning fw-bold",children:e.number}),_.jsx("p",{className:"mb-0",children:e.label})]})},t))})]})})})})]}),_.jsx("section",{className:"py-5",children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row align-items-center g-5",children:[_.jsxs("div",{className:"col-lg-6",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Project Overview"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:[t.category," ",_.jsx("span",{style:{color:"#336021"},children:"Excellence"})]}),_.jsx("p",{className:"lead mb-4",children:t.description}),_.jsx("div",{className:"row g-3",children:Object.entries(t.details).map(([e,t])=>_.jsx("div",{className:"col-md-6",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("div",{className:"me-3",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-building"})}),_.jsxs("div",{children:[_.jsx("h6",{className:"mb-1 text-capitalize",children:e.replace(/([A-Z])/g," $1")}),_.jsx("p",{className:"mb-0",children:t})]})]})},e))})]}),_.jsx("div",{className:"col-lg-6",children:_.jsxs("div",{className:"position-relative",children:[_.jsx("img",{src:t.image,alt:t.title,className:"img-fluid rounded-3 shadow-lg",onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="flex"}}),_.jsx("div",{className:"w-100 h-100 bg-light rounded-3 align-items-center justify-content-center",style:{display:"none"},children:_.jsx("i",{className:"fas fa-solar-panel fa-4x",style:{color:"#336021"}})}),_.jsxs("div",{className:"position-absolute top-0 end-0 m-3 bg-warning text-dark px-3 py-2 rounded",children:[_.jsx("span",{className:"fw-bold",children:t.stats[0].number}),_.jsx("small",{className:"d-block",children:t.stats[0].label})]})]})})]})})}),_.jsx("section",{className:"py-5 bg-light",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Technical Specifications"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["System ",_.jsx("span",{style:{color:"#336021"},children:"Details"})]}),_.jsx("p",{className:"lead",children:"Advanced technology and strategic design optimization for maximum performance and reliability."})]})}),_.jsx("div",{className:"row g-4",children:Object.entries(t.specifications).map(([e,t],n)=>_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4",children:[_.jsxs("div",{className:"d-flex align-items-center mb-4",children:[_.jsx("div",{className:"me-3",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-solar-panel fa-2x"})}),_.jsxs("h4",{className:"mb-0 text-capitalize",children:[e.replace(/([A-Z])/g," $1")," System"]})]}),Object.entries(t).map(([e,t])=>_.jsxs("div",{className:"d-flex justify-content-between align-items-center py-2 border-bottom",children:[_.jsxs("span",{className:"fw-medium text-capitalize",children:[e.replace(/([A-Z])/g," $1"),":"]}),_.jsx("span",{className:"text-muted",children:t})]},e))]})})},n))})]})}),_.jsx("section",{className:"py-5",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Key Features"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Project ",_.jsx("span",{style:{color:"#336021"},children:"Highlights"})]}),_.jsxs("p",{className:"lead",children:["The ",t.title," incorporates several innovative features that make it a standout renewable energy installation."]})]})}),_.jsx("div",{className:"row g-4",children:t.features.map((e,t)=>_.jsx("div",{className:"col-lg-3 col-md-6",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:`${e.icon} fa-3x`})}),_.jsx("h4",{className:"fw-bold mb-3",children:e.title}),_.jsx("p",{children:e.description})]})},t))})]})}),_.jsx("section",{className:"py-5",style:{backgroundColor:"#336021"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center text-white",children:[_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Ready to Start Your"," ",_.jsx("span",{className:"text-warning",children:"Solar Project?"})]}),_.jsxs("p",{className:"lead mb-4",children:["Join ",t.details.client||"our satisfied clients"," and other forward-thinking organizations in making the switch to renewable energy. Get a free consultation today!"]}),_.jsxs("div",{className:"d-flex justify-content-center gap-3 flex-wrap",children:[_.jsxs(r,{to:"/contact",className:"btn btn-warning btn-lg",children:[_.jsx("i",{className:"fas fa-phone me-2"}),"Get Free Consultation"]}),_.jsxs(r,{to:"/projects",className:"btn btn-outline-light btn-lg",children:[_.jsx("i",{className:"fas fa-eye me-2"}),"View More Projects"]})]})]})})})})]}):_.jsx("div",{className:"container py-5",style:{paddingTop:"120px"},children:_.jsxs("div",{className:"text-center",children:[_.jsx("h1",{children:"Project Not Found"}),_.jsx("p",{children:"The requested project could not be found."}),_.jsx(r,{to:"/projects",className:"btn btn-primary",children:"Back to Projects"})]})})},ee=()=>_.jsxs("div",{style:{paddingTop:"80px"},children:[_.jsx("header",{className:"py-5",style:{background:"linear-gradient(135deg, #336021 0%, #4a7c59 100%)",minHeight:"60vh",display:"flex",alignItems:"center"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-12 text-center text-white",children:[_.jsx("h1",{className:"display-3 fw-bold mb-4",children:"Solar, Battery & EV Solutions"}),_.jsx("p",{className:"lead mb-4",style:{fontSize:"1.25rem"},children:"Comprehensive solar, battery storage, and EV charging solutions for residential and commercial applications."}),_.jsxs("div",{className:"d-flex justify-content-center align-items-center my-4",children:[_.jsx("div",{style:{height:"2px",width:"60px",backgroundColor:"#ffc107"}}),_.jsx("div",{className:"mx-3",style:{color:"#ffc107"},children:_.jsx("i",{className:"fas fa-solar-panel fa-2x"})}),_.jsx("div",{style:{height:"2px",width:"60px",backgroundColor:"#ffc107"}})]})]})})})}),_.jsx("section",{className:"py-5",children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row align-items-center",children:[_.jsxs("div",{className:"col-lg-6",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Our Energy Solutions"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Solar, Battery & EV ",_.jsx("span",{style:{color:"#336021"},children:"Solutions"})]}),_.jsx("p",{className:"lead mb-4",children:"At REIN, we are dedicated to ushering in a sustainable future through innovative renewable energy solutions. Our focus on Solar, Battery, and Electric Vehicle (EV) technologies reflects our commitment to reducing carbon emissions, promoting energy independence, and driving environmental stewardship."})]}),_.jsxs("div",{className:"col-lg-6",children:[_.jsx("img",{src:"/images/solar.webp",alt:"Solar Battery EV Solutions",className:"img-fluid rounded shadow",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextElementSibling.style.display="flex"}}),_.jsx("div",{className:"w-100 bg-light rounded shadow d-flex align-items-center justify-content-center",style:{display:"none",height:"300px"},children:_.jsx("i",{className:"fas fa-solar-panel fa-4x",style:{color:"#336021"}})})]})]})})}),_.jsx("section",{className:"py-5 bg-light",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Key ",_.jsx("span",{style:{color:"#336021"},children:"Services"})]}),_.jsx("p",{className:"lead",children:"Our comprehensive approach combines solar, battery, and EV technologies to create integrated solutions that maximize energy efficiency, reliability, and sustainability."})]})}),_.jsxs("div",{className:"row g-4",children:[_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#ffc107"},children:_.jsx("i",{className:"fas fa-solar-panel fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Solar Energy"}),_.jsx("p",{children:"Solar power stands at the forefront of renewable energy solutions, harnessing the abundant energy of the sun to generate clean electricity. Our solar energy offerings encompass a range of solutions, from rooftop solar panels for residential applications to large-scale solar farms for commercial and industrial clients."})]})})}),_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-battery-full fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Battery Storage"}),_.jsx("p",{children:"Battery storage plays a pivotal role in maximizing the efficiency and reliability of renewable energy systems. Our battery storage solutions enable the capture and storage of excess solar energy during periods of peak production, allowing for seamless energy management and grid independence."})]})})}),_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#ffc107"},children:_.jsx("i",{className:"fas fa-car fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Electric Vehicles (EVs)"}),_.jsx("p",{children:"As advocates for sustainable transportation, we promote the adoption of Electric Vehicles (EVs) as a key component of our renewable energy ecosystem. Our EV charging infrastructure solutions make it convenient and accessible for individuals and businesses to transition to electric transportation."})]})})})]})]})}),_.jsx("section",{className:"py-5",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"For a Sustainable Tomorrow"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["You are ",_.jsx("span",{style:{color:"#336021"},children:"guaranteed to"})]}),_.jsx("p",{className:"lead",children:"At REIN, we understand that the future of energy lies in integration. Our holistic approach combines solar, battery, and EV technologies to create integrated solutions that maximize energy efficiency, reliability, and sustainability."})]})}),_.jsx("div",{className:"row g-4",children:[{icon:"fas fa-bolt",text:"Save on electricity",color:"success"},{icon:"fas fa-fire",text:"Save on your heating bills with hot water coupled systems",color:"warning"},{icon:"fas fa-battery-half",text:"Store excess energy from the day to reduce your bills at night",color:"success"},{icon:"fas fa-award",text:"SEAI grant available",color:"warning"},{icon:"fas fa-coins",text:"Feed-in tariff for excess energy",color:"success"},{icon:"fas fa-leaf",text:"Reduce your carbon footprint",color:"warning"},{icon:"fas fa-shield-alt",text:"Future proof against rising energy costs",color:"success"},{icon:"fas fa-truck",text:"Reduce your fleet costs by switching to EV",color:"warning"},{icon:"fas fa-calendar-alt",text:"Long life span with 25 years warranty on products",color:"success"},{icon:"fas fa-clock",text:"Quick installation by an expert team",color:"warning"}].map((e,t)=>_.jsx("div",{className:"col-lg-3 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-3 text-center",children:[_.jsx("div",{className:`mb-3 text-${e.color}`,children:_.jsx("i",{className:`${e.icon} fa-2x`})}),_.jsx("h6",{className:"fw-bold",children:e.text})]})})},t))})]})}),_.jsx("section",{className:"py-5",style:{backgroundColor:"#336021"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center text-white",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge bg-light text-dark px-3 py-2",children:"Building a Brighter Future"})}),_.jsx("h2",{className:"display-6 fw-bold mb-4",children:"Together, we have the power to transform the way we produce, store, and consume energy"}),_.jsx("p",{className:"lead mb-4",children:"At REIN, we invite you to join us in building a brighter, cleaner future powered by solar, battery, and EV technologies."}),_.jsxs("div",{className:"d-flex justify-content-center gap-3 flex-wrap",children:[_.jsxs(r,{to:"/contact",className:"btn btn-warning btn-lg",children:[_.jsx("i",{className:"fas fa-phone me-2"}),"Contact Us Today"]}),_.jsxs(r,{to:"/projects",className:"btn btn-outline-light btn-lg",children:[_.jsx("i",{className:"fas fa-eye me-2"}),"View Our Projects"]})]})]})})})})]}),te=()=>_.jsxs("div",{style:{paddingTop:"80px"},children:[_.jsx("header",{className:"py-5",style:{background:"linear-gradient(135deg, #336021 0%, #4a7c59 100%)",minHeight:"60vh",display:"flex",alignItems:"center"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-12 text-center text-white",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge bg-light text-dark px-4 py-2 rounded-pill",children:"Our Design & Consultancy Approach"})}),_.jsxs("h1",{className:"display-3 fw-bold mb-4",children:["Comprehensive ",_.jsx("span",{className:"text-warning",children:"Project Lifecycle"})]}),_.jsx("p",{className:"lead mb-4",style:{fontSize:"1.25rem"},children:"At REIN, we provide meticulous design and consultancy services for renewable energy projects, addressing technical, economic, and environmental considerations at every stage."}),_.jsxs("div",{className:"d-flex justify-content-center align-items-center my-4",children:[_.jsx("div",{style:{height:"2px",width:"60px",backgroundColor:"#ffc107"}}),_.jsx("div",{className:"mx-3",style:{color:"#ffc107"},children:_.jsx("i",{className:"fas fa-drafting-compass fa-2x"})}),_.jsx("div",{style:{height:"2px",width:"60px",backgroundColor:"#ffc107"}})]})]})})})}),_.jsx("section",{className:"py-5",children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row g-4",children:[_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-magnifying-glass-chart fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Site Assessment & Feasibility"}),_.jsx("p",{children:"The initial phase involves thorough site assessment and feasibility studies. Our engineers analyze factors such as available resources (solar irradiance, wind speed), geographical location, land use, grid connection options, and regulatory requirements. This comprehensive evaluation forms the foundation for decision-making throughout the project lifecycle."})]})})}),_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#ffc107"},children:_.jsx("i",{className:"fas fa-drafting-compass fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Custom Design Solutions"}),_.jsx("p",{children:"Once feasibility is confirmed, our in-house engineers collaborate to develop tailored solutions optimized for your site's unique characteristics and energy needs. For solar projects, this involves designing efficient photovoltaic arrays, considering factors like panel orientation, tilt angles, and shading. Wind projects require meticulous turbine selection, layout optimization, and aerodynamic analysis."})]})})}),_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-clipboard-check fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Regulatory Compliance"}),_.jsx("p",{children:"Our consultants play a crucial role in navigating regulatory frameworks and securing necessary permits and approvals. We ensure compliance with local zoning laws, environmental regulations, and interconnection standards, mitigating risks and facilitating seamless project execution for all your renewable energy initiatives."})]})})})]})})}),_.jsx("section",{className:"py-5 bg-light",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Project Phases"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["From Concept to ",_.jsx("span",{style:{color:"#336021"},children:"Completion"})]}),_.jsx("p",{className:"lead",children:"Our comprehensive approach ensures successful implementation of renewable energy projects through carefully managed phases."})]})}),_.jsxs("div",{className:"row g-4 align-items-center",children:[_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-helmet-safety fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Construction Oversight"}),_.jsx("p",{children:"During the construction phase, our consultants oversee the implementation of design plans, ensuring adherence to quality standards, safety protocols, and project timelines. Effective project management and coordination among stakeholders are paramount to overcoming challenges and optimizing resource utilization for maximum efficiency and cost-effectiveness."})]})})}),_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#ffc107"},children:_.jsx("i",{className:"fas fa-chart-line fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Post-Construction Services"}),_.jsx("p",{children:"After project completion, we provide ongoing consultancy services to monitor system performance, conduct periodic maintenance, and optimize operational efficiency. Our consultants leverage data analytics and predictive modeling to identify potential issues proactively, ensuring optimal energy production and return on investment over the project's lifespan."})]})})})]})]})}),_.jsx("section",{className:"py-5",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Our Expertise"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Specialized ",_.jsx("span",{style:{color:"#336021"},children:"Design Services"})]}),_.jsx("p",{className:"lead",children:"We offer specialized design and consultancy services across various renewable energy technologies."})]})}),_.jsx("div",{className:"row g-4",children:[{icon:"fas fa-solar-panel",title:"Solar PV Design",items:["Rooftop & ground-mounted systems","Shading analysis & optimization","Yield predictions & simulations","Electrical system design"],color:"success"},{icon:"fas fa-wind",title:"Wind Energy Design",items:["Wind resource assessment","Turbine selection & siting","Layout optimization","Noise & environmental impact"],color:"warning"},{icon:"fas fa-car-battery",title:"Energy Storage",items:["Battery system sizing","Hybrid system integration","Control system design","Economic optimization"],color:"success"},{icon:"fas fa-plug-circle-bolt",title:"Grid Integration",items:["Grid connection studies","Power quality analysis","Protection system design","Compliance verification"],color:"warning"}].map((e,t)=>_.jsx("div",{className:"col-lg-3 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:`mb-4 text-${e.color}`,children:_.jsx("i",{className:`${e.icon} fa-3x`})}),_.jsx("h4",{className:"fw-bold mb-3",children:e.title}),_.jsx("ul",{className:"list-unstyled text-start",children:e.items.map((e,t)=>_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),e]},t))})]})})},t))})]})}),_.jsx("section",{className:"py-5 bg-light",children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-lightbulb fa-4x"})}),_.jsx("h2",{className:"display-6 fw-bold mb-4",children:"Our Multidisciplinary Approach"}),_.jsxs("div",{children:[_.jsx("p",{className:"lead mb-4",children:"The design and consultancy process of any renewable energy project entails a multidisciplinary approach, integrating technical expertise, regulatory knowledge, and strategic planning. By collaborating closely with clients and stakeholders, our consultants strive to deliver innovative solutions that drive the transition towards a sustainable energy future."}),_.jsx("p",{className:"mb-4",children:"Our team includes electrical engineers, mechanical engineers, environmental specialists, financial analysts, and project managers who work together to address all aspects of your renewable energy project."}),_.jsxs(r,{to:"/contact",className:"btn btn-lg",style:{backgroundColor:"#336021",color:"white"},children:[_.jsx("i",{className:"fas fa-calendar-alt me-2"}),"Schedule a Consultation"]})]})]})})})}),_.jsx("section",{className:"py-5",children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center",children:[_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Ready to Start Your ",_.jsx("span",{style:{color:"#336021"},children:"Project Design?"})]}),_.jsx("p",{className:"lead mb-4",children:"Get expert design and consultancy services for your renewable energy project. Contact us today for a comprehensive consultation!"}),_.jsxs("div",{className:"d-flex justify-content-center gap-3 flex-wrap",children:[_.jsxs(r,{to:"/contact",className:"btn btn-lg",style:{backgroundColor:"#336021",color:"white"},children:[_.jsx("i",{className:"fas fa-phone me-2"}),"Let's Talk"]}),_.jsxs(r,{to:"/projects",className:"btn btn-outline-success btn-lg",children:[_.jsx("i",{className:"fas fa-eye me-2"}),"View Our Projects"]})]})]})})})})]}),ne=()=>_.jsxs("div",{style:{paddingTop:"80px"},children:[_.jsx("header",{className:"py-5",style:{background:"linear-gradient(135deg, #336021 0%, #4a7c59 100%)",minHeight:"60vh",display:"flex",alignItems:"center"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-12 text-center text-white",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge bg-light text-dark px-4 py-2 rounded-pill",children:"Our Energy Services"})}),_.jsxs("h1",{className:"display-3 fw-bold mb-4",children:["Comprehensive ",_.jsx("span",{className:"text-warning",children:"Energy Solutions"})]}),_.jsx("p",{className:"lead mb-4",style:{fontSize:"1.25rem"},children:"We provide expert energy services designed to optimize your energy consumption, reduce costs, and promote sustainability."}),_.jsxs("div",{className:"d-flex justify-content-center align-items-center my-4",children:[_.jsx("div",{style:{height:"2px",width:"60px",backgroundColor:"#ffc107"}}),_.jsx("div",{className:"mx-3",style:{color:"#ffc107"},children:_.jsx("i",{className:"fas fa-chart-line fa-2x"})}),_.jsx("div",{style:{height:"2px",width:"60px",backgroundColor:"#ffc107"}})]})]})})})}),_.jsx("section",{className:"py-5",children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row g-4",children:[_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-magnifying-glass-chart fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Energy Audit"}),_.jsx("p",{children:"Our Energy Audit services are designed to provide a thorough assessment of your energy consumption patterns, identifying areas of inefficiency and opportunities for improvement. Our team of certified professionals conducts detailed on-site inspections, analyzing equipment performance, building systems, and energy usage data."})]})})}),_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#ffc107"},children:_.jsx("i",{className:"fas fa-chart-line fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Energy Monitoring"}),_.jsx("p",{children:"Continuous monitoring of energy consumption is essential for proactive management and ongoing optimization. Our monitoring solutions enable real-time tracking of energy usage across facilities, allowing for immediate identification of anomalies or inefficiencies."})]})})}),_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-gears fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Energy Management"}),_.jsx("p",{children:"We will install the system, monitor & review the data and advise on energy savings for your business. Our management services encompass strategic planning, implementation of energy-saving measures, and ongoing performance evaluation."})]})})})]})})}),_.jsx("section",{className:"py-5 bg-light",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Benefits"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Why Choose Our ",_.jsx("span",{style:{color:"#336021"},children:"Energy Services"})]}),_.jsx("p",{className:"lead",children:"Our energy audit, monitoring, and management services offer numerous benefits that can transform your energy consumption patterns and lead to significant cost savings."})]})}),_.jsx("div",{className:"row g-4",children:[{icon:"fas fa-money-bill-trend-up",title:"Cost Reduction",description:"Identify energy waste and implement solutions that can reduce your energy bills by up to 30%, providing significant cost savings over time.",color:"success"},{icon:"fas fa-leaf",title:"Environmental Impact",description:"Reduce your carbon footprint and contribute to environmental sustainability through optimized energy consumption and reduced emissions.",color:"warning"},{icon:"fas fa-gauge-high",title:"Performance Optimization",description:"Enhance the performance and lifespan of your equipment through proper energy management and preventive maintenance.",color:"success"},{icon:"fas fa-certificate",title:"Compliance",description:"Ensure compliance with energy regulations and standards, avoiding potential penalties while enhancing your organization's reputation.",color:"warning"}].map((e,t)=>_.jsx("div",{className:"col-lg-3 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:`mb-4 text-${e.color}`,children:_.jsx("i",{className:`${e.icon} fa-3x`})}),_.jsx("h4",{className:"fw-bold mb-3",children:e.title}),_.jsx("p",{children:e.description})]})})},t))})]})}),_.jsx("section",{className:"py-5",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Our Process"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["How We ",_.jsx("span",{style:{color:"#336021"},children:"Deliver Results"})]}),_.jsx("p",{className:"lead",children:"Our comprehensive approach ensures that we deliver tailored energy solutions that meet your specific needs and objectives."})]})}),_.jsx("div",{className:"row g-4",children:[{number:"01",title:"Initial Assessment",description:"We begin with a thorough assessment of your current energy usage patterns, infrastructure, and requirements to establish a baseline.",color:"success"},{number:"02",title:"Data Collection",description:"Our team collects comprehensive data using advanced monitoring tools to analyze energy consumption across all systems and equipment.",color:"warning"},{number:"03",title:"Analysis & Planning",description:"We analyze the collected data to identify inefficiencies and develop a customized energy management plan with actionable recommendations.",color:"success"},{number:"04",title:"Implementation & Monitoring",description:"We implement the recommended solutions and establish ongoing monitoring systems to ensure continuous optimization and improvement.",color:"warning"}].map((e,t)=>_.jsx("div",{className:"col-lg-3 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:`mb-4 rounded-circle d-inline-flex align-items-center justify-content-center bg-${e.color} text-white`,style:{width:"60px",height:"60px"},children:_.jsx("span",{className:"fw-bold",children:e.number})}),_.jsx("h4",{className:"fw-bold mb-3",children:e.title}),_.jsx("p",{children:e.description})]})})},t))})]})}),_.jsx("section",{className:"py-5",style:{backgroundColor:"#336021"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center text-white",children:[_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Ready to Optimize Your ",_.jsx("span",{className:"text-warning",children:"Energy Usage?"})]}),_.jsx("p",{className:"lead mb-4",children:"Get expert energy audit, monitoring, and management services to reduce costs and improve efficiency. Contact us today for a comprehensive consultation!"}),_.jsxs("div",{className:"d-flex justify-content-center gap-3 flex-wrap",children:[_.jsxs(r,{to:"/contact",className:"btn btn-warning btn-lg",children:[_.jsx("i",{className:"fas fa-phone me-2"}),"Let's Talk"]}),_.jsxs(r,{to:"/projects",className:"btn btn-outline-light btn-lg",children:[_.jsx("i",{className:"fas fa-eye me-2"}),"View Our Projects"]})]})]})})})})]}),se=()=>_.jsxs("div",{style:{paddingTop:"80px"},children:[_.jsx("header",{className:"py-5",style:{background:"linear-gradient(135deg, #336021 0%, #4a7c59 100%)",minHeight:"60vh",display:"flex",alignItems:"center"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-12 text-center text-white",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge bg-light text-dark px-4 py-2 rounded-pill",children:"Our Servicing Solutions"})}),_.jsxs("h1",{className:"display-3 fw-bold mb-4",children:["Comprehensive ",_.jsx("span",{className:"text-warning",children:"Maintenance Services"})]}),_.jsx("p",{className:"lead mb-4",style:{fontSize:"1.25rem"},children:"Expert maintenance and servicing to ensure the optimal performance of your renewable energy systems with cutting-edge technology and professional expertise."}),_.jsxs("div",{className:"d-flex justify-content-center gap-3 flex-wrap",children:[_.jsxs("a",{href:"#services",className:"btn btn-warning btn-lg",children:[_.jsx("i",{className:"fas fa-tools me-2"}),"Our Services"]}),_.jsxs(r,{to:"/contact",className:"btn btn-outline-light btn-lg",children:[_.jsx("i",{className:"fas fa-calendar-check me-2"}),"Schedule Review"]})]})]})})})}),_.jsx("section",{className:"py-5 bg-light",children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row align-items-center",children:[_.jsxs("div",{className:"col-lg-6",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Professional Excellence"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Expert ",_.jsx("span",{style:{color:"#336021"},children:"Maintenance Services"})]}),_.jsx("p",{className:"lead mb-4",children:"At REIN, our commitment to renewable energy extends beyond project completion. We provide expert maintenance and servicing to ensure the optimal performance of your solar panel system with industry-leading standards and cutting-edge technology."}),_.jsxs("div",{className:"row g-3 mb-4",children:[_.jsx("div",{className:"col-6",children:_.jsxs("div",{className:"card border-0 shadow-sm text-center p-3",children:[_.jsx("div",{className:"h3 fw-bold mb-1",style:{color:"#336021"},children:"99%"}),_.jsx("div",{className:"small",children:"Uptime Rate"})]})}),_.jsx("div",{className:"col-6",children:_.jsxs("div",{className:"card border-0 shadow-sm text-center p-3",children:[_.jsx("div",{className:"h3 fw-bold mb-1",style:{color:"#336021"},children:"24/7"}),_.jsx("div",{className:"small",children:"Support"})]})})]})]}),_.jsx("div",{className:"col-lg-6",children:_.jsxs("div",{className:"position-relative",children:[_.jsx("img",{src:"/images/maintenance.jpg",alt:"Solar Maintenance Services",className:"img-fluid rounded shadow-lg",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextElementSibling.style.display="flex"}}),_.jsx("div",{className:"w-100 bg-light rounded shadow-lg d-flex align-items-center justify-content-center",style:{display:"none",height:"300px"},children:_.jsx("i",{className:"fas fa-tools fa-4x",style:{color:"#336021"}})})]})})]})})}),_.jsx("section",{id:"services",className:"py-5",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Core Services"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Our ",_.jsx("span",{style:{color:"#336021"},children:"Maintenance Solutions"})]}),_.jsx("p",{className:"lead",children:"Comprehensive maintenance services designed to maximize your renewable energy system's performance and longevity."})]})}),_.jsxs("div",{className:"row g-4",children:[_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-calendar-check fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Routine Maintenance"}),_.jsx("p",{className:"mb-4",children:"Regular maintenance is essential to keep your solar panels operating at peak performance. Our team of trained technicians conducts thorough inspections to identify any issues or potential concerns. From cleaning the panels to checking electrical connections and monitoring system performance, we ensure that your solar array remains in optimal condition year-round."}),_.jsxs(r,{to:"/contact",className:"btn btn-outline-success",children:[_.jsx("i",{className:"fas fa-arrow-right me-2"}),"Learn More"]})]})})}),_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#ffc107"},children:_.jsx("i",{className:"fas fa-stethoscope fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Diagnostic Checks"}),_.jsx("p",{className:"mb-4",children:"In the event of system malfunctions or performance fluctuations, our diagnostic checks provide a detailed analysis of your solar panel system. Utilizing advanced tools and techniques, we pinpoint the root cause of any issues and recommend appropriate solutions to restore optimal functionality."}),_.jsxs(r,{to:"/contact",className:"btn btn-outline-success",children:[_.jsx("i",{className:"fas fa-arrow-right me-2"}),"Learn More"]})]})})}),_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-wrench fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Repairs & Replacements"}),_.jsx("p",{className:"mb-4",children:"In cases where repairs or component replacements are necessary, our skilled technicians are equipped to handle a wide range of issues. Whether it's replacing damaged panels, repairing inverters, or addressing wiring issues, we prioritize efficiency and quality craftsmanship."}),_.jsxs(r,{to:"/contact",className:"btn btn-outline-success",children:[_.jsx("i",{className:"fas fa-arrow-right me-2"}),"Learn More"]})]})})})]})]})}),_.jsx("section",{className:"py-5 bg-light",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Enhancing Your Solar System"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Additional ",_.jsx("span",{style:{color:"#336021"},children:"Services"})]}),_.jsx("p",{className:"lead",children:"We offer additional services to optimize your solar panel system's performance and ensure you get the most out of your renewable energy investment."})]})}),_.jsxs("div",{className:"row g-4 align-items-center",children:[_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#ffc107"},children:_.jsx("i",{className:"fas fa-chart-line fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Performance Optimization"}),_.jsx("p",{children:"As technology evolves and energy needs change, our team remains committed to optimizing the performance of your solar panel system. We stay abreast of the latest advancements and best practices in renewable energy to recommend upgrades or enhancements that improve efficiency, reliability, and overall system performance."})]})})}),_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:"fas fa-headset fa-3x"})}),_.jsx("h4",{className:"fw-bold mb-3",children:"Client Support"}),_.jsx("p",{children:"At REIN, exceptional customer service is at the core of everything we do. Our dedicated support team is available to address any questions or concerns you may have regarding your solar panel system. Whether it's troubleshooting issues, scheduling maintenance appointments, or providing guidance on maximizing energy savings, we're here to support you every step of the way."})]})})})]})]})}),_.jsx("section",{className:"py-5",style:{backgroundColor:"#336021"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center text-white",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge bg-light text-dark px-3 py-2",children:"Long-Term Partnership"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Our ",_.jsx("span",{className:"text-warning",children:"Guarantee"})]}),_.jsx("p",{className:"lead mb-4",children:"We're committed to supporting your renewable energy journey for the long term."}),_.jsxs("div",{className:"mb-4",children:[_.jsx("h4",{className:"mb-4",children:"Our Commitment to You:"}),_.jsx("p",{className:"mb-4",children:"As our partner, you can rest easy knowing that when we complete a project we are not going to walk away. We have an in-house team of qualified experts who have the skills and knowledge to ensure your renewable energy equipment stays running long after initial commissioning."}),_.jsxs("div",{className:"row g-3 mb-4",children:[_.jsx("div",{className:"col-md-6",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("i",{className:"fas fa-calendar-alt me-3 fa-lg"}),_.jsx("span",{children:"Get in touch to secure your maintenance plan for 2, 5 or 10 years!"})]})}),_.jsx("div",{className:"col-md-6",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("i",{className:"fas fa-search me-3 fa-lg"}),_.jsx("span",{children:"If you have an existing system and want to know if it is running in optimal condition? Please get in touch to schedule a review with our maintenance team."})]})})]}),_.jsxs(r,{to:"/contact",className:"btn btn-warning btn-lg",children:[_.jsx("i",{className:"fas fa-calendar-check me-2"}),"Schedule a Maintenance Review"]})]})]})})})})]}),re=()=>_.jsxs("div",{style:{paddingTop:"80px"},children:[_.jsx("header",{className:"py-5",style:{background:"linear-gradient(135deg, #336021 0%, #4a7c59 100%)",minHeight:"60vh",display:"flex",alignItems:"center"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-12 text-center text-white",children:[_.jsx("h1",{className:"display-3 fw-bold mb-4",children:"Wind Energy"}),_.jsx("p",{className:"lead mb-4",style:{fontSize:"1.25rem"},children:"Wind turbine installation and maintenance services for residential, commercial, and industrial applications, harnessing the power of wind."}),_.jsxs("div",{className:"d-flex justify-content-center align-items-center my-4",children:[_.jsx("div",{style:{height:"2px",width:"60px",backgroundColor:"#ffc107"}}),_.jsx("div",{className:"mx-3",style:{color:"#ffc107"},children:_.jsx("i",{className:"fas fa-wind fa-2x"})}),_.jsx("div",{style:{height:"2px",width:"60px",backgroundColor:"#ffc107"}})]})]})})})}),_.jsx("section",{className:"py-5",children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row align-items-center",children:[_.jsxs("div",{className:"col-lg-6",children:[_.jsx("div",{className:"mb-3",children:_.jsx("span",{className:"badge px-3 py-2",style:{backgroundColor:"#336021",color:"white"},children:"Clean Wind Power"})}),_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Professional ",_.jsx("span",{style:{color:"#336021"},children:"Wind Energy Solutions"})]}),_.jsx("p",{className:"lead mb-4",children:"Our wind energy solutions harness the natural power of wind to generate clean, renewable electricity for homes, businesses, and industrial facilities. From small residential turbines to large commercial wind farms, we provide comprehensive wind energy services."}),_.jsx("div",{className:"mb-4",children:["High-efficiency wind turbines with proven performance","Comprehensive wind resource assessment","Professional installation and maintenance"].map((e,t)=>_.jsxs("div",{className:"d-flex align-items-center mb-2",children:[_.jsx("i",{className:"fas fa-check-circle me-3",style:{color:"#336021"}}),_.jsx("span",{children:e})]},t))})]}),_.jsxs("div",{className:"col-lg-6",children:[_.jsx("img",{src:"/images/wind.webp",alt:"Wind Energy Solutions",className:"img-fluid rounded shadow",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextElementSibling.style.display="flex"}}),_.jsx("div",{className:"w-100 bg-light rounded shadow d-flex align-items-center justify-content-center",style:{display:"none",height:"300px"},children:_.jsx("i",{className:"fas fa-wind fa-4x",style:{color:"#336021"}})})]})]})})}),_.jsx("section",{className:"py-5 bg-light",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Our ",_.jsx("span",{style:{color:"#336021"},children:"Wind Solutions"})]}),_.jsx("p",{className:"lead",children:"Complete range of wind energy solutions designed to harness the power of wind for clean electricity generation."})]})}),_.jsx("div",{className:"row g-4",children:[{icon:"fas fa-search-location",title:"Wind Resource Assessment",description:"Comprehensive wind resource evaluation to determine the viability and potential of wind energy at your site.",features:["Wind speed measurement","Site analysis and mapping","Feasibility studies","Energy yield predictions"]},{icon:"fas fa-wind",title:"Turbine Installation",description:"Professional installation of wind turbines for residential, commercial, and industrial applications.",features:["Site preparation","Foundation construction","Turbine assembly","Safety compliance"]},{icon:"fas fa-plug",title:"Grid Connection",description:"Complete electrical infrastructure and grid connection services for wind energy systems.",features:["Electrical design","Grid interconnection","Power conditioning","Utility coordination"]},{icon:"fas fa-chart-line",title:"Performance Monitoring",description:"Advanced monitoring systems to track wind turbine performance and optimize energy production.",features:["Real-time monitoring","Performance analytics","Remote diagnostics","Optimization reports"]},{icon:"fas fa-tools",title:"Maintenance Services",description:"Comprehensive maintenance and repair services to ensure optimal wind turbine performance and longevity.",features:["Preventive maintenance","Component replacement","Emergency repairs","Performance optimization"]},{icon:"fas fa-industry",title:"Commercial Wind Farms",description:"Large-scale wind farm development and management for commercial and industrial clients.",features:["Project development","Multi-turbine installations","Farm management","Power purchase agreements"]}].map((e,t)=>_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:`${e.icon} fa-3x`})}),_.jsx("h4",{className:"fw-bold mb-3",children:e.title}),_.jsx("p",{className:"mb-4",children:e.description}),_.jsx("ul",{className:"list-unstyled text-start",children:e.features.map((e,t)=>_.jsxs("li",{className:"mb-2",children:[_.jsx("i",{className:"fas fa-check text-success me-2"}),e]},t))})]})})},t))})]})}),_.jsx("section",{className:"py-5",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Wind Turbine ",_.jsx("span",{style:{color:"#336021"},children:"Types"})]}),_.jsx("p",{className:"lead",children:"We offer various types of wind turbines to suit different applications and site conditions."})]})}),_.jsx("div",{className:"row g-4",children:[{icon:"fas fa-home",title:"Residential Turbines",description:"Small-scale wind turbines designed for residential properties and small businesses.",specs:[{label:"Capacity",value:"1-10 kW"},{label:"Height",value:"10-30 meters"},{label:"Application",value:"Homes, farms"}]},{icon:"fas fa-building",title:"Commercial Turbines",description:"Medium-scale wind turbines for commercial and industrial applications.",specs:[{label:"Capacity",value:"100 kW - 1 MW"},{label:"Height",value:"50-80 meters"},{label:"Application",value:"Businesses, industries"}]},{icon:"fas fa-industry",title:"Utility-Scale Turbines",description:"Large-scale wind turbines for utility and commercial wind farm projects.",specs:[{label:"Capacity",value:"1.5-3 MW+"},{label:"Height",value:"80-120 meters"},{label:"Application",value:"Wind farms, utilities"}]}].map((e,t)=>_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsxs("div",{className:"card-body p-4 text-center",children:[_.jsx("div",{className:"mb-4",style:{color:"#336021"},children:_.jsx("i",{className:`${e.icon} fa-3x`})}),_.jsx("h4",{className:"fw-bold mb-3",children:e.title}),_.jsx("p",{className:"mb-4",children:e.description}),_.jsx("div",{className:"text-start",children:e.specs.map((e,t)=>_.jsxs("div",{className:"d-flex justify-content-between align-items-center py-2 border-bottom",children:[_.jsxs("span",{className:"fw-medium",children:[e.label,":"]}),_.jsx("span",{className:"text-muted",children:e.value})]},t))})]})})},t))})]})}),_.jsx("section",{className:"py-5",style:{backgroundColor:"#336021"},children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row align-items-center",children:[_.jsxs("div",{className:"col-lg-6 text-white",children:[_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Benefits of ",_.jsx("span",{className:"text-warning",children:"Wind Energy"})]}),_.jsx("p",{className:"lead mb-4",children:"Wind energy offers numerous advantages as a clean, renewable source of electricity generation."}),_.jsx("div",{className:"mb-4",children:["Zero emissions during operation","Inexhaustible renewable resource","Low operating and maintenance costs","Excellent return on investment"].map((e,t)=>_.jsxs("div",{className:"d-flex align-items-center mb-3",children:[_.jsx("i",{className:"fas fa-leaf me-3 fa-lg"}),_.jsx("span",{children:e})]},t))})]}),_.jsx("div",{className:"col-lg-6",children:_.jsx("div",{className:"row g-4",children:[{number:"25+",label:"Years Lifespan"},{number:"35%+",label:"Efficiency Rate"},{number:"24/7",label:"Power Generation"},{number:"95%+",label:"Uptime"}].map((e,t)=>_.jsx("div",{className:"col-6",children:_.jsxs("div",{className:"card border-0 shadow-sm text-center p-3",children:[_.jsx("h3",{className:"fw-bold mb-1",style:{color:"#336021"},children:e.number}),_.jsx("p",{className:"mb-0 small",children:e.label})]})},t))})})]})})}),_.jsx("section",{className:"py-5",children:_.jsxs("div",{className:"container",children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center mb-5",children:[_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Wind Energy ",_.jsx("span",{style:{color:"#336021"},children:"Process"})]}),_.jsx("p",{className:"lead",children:"Our comprehensive approach ensures successful wind energy project implementation from assessment to commissioning."})]})}),_.jsx("div",{className:"row g-4",children:[{number:"01",icon:"fas fa-search",title:"Assessment",description:"Wind resource and site assessment"},{number:"02",icon:"fas fa-drafting-compass",title:"Design",description:"Custom turbine and system design"},{number:"03",icon:"fas fa-file-contract",title:"Permits",description:"Regulatory approvals and permits"},{number:"04",icon:"fas fa-hammer",title:"Construction",description:"Foundation and turbine installation"},{number:"05",icon:"fas fa-plug",title:"Connection",description:"Grid connection and testing"},{number:"06",icon:"fas fa-cog",title:"Operation",description:"Commissioning and monitoring"}].map((e,t)=>_.jsx("div",{className:"col-lg-2 col-md-4 col-sm-6",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"mb-3 rounded-circle d-inline-flex align-items-center justify-content-center text-white fw-bold",style:{width:"50px",height:"50px",backgroundColor:"#336021"},children:e.number}),_.jsx("div",{className:"mb-3",style:{color:"#336021"},children:_.jsx("i",{className:`${e.icon} fa-2x`})}),_.jsx("h5",{className:"fw-bold mb-2",children:e.title}),_.jsx("p",{className:"small",children:e.description})]})},t))})]})}),_.jsx("section",{className:"py-5 bg-light",children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-lg-8 mx-auto text-center",children:[_.jsxs("h2",{className:"display-6 fw-bold mb-4",children:["Ready to Harness ",_.jsx("span",{style:{color:"#336021"},children:"Wind Power?"})]}),_.jsx("p",{className:"lead mb-4",children:"Start your wind energy project with our professional wind turbine solutions. Get a free wind resource assessment today!"}),_.jsxs("div",{className:"d-flex justify-content-center gap-3 flex-wrap",children:[_.jsxs(r,{to:"/contact",className:"btn btn-lg",style:{backgroundColor:"#336021",color:"white"},children:[_.jsx("i",{className:"fas fa-phone me-2"}),"Get Free Assessment"]}),_.jsxs(r,{to:"/projects",className:"btn btn-outline-success btn-lg",children:[_.jsx("i",{className:"fas fa-eye me-2"}),"View Our Projects"]})]})]})})})})]}),ie=()=>_.jsx("section",{className:"py-5",style:{backgroundColor:"#336021"},children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row align-items-center",children:[_.jsxs("div",{className:"col-lg-8 mb-4 mb-lg-0",children:[_.jsx("h2",{className:"display-6 fw-bold mb-3 text-white",children:"Ready to Switch to Clean Energy?"}),_.jsx("p",{className:"lead mb-0 text-white opacity-75",children:"Join thousands of satisfied customers who have made the switch to renewable energy. Get a free consultation today and start saving on your energy costs!"})]}),_.jsxs("div",{className:"col-lg-4 text-lg-end text-center",children:[_.jsxs("a",{href:"#contact",className:"btn btn-light btn-lg shadow",children:[_.jsx("i",{className:"fas fa-phone me-2"}),"Get Free Quote"]}),_.jsx("p",{className:"mt-2 mb-0 text-white opacity-75 small",children:"No obligation â¢ Free consultation"})]})]})})});var ae={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&s+1<e.length&&56320==(64512&e.charCodeAt(s+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++s)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<e.length;r+=3){const t=e[r],i=r+1<e.length,a=i?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,i||(h=64)),s.push(n[c],n[u],n[h],n[d])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(oe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,s=0;for(;n<e.length;){const r=e[n++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[n++];t[s++]=String.fromCharCode((31&r)<<6|63&i)}else if(r>239&&r<365){const i=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[s++]=String.fromCharCode(55296+(i>>10)),t[s++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[s++]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],i=r<e.length?n[e.charAt(r)]:0;++r;const a=r<e.length?n[e.charAt(r)]:64;++r;const o=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==i||null==a||null==o)throw new ce;const l=t<<2|i>>4;if(s.push(l),64!==a){const e=i<<4&240|a>>2;if(s.push(e),64!==o){const e=a<<6&192|o;s.push(e)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ue=function(e){return function(e){const t=oe(e);return le.encodeByteArray(t,!0)}(e).replace(/\./g,"")},he=function(e){try{return le.decodeString(e,!0)}catch(t){}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const de=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,fe=()=>{try{return de()||(()=>{if("undefined"==typeof process)return;const e=ae.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&he(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},pe=e=>{var t,n;return null==(n=null==(t=fe())?void 0:t.emulatorHosts)?void 0:n[e]},me=e=>{const t=pe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),s]:[t.substring(0,n),s]},ge=()=>{var e;return null==(e=fe())?void 0:e.config},ye=e=>{var t;return null==(t=fe())?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xe(e){return(await fetch(e,{credentials:"include"})).ok}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(i)),""].join(".")}const Ne={};let _e=!1;function je(e,t){if("undefined"==typeof window||"undefined"==typeof document||!be(window.location.host)||Ne[e]===t||Ne[e]||_e)return;function n(e){return`__firebase__banner__${e}`}Ne[e]=t;const s="__firebase__banner",r=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ne))Ne[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{_e=!0,function(){const e=document.getElementById(s);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(s),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}r?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ke(){return!function(){var e;const t=null==(e=fe())?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class Te extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Se.prototype.create)}}class Se{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Oe,(e,n)=>{const s=t[n];return null!=s?String(s):`<${n}?>`})}(r,n):"Error",a=`${this.serviceName}: ${i} (${s}).`;return new Te(s,a,n)}}const Oe=/\{\$([^}]+)}/g;function Ce(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const r of n){if(!s.includes(r))return!1;const n=e[r],i=t[r];if(Ae(n)&&Ae(i)){if(!Ce(n,i))return!1}else if(n!==i)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Ae(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Pe(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,s]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(s)}}),t}function Re(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Le{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");s=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===s.next&&(s.next=De),void 0===s.error&&(s.error=De),void 0===s.complete&&(s.complete=De);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch(e){}}),this.observers.push(s),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function De(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(e){return e&&e._delegate?e._delegate:e}class qe{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ue="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ve;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=(null==e?void 0:e.optional)??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:s});n.resolve(e)}catch(t){}}}}clearInstance(e=Ue){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=Ue){return this.instances.has(e)}getOptions(e=Ue){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&i.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const r=this.instances.get(n);return r&&e(r,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(s=e,s===Ue?void 0:s),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}var s;return n||null}normalizeInstanceIdentifier(e=Ue){return this.component?this.component.multipleInstances?e:Ue:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ve{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Fe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,ze;(ze=Be||(Be={}))[ze.DEBUG=0]="DEBUG",ze[ze.VERBOSE=1]="VERBOSE",ze[ze.INFO=2]="INFO",ze[ze.WARN=3]="WARN",ze[ze.ERROR=4]="ERROR",ze[ze.SILENT=5]="SILENT";const He={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},$e=Be.INFO,Ke={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},We=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!Ke[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ge{constructor(e){this.name=e,this._logLevel=$e,this._logHandler=We,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?He[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}let Qe,Ye;const Xe=new WeakMap,Je=new WeakMap,Ze=new WeakMap,et=new WeakMap,tt=new WeakMap;let nt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Je.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ze.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return it(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function st(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ye||(Ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(at(this),t),it(Xe.get(this))}:function(...t){return it(e.apply(at(this),t))}:function(t,...n){const s=e.call(at(this),t,...n);return Ze.set(s,t.sort?t.sort():[t]),it(s)}}function rt(e){return"function"==typeof e?st(e):(e instanceof IDBTransaction&&function(e){if(Je.has(e))return;const t=new Promise((t,n)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",i),e.removeEventListener("abort",i)},r=()=>{t(),s()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",i),e.addEventListener("abort",i)});Je.set(e,t)}(e),t=e,(Qe||(Qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,nt):e);var t}function it(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",i)},r=()=>{t(it(e.result)),s()},i=()=>{n(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Xe.set(t,e)}).catch(()=>{}),tt.set(t,e),t}(e);if(et.has(e))return et.get(e);const t=rt(e);return t!==e&&(et.set(e,t),tt.set(t,e)),t}const at=e=>tt.get(e);const ot=["get","getKey","getAll","getAllKeys","count"],lt=["put","add","delete","clear"],ct=new Map;function ut(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(ct.get(t))return ct.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,r=lt.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!r&&!ot.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,r?"readwrite":"readonly");let a=i.store;return s&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),r&&i.done]))[0]};return ct.set(t,i),i}nt=(e=>({...e,get:(t,n,s)=>ut(t,n)||e.get(t,n,s),has:(t,n)=>!!ut(t,n)||e.has(t,n)}))(nt);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ht{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const dt="@firebase/app",ft="0.14.0",pt=new Ge("@firebase/app"),mt="@firebase/app-compat",gt="@firebase/analytics-compat",yt="@firebase/analytics",vt="@firebase/app-check-compat",bt="@firebase/app-check",xt="@firebase/auth",wt="@firebase/auth-compat",Nt="@firebase/database",_t="@firebase/data-connect",jt="@firebase/database-compat",Et="@firebase/functions",kt="@firebase/functions-compat",Tt="@firebase/installations",St="@firebase/installations-compat",Ot="@firebase/messaging",Ct="@firebase/messaging-compat",At="@firebase/performance",It="@firebase/performance-compat",Pt="@firebase/remote-config",Rt="@firebase/remote-config-compat",Lt="@firebase/storage",Dt="@firebase/storage-compat",Mt="@firebase/firestore",qt="@firebase/ai",Ut="@firebase/firestore-compat",Ft="firebase",Vt="[DEFAULT]",Bt={[dt]:"fire-core",[mt]:"fire-core-compat",[yt]:"fire-analytics",[gt]:"fire-analytics-compat",[bt]:"fire-app-check",[vt]:"fire-app-check-compat",[xt]:"fire-auth",[wt]:"fire-auth-compat",[Nt]:"fire-rtdb",[_t]:"fire-data-connect",[jt]:"fire-rtdb-compat",[Et]:"fire-fn",[kt]:"fire-fn-compat",[Tt]:"fire-iid",[St]:"fire-iid-compat",[Ot]:"fire-fcm",[Ct]:"fire-fcm-compat",[At]:"fire-perf",[It]:"fire-perf-compat",[Pt]:"fire-rc",[Rt]:"fire-rc-compat",[Lt]:"fire-gcs",[Dt]:"fire-gcs-compat",[Mt]:"fire-fst",[Ut]:"fire-fst-compat",[qt]:"fire-vertex","fire-js":"fire-js",[Ft]:"fire-js-all"},zt=new Map,Ht=new Map,$t=new Map;function Kt(e,t){try{e.container.addComponent(t)}catch(n){pt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Wt(e){const t=e.name;if($t.has(t))return pt.debug(`There were multiple attempts to register component ${t}.`),!1;$t.set(t,e);for(const n of zt.values())Kt(n,e);for(const n of Ht.values())Kt(n,e);return!0}function Gt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Qt(e){return null!=e&&void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt=new Se("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Xt{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new qe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yt.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="12.0.0";function Zt(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const s={name:Vt,automaticDataCollectionEnabled:!0,...t},r=s.name;if("string"!=typeof r||!r)throw Yt.create("bad-app-name",{appName:String(r)});if(n||(n=ge()),!n)throw Yt.create("no-options");const i=zt.get(r);if(i){if(Ce(n,i.options)&&Ce(s,i.config))return i;throw Yt.create("duplicate-app",{appName:r})}const a=new Ve(r);for(const l of $t.values())a.addComponent(l);const o=new Xt(n,s,a);return zt.set(r,o),o}function en(e=Vt){const t=zt.get(e);if(!t&&e===Vt&&ge())return Zt();if(!t)throw Yt.create("no-app",{appName:e});return t}function tn(e,t,n){let s=Bt[e]??e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=t.match(/\s|\//);if(r||i){const e=[`Unable to register library "${s}" with version "${t}":`];return r&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&e.push("and"),i&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void pt.warn(e.join(" "))}Wt(new qe(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="firebase-heartbeat-store";let sn=null;function rn(){return sn||(sn=function(e,t,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const a=indexedDB.open(e,t),o=it(a);return s&&a.addEventListener("upgradeneeded",e=>{s(it(a.result),e.oldVersion,e.newVersion,it(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(nn)}catch(n){}}}).catch(e=>{throw Yt.create("idb-open",{originalErrorMessage:e.message})})),sn}async function an(e,t){try{const n=(await rn()).transaction(nn,"readwrite"),s=n.objectStore(nn);await s.put(t,on(e)),await n.done}catch(n){if(n instanceof Te)pt.warn(n.message);else{const e=Yt.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});pt.warn(e.message)}}}function on(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new un(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cn();if(null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(e=>e.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){pt.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=cn(),{heartbeatsToSend:n,unsentEntries:s}=function(e,t=1024){const n=[];let s=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),hn(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),hn(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}(this._heartbeatsCache.heartbeats),r=ue(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return pt.warn(t),""}}}function cn(){return(new Date).toISOString().substring(0,10)}class un{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null==(e=r.error)?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await rn()).transaction(nn),n=await t.objectStore(nn).get(on(e));return await t.done,n}catch(t){if(t instanceof Te)pt.warn(t.message);else{const e=Yt.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});pt.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return an(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return an(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function hn(e){return ue(JSON.stringify({version:2,heartbeats:e})).length}var dn;function fn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}dn="",Wt(new qe("platform-logger",e=>new ht(e),"PRIVATE")),Wt(new qe("heartbeat",e=>new ln(e),"PRIVATE")),tn(dt,ft,dn),tn(dt,ft,"esm2020"),tn("fire-js","");const pn=fn,mn=new Se("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gn=new Ge("@firebase/auth");function yn(e,...t){gn.logLevel<=Be.ERROR&&gn.error(`Auth (${Jt}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(e,...t){throw Nn(e,...t)}function bn(e,...t){return Nn(e,...t)}function xn(e,t,n){const s={...pn(),[t]:n};return new Se("auth","Firebase",s).create(t,{appName:e.name})}function wn(e){return xn(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nn(e,...t){if("string"!=typeof e){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return mn.create(e,...t)}function _n(e,t,...n){if(!e)throw Nn(t,...n)}function jn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw yn(t),new Error(t)}function En(e,t){e||jn(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.href)||""}function Tn(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Tn()&&"https:"!==Tn()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class On{constructor(e,t){this.shortDelay=e,this.longDelay=t,En(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Sn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(e,t){En(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Pn=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Rn=new On(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Dn(e,t,n,s,r={}){return Mn(e,r,async()=>{let r={},i={};s&&("GET"===t?i=s:r={body:JSON.stringify(s)});const a=Ie({key:e.config.apiKey,...i}).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l={method:t,headers:o,...r};return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&be(e.emulatorConfig.host)&&(l.credentials="include"),An.fetch()(await Un(e,e.config.apiHost,n,a),l)})}async function Mn(e,t,n){e._canInitEmulator=!1;const s={...In,...t};try{const t=new Vn(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await r.json();if("needConfirmation"in i)throw Bn(e,"account-exists-with-different-credential",i);if(r.ok&&!("errorMessage"in i))return i;{const t=r.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Bn(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Bn(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Bn(e,"user-disabled",i);const o=s[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw xn(e,o,a);vn(e,o)}}catch(r){if(r instanceof Te)throw r;vn(e,"network-request-failed",{message:String(r)})}}async function qn(e,t,n,s,r={}){const i=await Dn(e,t,n,s,r);return"mfaPendingCredential"in i&&vn(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function Un(e,t,n,s){const r=`${t}${n}?${s}`,i=e,a=i.config.emulator?Cn(e.config,r):`${e.config.apiScheme}://${r}`;if(Pn.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function Fn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vn{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(bn(this.auth,"network-request-failed")),Rn.get())})}}function Bn(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=bn(e,t,s);return r.customData._tokenResponse=n,r}function zn(e){return void 0!==e&&void 0!==e.enterprise}class Hn{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Fn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $n(e,t){return Dn(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Wn(e){return 1e3*Number(e)}function Gn(e){const[t,n,s]=e.split(".");if(void 0===t||void 0===n||void 0===s)return yn("JWT malformed, contained fewer than 3 sections"),null;try{const e=he(n);return e?JSON.parse(e):(yn("Failed to decode base64 JWT payload"),null)}catch(r){return yn("Caught error parsing JWT payload as JSON",null==r?void 0:r.toString()),null}}function Qn(e){const t=Gn(e);return _n(t,"internal-error"),_n(void 0!==t.exp,"internal-error"),_n(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yn(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Te&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}class Xn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kn(this.lastLoginAt),this.creationTime=Kn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zn(e){var t;const n=e.auth,s=await e.getIdToken(),r=await Yn(e,$n(n,{idToken:s}));_n(null==r?void 0:r.users.length,n,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const a=(null==(t=i.providerUserInfo)?void 0:t.length)?es(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&i.passwordHash||(null==o?void 0:o.length)),d=!!u&&h,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Jn(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function es(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ts{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_n(e.idToken,"internal-error"),_n(void 0!==e.idToken,"internal-error"),_n(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):Qn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_n(0!==e.length,"internal-error");const t=Qn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(_n(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:r}=await async function(e,t){const n=await Mn(e,{},async()=>{const n=Ie({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,i=await Un(e,s,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&be(e.emulatorConfig.host)&&(o.credentials="include"),An.fetch()(i,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,s,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:r}=t,i=new ts;return n&&(_n("string"==typeof n,"internal-error",{appName:e}),i.refreshToken=n),s&&(_n("string"==typeof s,"internal-error",{appName:e}),i.accessToken=s),r&&(_n("number"==typeof r,"internal-error",{appName:e}),i.expirationTime=r),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ts,this.toJSON())}_performRefresh(){return jn("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(e,t){_n("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ss{constructor({uid:e,auth:t,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new Xn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jn(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Yn(this,this.stsTokenManager.getToken(this.auth,e));return _n(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Me(e),s=await n.getIdToken(t),r=Gn(s);_n(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i="object"==typeof r.firebase?r.firebase:void 0,a=null==i?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:Kn(Wn(r.auth_time)),issuedAtTime:Kn(Wn(r.iat)),expirationTime:Kn(Wn(r.exp)),signInProvider:a||null,signInSecondFactor:(null==i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Me(e);await Zn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(_n(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ss({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){_n(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Zn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qt(this.auth.app))return Promise.reject(wn(this.auth));const e=await this.getIdToken();return await Yn(this,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){return Dn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,s=t.email??void 0,r=t.phoneNumber??void 0,i=t.photoURL??void 0,a=t.tenantId??void 0,o=t._redirectEventId??void 0,l=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:u,emailVerified:h,isAnonymous:d,providerData:f,stsTokenManager:p}=t;_n(u&&p,e,"internal-error");const m=ts.fromJSON(this.name,p);_n("string"==typeof u,e,"internal-error"),ns(n,e.name),ns(s,e.name),_n("boolean"==typeof h,e,"internal-error"),_n("boolean"==typeof d,e,"internal-error"),ns(r,e.name),ns(i,e.name),ns(a,e.name),ns(o,e.name),ns(l,e.name),ns(c,e.name);const g=new ss({uid:u,auth:e,email:s,emailVerified:h,displayName:n,isAnonymous:d,photoURL:i,phoneNumber:r,tenantId:a,stsTokenManager:m,createdAt:l,lastLoginAt:c});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),o&&(g._redirectEventId=o),g}static async _fromIdTokenResponse(e,t,n=!1){const s=new ts;s.updateFromServerResponse(t);const r=new ss({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Zn(r),r}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];_n(void 0!==s.localId,"internal-error");const r=void 0!==s.providerUserInfo?es(s.providerUserInfo):[],i=!(s.email&&s.passwordHash||(null==r?void 0:r.length)),a=new ts;a.updateFromIdToken(n);const o=new ss({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Jn(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash||(null==r?void 0:r.length))};return Object.assign(o,l),o}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Map;function is(e){En(e instanceof Function,"Expected a class definition");let t=rs.get(e);return t?(En(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,rs.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}as.type="NONE";const os=as;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(e,t,n){return`firebase:${e}:${t}:${n}`}class cs{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:r}=this.auth;this.fullUserKey=ls(this.userKey,s.apiKey,r),this.fullPersistenceKey=ls("persistence",s.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){const t=await $n(this.auth,{idToken:e}).catch(()=>{});return t?ss._fromGetAccountInfoResponse(this.auth,t,e):null}return ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new cs(is(os),e,n);const s=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=s[0]||is(os);const i=ls(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(i);if(t){let n;if("string"==typeof t){const s=await $n(e,{idToken:t}).catch(()=>{});if(!s)break;n=await ss._fromGetAccountInfoResponse(e,s,t)}else n=ss._fromJSON(e,t);l!==r&&(a=n),r=l;break}}catch{}const o=s.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&o.length?(r=o[0],a&&await r._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(i)}catch{}})),new cs(r,e,n)):new cs(r,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ps(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(hs(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gs(t))return"Blackberry";if(ys(t))return"Webos";if(ds(t))return"Safari";if((t.includes("chrome/")||fs(t))&&!t.includes("edge/"))return"Chrome";if(ms(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function hs(e=Ee()){return/firefox\//i.test(e)}function ds(e=Ee()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function fs(e=Ee()){return/crios\//i.test(e)}function ps(e=Ee()){return/iemobile/i.test(e)}function ms(e=Ee()){return/android/i.test(e)}function gs(e=Ee()){return/blackberry/i.test(e)}function ys(e=Ee()){return/webos/i.test(e)}function vs(e=Ee()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function bs(){return function(){const e=Ee();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function xs(e=Ee()){return vs(e)||ms(e)||ys(e)||gs(e)||/windows phone/i.test(e)||ps(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(e,t=[]){let n;switch(e){case"Browser":n=us(Ee());break;case"Worker":n=`${us(Ee())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Jt}/${s}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,s)=>{try{n(e(t))}catch(r){s(r)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(s){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){var t;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??6,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),void 0!==n.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),void 0!==n.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),void 0!==n.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),void 0!==n.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(null==(t=e.allowedNonAlphanumericCharacters)?void 0:t.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ks(this),this.idTokenSubscription=new ks(this),this.beforeStateQueue=new Ns(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=is(t)),this._initializationPromise=this.queue(async()=>{var n,s,r;if(!this._deleted&&(this.persistenceManager=await cs.create(this,e),null==(n=this._resolvePersistenceManagerAvailable)||n.call(this),!this._deleted)){if(null==(s=this._popupRedirectResolver)?void 0:s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null==(r=this.currentUser)?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await $n(this,{idToken:e}),n=await ss._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Qt(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null==(t=this.redirectUser)?void 0:t._redirectEventId,i=null==s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null==a?void 0:a.user)||(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return _n(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zn(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qt(this.app))return Promise.reject(wn(this));const t=e?Me(e):null;return t&&_n(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_n(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qt(this.app)?Promise.reject(wn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qt(this.app)?Promise.reject(wn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(is(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return Dn(e,"GET","/v2/passwordPolicy",Ln(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new _s(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Se("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Dn(e,"POST","/v2/accounts:revokeToken",Ln(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null==(e=this._currentUser)?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&is(e)||this._popupRedirectResolver;_n(t,this,"argument-error"),this.redirectPersistenceManager=await cs.create(this,[is(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null==(t=this._currentUser)?void 0:t._redirectEventId)===e?this._currentUser:(null==(n=this.redirectUser)?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=(null==(e=this.currentUser)?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_n(a,this,"internal-error"),a.then(()=>{i||r(this.currentUser)}),"function"==typeof t){const r=e.addObserver(t,n,s);return()=>{i=!0,r()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _n(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ws(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null==(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null==(e=this.appCheckServiceProvider.getImmediate({optional:!0}))?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){gn.logLevel<=Be.WARN&&gn.warn(`Auth (${Jt}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Es(e){return Me(e)}class ks{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Le(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return _n(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ts={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ss(e){return Ts.loadJS(e)}class Os{constructor(){this.enterprise=new Cs}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Cs{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const As="NO_RECAPTCHA";class Is{constructor(e){this.type="recaptcha-enterprise",this.auth=Es(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{(async function(e,t){return Dn(e,"GET","/v2/recaptchaConfig",Ln(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(s=>{if(void 0!==s.recaptchaKey){const n=new Hn(s);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})}function s(t,n,s){const r=window.grecaptcha;zn(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(As)})}):s(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Os).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{n(this.auth).then(n=>{if(!t&&zn(window.grecaptcha))s(n,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ts.recaptchaEnterpriseScript;0!==t.length&&(t+=n),Ss(t).then(()=>{s(n,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ps(e,t,n,s=!1,r=!1){const i=new Is(e);let a;if(r)a=As;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o={...t};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return s?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Rs(e,t,n,s,r){var i;if(null==(i=e._getRecaptchaConfig())?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Ps(e,t,n,"getOobCode"===n);return s(e,r)}return s(e,t).catch(async r=>{if("auth/missing-recaptcha-token"===r.code){const r=await Ps(e,t,n,"getOobCode"===n);return s(e,r)}return Promise.reject(r)})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(e,t,n){const s=Es(e);_n(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),i=Ds(t),{host:a,port:o}=function(e){const t=Ds(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const e=r[1];return{host:e,port:Ms(s.substr(e.length+1))}}{const[e,t]=s.split(":");return{host:e,port:Ms(t)}}}(t),l=null===o?"":`:${o}`,c={url:`${i}//${a}${l}/`},u=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator)return _n(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),void _n(Ce(c,s.config.emulator)&&Ce(u,s.emulatorConfig),s,"emulator-config-failed");s.config.emulator=c,s.emulatorConfig=u,s.settings.appVerificationDisabledForTesting=!0,be(a)?(xe(`${i}//${a}${l}`),je("Auth",!0)):function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function Ds(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ms(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class qs{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jn("not implemented")}_getIdTokenResponse(e){return jn("not implemented")}_linkToIdToken(e,t){return jn("not implemented")}_getReauthenticationResolver(e){return jn("not implemented")}}async function Us(e,t){return Dn(e,"POST","/v1/accounts:signUp",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fs(e,t){return qn(e,"POST","/v1/accounts:signInWithPassword",Ln(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Vs extends qs{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Vs(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Vs(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Rs(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Fs);case"emailLink":return async function(e,t){return qn(e,"POST","/v1/accounts:signInWithEmailLink",Ln(e,t))}(e,{email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Rs(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Us);case"emailLink":return async function(e,t){return qn(e,"POST","/v1/accounts:signInWithEmailLink",Ln(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bs(e,t){return qn(e,"POST","/v1/accounts:signInWithIdp",Ln(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends qs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:s,...r}=t;if(!n||!s)return null;const i=new zs(n,s);return i.idToken=r.idToken||void 0,i.accessToken=r.accessToken||void 0,i.secret=r.secret,i.nonce=r.nonce,i.pendingToken=r.pendingToken||null,i}_getIdTokenResponse(e){return Bs(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Bs(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bs(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ie(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){const t=Pe(Re(e)),n=t.apiKey??null,s=t.oobCode??null,r=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);_n(n&&s&&r,"argument-error"),this.apiKey=n,this.operation=r,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=Pe(Re(e)).link,n=t?Pe(Re(t)).deep_link_id:null,s=Pe(Re(e)).deep_link_id;return(s?Pe(Re(s)).link:null)||s||n||t||e}(e);try{return new Hs(t)}catch{return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.providerId=$s.PROVIDER_ID}static credential(e,t){return Vs._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Hs.parseLink(t);return _n(n,"argument-error"),Vs._fromEmailAndCode(e,n.code,n.tenantId)}}$s.PROVIDER_ID="password",$s.EMAIL_PASSWORD_SIGN_IN_METHOD="password",$s.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ks{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends Ks{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Ws{constructor(){super("facebook.com")}static credential(e){return zs._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com",Gs.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Qs extends Ws{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zs._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Qs.credential(t,n)}catch{return null}}}Qs.GOOGLE_SIGN_IN_METHOD="google.com",Qs.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ys extends Ws{constructor(){super("github.com")}static credential(e){return zs._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.GITHUB_SIGN_IN_METHOD="github.com",Ys.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Xs extends Ws{constructor(){super("twitter.com")}static credential(e,t){return zs._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Xs.credential(t,n)}catch{return null}}}Xs.TWITTER_SIGN_IN_METHOD="twitter.com",Xs.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Js{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const r=await ss._fromIdTokenResponse(e,n,s),i=Zs(n);return new Js({user:r,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=Zs(n);return new Js({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function Zs(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends Te{constructor(e,t,n,s){super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,er.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new er(e,t,n,s)}}function tr(e,t,n,s){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw er._fromErrorAndOperation(e,n,t,s);throw n})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function nr(e,t,n=!1){if(Qt(e.app))return Promise.reject(wn(e));const s="signIn",r=await tr(e,s,t),i=await Js._fromIdTokenResponse(e,s,r);return n||await e._updateCurrentUser(i.user),i}function sr(e,t,n){return Qt(e.app)?Promise.reject(wn(e)):async function(e,t){return nr(Es(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Me(e),$s.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&async function(e){const t=Es(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}(e),t})}const rr="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rr,"1"),this.storage.removeItem(rr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends ir{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xs(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);bs()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,10):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ar.type="LOCAL";const or=ar;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends ir{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lr.type="SESSION";const cr=lr;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ur{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ur(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:r}=t.data,i=this.handlersMap[s];if(!(null==i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const a=Array.from(i).map(async e=>e(t.origin,r)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function hr(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur.receivers=[];class dr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,i;return new Promise((a,o)=>{const l=hr("",20);s.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(t.data.response);break;default:clearTimeout(c),clearTimeout(r),o(new Error("invalid_response"))}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pr(){return void 0!==fr().WorkerGlobalScope&&"function"==typeof fr().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const mr="firebaseLocalStorageDb",gr="firebaseLocalStorage",yr="fbase_key";class vr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function br(e,t){return e.transaction([gr],t?"readwrite":"readonly").objectStore(gr)}function xr(){const e=indexedDB.open(mr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(gr,{keyPath:yr})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(gr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(mr);return new vr(e).toPromise()}(),t(await xr()))})})}async function wr(e,t,n){const s=br(e,!0).put({[yr]:t,value:n});return new vr(s).toPromise()}function Nr(e,t){const n=br(e,!0).delete(t);return new vr(n).toPromise()}class _r{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await xr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ur._getInstance(pr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new dr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null==(e=n[0])?void 0:e.fulfilled)&&(null==(t=n[0])?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null==(t=null==navigator?void 0:navigator.serviceWorker)?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xr();return await wr(e,rr,"1"),await Nr(e,rr),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>wr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=br(e,!1).get(t),s=await new vr(n).toPromise();return void 0===s?null:s.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Nr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=br(e,!1).getAll();return new vr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:s,value:r}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}_r.type="LOCAL";const jr=_r;new On(3e4,6e4);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Er extends qs{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function kr(e){return nr(e.auth,new Er(e),e.bypassAuthState)}function Tr(e){const{auth:t,user:n}=e;return _n(n,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,n=!1){const{auth:s}=e;if(Qt(s.app))return Promise.reject(wn(s));const r="reauthenticate";try{const i=await Yn(e,tr(s,r,t,e),n);_n(i.idToken,s,"internal-error");const a=Gn(i.idToken);_n(a,s,"internal-error");const{sub:o}=a;return _n(e.uid===o,s,"user-mismatch"),Js._forOperation(e,r,i)}catch(i){throw"auth/user-not-found"===(null==i?void 0:i.code)&&vn(s,"user-mismatch"),i}}(n,new Er(e),e.bypassAuthState)}async function Sr(e){const{auth:t,user:n}=e;return _n(n,t,"internal-error"),async function(e,t,n=!1){const s=await Yn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Js._forOperation(e,"link",s)}(n,new Er(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t,n,s,r=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:r,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kr;case"linkViaPopup":case"linkViaRedirect":return Sr;case"reauthViaPopup":case"reauthViaRedirect":return Tr;default:vn(this.auth,"internal-error")}}resolve(e){En(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){En(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new On(2e3,1e4);class Ar extends Or{constructor(e,t,n,s,r){super(e,t,s,r),this.provider=n,this.authWindow=null,this.pollId=null,Ar.currentPopupAction&&Ar.currentPopupAction.cancel(),Ar.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _n(e,this.auth,"internal-error"),e}async onExecution(){En(1===this.filter.length,"Popup operations only handle one event");const e=hr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null==(e=this.authWindow)?void 0:e.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ar.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null==(n=null==(t=this.authWindow)?void 0:t.window)?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Cr.get())};e()}}Ar.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ir="pendingRedirect",Pr=new Map;class Rr extends Or{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Pr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return ls(Ir,e.config.apiKey,e.name)}(t),s=function(e){return is(e._redirectPersistence)}(e);if(!(await s._isAvailable()))return!1;const r="true"===await s._get(n);return await s._remove(n),r}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Pr.set(this.auth._key(),e)}return this.bypassAuthState||Pr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Lr(e,t){Pr.set(e._key(),t)}async function Dr(e,t,n=!1){if(Qt(e.app))return Promise.reject(wn(e));const s=Es(e),r=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return t?is(t):(_n(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(s,t),i=new Rr(s,r,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,t)),a}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ur(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ur(e)){const s=(null==(n=e.error.code)?void 0:n.split("auth/")[1])||"internal-error";t.onError(bn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qr(e))}saveEventToCache(e){this.cachedEventUids.add(qr(e)),this.lastProcessedEventTime=Date.now()}}function qr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ur({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Fr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vr=/^https?/;async function Br(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Dn(e,"GET","/v1/projects",t)}(e);for(const n of t)try{if(zr(n))return}catch{}vn(e,"unauthorized-domain")}function zr(e){const t=kn(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===s?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===s}if(!Vr.test(n))return!1;if(Fr.test(e))return s===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new On(3e4,6e4);function $r(){const e=fr().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Kr(e){return new Promise((t,n)=>{var s,r,i;function a(){$r(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{$r(),n(bn(e,"network-request-failed"))},timeout:Hr.get()})}if(null==(r=null==(s=fr().gapi)?void 0:s.iframes)?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null==(i=fr().gapi)?void 0:i.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return fr()[t]=()=>{gapi.load?a():n(bn(e,"network-request-failed"))},Ss(`${Ts.gapiScript}?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw Wr=null,e})}let Wr=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Gr=new On(5e3,15e3),Qr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xr(e){const t=e.config;_n(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Cn(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:Jt},r=Yr.get(e.config.apiHost);r&&(s.eid=r);const i=e._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Ie(s).slice(1)}`}async function Jr(e){const t=await function(e){return Wr=Wr||Kr(e),Wr}(e),n=fr().gapi;return _n(n,e,"internal-error"),t.open({where:document.body,url:Xr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qr,dontclear:!0},t=>new Promise(async(n,s)=>{await t.restyle({setHideOnLeave:!1});const r=bn(e,"network-request-failed"),i=fr().setTimeout(()=>{s(r)},Gr.get());function a(){fr().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{s(r)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ei{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ti(e,t,n,s=500,r=600){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let o="";const l={...Zr,width:s.toString(),height:r.toString(),top:i,left:a},c=Ee().toLowerCase();n&&(o=fs(c)?"_blank":n),hs(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=Ee()){var t;return vs(e)&&!!(null==(t=window.navigator)?void 0:t.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",o),new ei(null);const h=window.open(t||"",o,u);_n(h,e,"popup-blocked");try{h.focus()}catch(d){}return new ei(h)}const ni="__/auth/handler",si="emulator/auth/handler",ri=encodeURIComponent("fac");async function ii(e,t,n,s,r,i){_n(e.config.authDomain,e,"auth-domain-config-required"),_n(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:Jt,eventId:r};if(t instanceof Ks){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))a[e]=t}if(t instanceof Ws){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${ri}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${ni}`;return Cn(e,si)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${Ie(o).slice(1)}${c}`}const ai="webStorageSupport";const oi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cr,this._completeRedirectFn=Dr,this._overrideRedirectResult=Lr}async _openPopup(e,t,n,s){var r;En(null==(r=this.eventManagers[e._key()])?void 0:r.manager,"_initialize() not called before _openPopup()");return ti(e,await ii(e,t,n,kn(),s),hr())}async _openRedirect(e,t,n,s){await this._originValidation(e);return function(e){fr().location.href=e}(await ii(e,t,n,kn(),s)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(En(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Jr(e),n=new Mr(e);return t.register("authEvent",t=>{_n(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ai,{type:ai},n=>{var s;const r=null==(s=null==n?void 0:n[0])?void 0:s[ai];void 0!==r&&t(!!r),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Br(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xs()||ds()||vs()}};var li="@firebase/auth",ci="1.11.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ui{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null==(e=this.auth.currentUser)?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_n(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const hi=ye("authIdTokenMaxAge")||300;let di=null;var fi;Ts={loadJS:e=>new Promise((t,n)=>{const s=document.createElement("script");var r;s.setAttribute("src",e),s.onload=t,s.onerror=e=>{const t=bn("internal-error");t.customData=e,n(t)},s.type="text/javascript",s.charset="UTF-8",((null==(r=document.getElementsByTagName("head"))?void 0:r[0])??document).appendChild(s)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},fi="Browser",Wt(new qe("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=n.options;_n(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:i,authDomain:a,clientPlatform:fi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ws(fi)},l=new js(n,s,r,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(is);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Wt(new qe("auth-internal",e=>{const t=Es(e.getProvider("auth").getImmediate());return new ui(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),tn(li,ci,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(fi)),tn(li,ci,"esm2020");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
tn("firebase","12.0.0","app");var pi,mi,gi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var s=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)s[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)s[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var i=e.g[3],a=t+(i^n&(r^i))+s[0]+3614090360&4294967295;a=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(r^t&(n^r))+s[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^i&(t^n))+s[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(i^t))+s[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(r^i))+s[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(r^t&(n^r))+s[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^i&(t^n))+s[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(i^t))+s[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(r^i))+s[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(r^t&(n^r))+s[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^i&(t^n))+s[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(i^t))+s[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(r^i))+s[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(r^t&(n^r))+s[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^i&(t^n))+s[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(i^t))+s[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^i&(n^r))+s[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^r&(t^n))+s[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(i^t))+s[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(r^i))+s[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^i&(n^r))+s[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^r&(t^n))+s[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(i^t))+s[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(r^i))+s[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^i&(n^r))+s[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^r&(t^n))+s[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(i^t))+s[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(r^i))+s[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^i&(n^r))+s[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^r&(t^n))+s[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(i^t))+s[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(r^i))+s[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^r^i)+s[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^r)+s[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=r+(i^t^n)+s[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^i^t)+s[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^i)+s[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^r)+s[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=r+(i^t^n)+s[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^i^t)+s[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^i)+s[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^r)+s[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=r+(i^t^n)+s[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^i^t)+s[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^i)+s[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^r)+s[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=r+(i^t^n)+s[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^i^t)+s[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(r^(n|~i))+s[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~r))+s[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(i|~n))+s[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(r|~t))+s[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(n|~i))+s[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~r))+s[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(i|~n))+s[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(r|~t))+s[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(n|~i))+s[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~r))+s[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(i|~n))+s[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(r|~t))+s[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(r^(n|~i))+s[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~r))+s[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((r=i+((a=r+(t^(i|~n))+s[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+s[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+i&4294967295}function s(e,t){this.h=t;for(var n=[],s=!0,r=e.length-1;0<=r;r--){var i=0|e[r];s&&i==t||(n[r]=i,s=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,s){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[n].apply(e,r)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var s=t-this.blockSize,r=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=s;)n(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){n(this,r),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var s=0;32>s;s+=8)e[n++]=this.g[t]>>>s&255;return e};var r={};function i(e){return-128<=e&&128>e?function(e,t){var n=r;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new s([0|e],0>e?-1:0)}):new s([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return d(a(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,s=t;0>=s.l(e);)n=y(n),s=y(s);var r=v(n,1),i=v(s,1);for(s=v(s,2),n=v(n,2);!u(s);){var c=i.add(s);0>=c.l(e)&&(r=r.add(n),i=c),s=v(s,1),n=v(n,1)}return t=f(e,r.j(t)),new m(r,t)}for(r=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),s=48>=(s=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,s-48),c=(i=a(n)).j(t);h(c)||0<c.l(e);)c=(i=a(n-=s)).j(t);u(i)&&(i=l),r=r.add(i),e=f(e,c)}return new m(r,e)}function y(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new s(i,e.h)}(e=s.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var s=this.i(n);e+=(0<=s?s:4294967296+s)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,s="";;){var r=g(n,t).g,i=((0<(n=f(n,r.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=r))return i+s;for(;6>i.length;)i="0"+i;s=i+s}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var l=this.i(r)>>>16,f=65535&this.i(r),m=e.i(i)>>>16,g=65535&e.i(i);n[2*r+2*i]+=f*g,p(n,2*r+2*i),n[2*r+2*i+1]+=l*g,p(n,2*r+2*i+1),n[2*r+2*i+1]+=f*m,p(n,2*r+2*i+1),n[2*r+2*i+2]+=l*m,p(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new s(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,mi=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=a,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var s=a(Math.pow(n,8)),r=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),r=r.j(l).add(a(c))):r=(r=r.j(s)).add(a(c))}return r},pi=s}).apply(void 0!==gi?gi:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var yi,vi,bi,xi,wi,Ni,_i,ji,Ei="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ei&&Ei];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,s){if(s)e:{var r=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in r))break e;r=r[a]}(s=s(i=r[e=e[e.length-1]]))!=i&&null!=s&&t(r,e,{configurable:!0,writable:!0,value:s})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,s=!1,r={next:function(){if(!s&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return s=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,function(e,t){return t})}});
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var s=s||{},r=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,s),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,s){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[n].apply(e,r)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let s=0;s<t;s++)n[s]=e[s];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,s=t.length||0;e.length=n+s;for(let r=0;r<s;r++)e[n+r]=t[r]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=r.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function v(e,t,n){for(const s in e)t.call(n,e[s],s,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,s;for(let r=1;r<arguments.length;r++){for(n in s=arguments[r],s)e[n]=s[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function _(e){r.setTimeout(()=>{throw e},0)}function j(){var e=O;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new k,e=>e.reset());class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,S=!1,O=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},C=()=>{const e=r.Promise.resolve(void 0);T=()=>{e.then(A)}};var A=()=>{for(var e;e=j();){try{e.h.call(e.g)}catch(n){_(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}S=!1};function I(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}I.prototype.s=!1,I.prototype.ma=function(){this.s||(this.s=!0,this.N())},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};r.addEventListener("test",e,t),r.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var r=!0;break e}catch(i){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,P);var D={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),q=0;function U(e,t,n,s,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!s,this.ha=r,this.key=++q,this.da=this.fa=!1}function F(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var s,r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(F(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function z(e,t,n,s){for(var r=0;r<e.length;++r){var i=e[r];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==s)return r}return-1}V.prototype.add=function(e,t,n,s,r){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=z(e,t,s,r);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,i,!!s,r)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),$={};function K(e,t,n,s,r){if(Array.isArray(t)){for(var i=0;i<t.length;i++)K(e,t[i],n,s,r);return null}return n=Z(n),e&&e[M]?e.K(t,n,a(s)?!!s.capture:!!s,r):function(e,t,n,s,r,i){if(!t)throw Error("Invalid event type");var o=a(r)?!!r.capture:!!r,l=X(e);if(l||(e[H]=l=new V(e)),n=l.add(t,n,s,o,i),n.proxy)return n;if(s=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Y;return e}(),n.proxy=s,s.src=e,s.listener=n,e.addEventListener)R||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),s,r);else if(e.attachEvent)e.attachEvent(Q(t.toString()),s);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(s)}return n}(e,t,n,!1,s,r)}function W(e,t,n,s,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)W(e,t[i],n,s,r);else s=a(s)?!!s.capture:!!s,n=Z(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=z(i=e.g[t],n,s,r))&&(F(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=X(e))&&(t=e.g[t.toString()],e=-1,t&&(e=z(t,n,s,r)),(n=-1<e?t[e]:null)&&G(n))}function G(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,s=e.proxy;t.removeEventListener?t.removeEventListener(n,s,e.capture):t.detachEvent?t.detachEvent(Q(n),s):t.addListener&&t.removeListener&&t.removeListener(s),(n=X(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):F(e)}}}function Q(e){return e in $?$[e]:$[e]="on"+e}function Y(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,s=e.ha||e.src;e.fa&&G(e),e=n.call(s,t)}return e}function X(e){return(e=e[H])instanceof V?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){I.call(this),this.i=new V(this),this.M=this,this.F=null}function te(e,t){var n,s=e.F;if(s)for(n=[];s;s=s.F)n.push(s);if(e=e.M,s=t.type||t,"string"==typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var r=t;w(t=new P(s,e),r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];r=ne(a,s,!0,t)&&r}if(r=ne(a=t.g=e,s,!0,t)&&r,r=ne(a,s,!1,t)&&r,n)for(i=0;i<n.length;i++)r=ne(a=t.g=n[i],s,!1,t)&&r}function ne(e,t,n,s){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),r=!1!==o.call(l,s)&&r}}return r&&!s.defaultPrevented}function se(e,t,n){if("function"==typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:r.setTimeout(e,t||0)}function re(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,re(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ee,I),ee.prototype[M]=!0,ee.prototype.removeEventListener=function(e,t,n,s){W(this,e,t,n,s)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)F(n[s]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,s){return this.i.add(String(e),t,!1,n,s)},ee.prototype.L=function(e,t,n,s){return this.i.add(String(e),t,!0,n,s)};class ie extends I{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(e){I.call(this),this.h=e,this.g={}}h(ae,I);var oe=[];function le(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&G(e)},e),e.g={}}ae.prototype.N=function(){ae.aa.N.call(this),le(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=r.JSON.stringify,ue=r.JSON.parse,he=class{stringify(e){return r.JSON.stringify(e,void 0)}parse(e){return r.JSON.parse(e,void 0)}};function de(){}function fe(e){return e.h||(e.h=e.i())}function pe(){}de.prototype.h=null;var me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){P.call(this,"d")}function ye(){P.call(this,"c")}h(ge,P),h(ye,P);var ve={},be=null;function xe(){return be=be||new ee}function we(e){P.call(this,ve.La,e)}function Ne(e){const t=xe();te(t,new we(t))}function _e(e,t){P.call(this,ve.STAT_EVENT,e),this.stat=t}function je(e){const t=xe();te(t,new _e(t,e))}function Ee(e,t){P.call(this,ve.Ma,e),this.size=t}function ke(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return r.setTimeout(function(){e()},t)}function Te(){this.g=!0}function Se(e,t,n,s){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var s=n[e];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<r.length;a++)r[a]=""}}}return ce(n)}catch(o){return t}}(e,n)+(s?" "+s:"")})}ve.La="serverreachability",h(we,P),ve.STAT_EVENT="statevent",h(_e,P),ve.Ma="timingevent",h(Ee,P),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var Oe,Ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ie(){}function Pe(e,t,n,s){this.j=e,this.i=t,this.l=n,this.R=s||1,this.U=new ae(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}h(Ie,de),Ie.prototype.g=function(){return new XMLHttpRequest},Ie.prototype.i=function(){return{}},Oe=new Ie;var Le={},De={};function Me(e,t,n){e.L=1,e.v=ct(rt(t)),e.m=n,e.P=!0,qe(e,null)}function qe(e,t){e.F=Date.now(),Ve(e),e.A=rt(e.v);var n=e.A,s=e.R;Array.isArray(s)||(s=[String(s)]),Nt(n.i,"t",s),e.C=0,n=e.j.J,e.h=new Re,e.g=un(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ie(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,s=e.ca;var r="readystatechange";Array.isArray(r)||(r&&(oe[0]=r.toString()),r=oe);for(var i=0;i<r.length;i++){var a=K(n,r[i],s||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ne(),function(e,t,n,s,r,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Fe(e,t){var n=e.C,s=t.indexOf("\n",n);return-1==s?De:(n=Number(t.substring(n,s)),isNaN(n)?Le:(s+=1)+n>t.length?De:(t=t.slice(s,s+n),e.C=s+n,t))}function Ve(e){e.S=Date.now()+e.I,Be(e,e.I)}function Be(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ke(c(e.ba,e),t)}function ze(e){e.B&&(r.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||rn(e.j,e)}function $e(e){ze(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Xe(n.h,e)))if(!e.K&&Xe(n.h,e)&&3==n.G){try{var s=n.Da.g.parse(t)}catch(u){s=null}if(Array.isArray(s)&&3==s.length){var r=s;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Wt(n)}en(n),je(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=ke(c(n.Za,n),6e3));if(1>=Ye(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else on(n,11)}else if((e.K||n.g==e)&&sn(n),!p(t))for(r=n.Da.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const r=c[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(s=1.5*u,n.L=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=s.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Je(i,i.h),i.h=null))}if(s.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(s.ya=e,lt(s.I,s.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((s=n).qa=cn(s,s.J?s.ia:null,s.W),a.K){Ze(s.h,a);var o=a,l=s.L;l&&(o.I=l),o.B&&(ze(o),Ve(o)),s.g=a}else Zt(s);0<n.i.length&&Qt(n)}else"stop"!=c[0]&&"close"!=c[0]||on(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?on(n,7):Kt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ne()}catch(u){}}Pe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Bt(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const d=Bt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||zt(this.g)))){this.J||4!=d||7==t||Ne(),ze(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var s=zt(this.g);e="";var i=s.length,a=4==Bt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){$e(this),He(this);var o="";break t}this.h.i=new r.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(s[t],{stream:!(a&&t==i-1)});s.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,s,r,i,a){e.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,je(12),$e(this),He(this);break e}Se(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Fe(this,o),e==De){4==d&&(this.s=4,je(14),n=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,je(15),Se(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Se(this.i,this.l,e,null),Ke(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,je(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),tn(h),h.M=!0,je(11))}}else Se(this.i,this.l,o,"[Invalid Chunked Response]"),$e(this),He(this)}else Se(this.i,this.l,o,null),Ke(this,o);4==d&&$e(this),this.o&&!this.J&&(4==d?rn(this.j,this):(this.o=!1,Ve(this)))}else(function(e){const t={};e=(e.g&&2<=Bt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<e.length;s++){if(p(e[s]))continue;var n=N(e[s]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const i=t[r]||[];t[r]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,je(12)):(this.s=0,je(13)),$e(this),He(this)}}}catch(d){}},Pe.prototype.cancel=function(){this.J=!0,$e(this)},Pe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ne(),je(17)),$e(this),this.s=2,He(this)):Be(this,this.S-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function Ge(e){this.l=e||10,r.PerformanceNavigationTiming?e=0<(e=r.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ye(e){return e.h?1:e.g?e.g.size:0}function Xe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(i(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const s in e)t[n++]=s;return t}}}(e),s=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,s=0;s<n;s++)t.push(e[s]);return t}for(s in t=[],n=0,e)t[n++]=e[s];return t}(e),r=s.length,a=0;a<r;a++)t.call(void 0,s[a],n&&n[a],e)}Ge.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,it(this,e.j),this.o=e.o,this.g=e.g,at(this,e.s),this.l=e.l;var t=e.i,n=new vt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ot(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,it(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),at(this,t[4]),this.l=ut(t[5]||"",!0),ot(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.h=!1,this.i=new vt(null,this.h))}function rt(e){return new st(e)}function it(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function at(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ot(e,t,n){t instanceof vt?(e.i=t,function(e,t){t&&!e.j&&(bt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(xt(this,t),Nt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ht(t,gt)),e.i=new vt(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function ct(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,dt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,ft,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,ft,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?mt:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,yt)),e.join("")};var ft=/[#\/\?@]/g,pt=/[#\?:]/g,mt=/[#\?]/g,gt=/[#\?@]/g,yt=/#/g;function vt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var s=e[n].indexOf("="),r=null;if(0<=s){var i=e[n].substring(0,s);r=e[n].substring(s+1)}else i=e[n];t(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function xt(e,t){bt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function wt(e,t){return bt(e),t=_t(e,t),e.g.has(t)}function Nt(e,t,n){xt(e,t),0<n.length&&(e.i=null,e.g.set(_t(e,t),d(n)),e.h+=n.length)}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function jt(e,t,n,s,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),s(n)}catch(i){}}function Et(){this.g=new he}function kt(e,t,n){const s=n||"";try{tt(e,function(e,n){let r=e;a(e)&&(r=ce(e)),t.push(s+n+"="+encodeURIComponent(r))})}catch(r){throw t.push(s+"type="+encodeURIComponent("_badmap")),r}}function Tt(e){this.l=e.Ub||null,this.j=e.eb||!1}function St(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ot(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ct(e){e.readyState=4,e.l=null,e.j=null,e.v=null,At(e)}function At(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Pt(e,t,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=It(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lt(e,t,n))}function Rt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=vt.prototype).add=function(e,t){bt(this),this.i=null,e=_t(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){bt(this),this.g.forEach(function(n,s){n.forEach(function(n){e.call(t,n,s,this)},this)},this)},e.na=function(){bt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let s=0;s<t.length;s++){const r=e[s];for(let e=0;e<r.length;e++)n.push(t[s])}return n},e.V=function(e){bt(this);let t=[];if("string"==typeof e)wt(this,e)&&(t=t.concat(this.g.get(_t(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return bt(this),this.i=null,wt(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var s=t[n];const i=encodeURIComponent(String(s)),a=this.V(s);for(s=0;s<a.length;s++){var r=i;""!==a[s]&&(r+="="+encodeURIComponent(String(a[s]))),e.push(r)}}return this.i=e.join("&")},h(Tt,de),Tt.prototype.g=function(){return new St(this.l,this.j)},Tt.prototype.i=function(e){return function(){return e}}({}),h(St,ee),(e=St.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,At(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||r).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ct(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,At(this)),this.g&&(this.readyState=3,At(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==r.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ot(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ct(this):At(this),3==this.readyState&&Ot(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ct(this))},e.Qa=function(e){this.g&&(this.response=e,Ct(this))},e.ga=function(){this.g&&Ct(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(St.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Rt,ee);var Lt=/^https?$/i,Dt=["POST","PUT"];function Mt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,qt(e),Ft(e)}function qt(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Ut(e){if(e.h&&void 0!==s&&(!e.v[1]||4!=Bt(e)||2!=e.Z()))if(e.u&&4==Bt(e))se(e.Ea,0,e);else if(te(e,"readystatechange"),4==Bt(e)){e.h=!1;try{const s=e.Z();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===s){var a=String(e.D).match(nt)[1]||null;!a&&r.self&&r.self.location&&(a=r.self.location.protocol.slice(0,-1)),i=!Lt.test(a?a.toLowerCase():"")}n=i}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var o=2<Bt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",qt(e)}}finally{Ft(e)}}}function Ft(e,t){if(e.g){Vt(e);const s=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{s.onreadystatechange=r}catch(n){}}}function Vt(e){e.I&&(r.clearTimeout(e.I),e.I=null)}function Bt(e){return e.g?e.g.readyState:0}function zt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ht(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function $t(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ht("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ht("baseRetryDelayMs",5e3,e),this.cb=Ht("retryDelaySeedMs",1e4,e),this.Wa=Ht("forwardChannelMaxRetries",2,e),this.wa=Ht("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ge(e&&e.concurrentRequestLimit),this.Da=new Et,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if(Gt(e),3==e.G){var t=e.U++,n=rt(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),Xt(e,n),(t=new Pe(e,e.j,t)).L=2,t.v=ct(rt(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(t.v.toString(),"")}catch(s){}!n&&r.Image&&((new Image).src=t.v,n=!0),n||(t.g=un(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ve(t)}ln(e)}function Wt(e){e.g&&(tn(e),e.g.cancel(),e.g=null)}function Gt(e){Wt(e),e.u&&(r.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&r.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||C(),S||(T(),S=!0),O.add(t,e),e.B=0}}function Yt(e,t){var n;n=t?t.l:e.U++;const s=rt(e.I);lt(s,"SID",e.K),lt(s,"RID",n),lt(s,"AID",e.T),Xt(e,s),e.m&&e.o&&Pt(s,e.m,e.o),n=new Pe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Jt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Je(e.h,n),Me(n,s,t)}function Xt(e,t){e.H&&v(e.H,function(e,n){lt(t,n,e)}),e.l&&tt({},function(e,n){lt(t,n,e)})}function Jt(e,t,n){n=Math.min(e.i.length,n);var s=e.l?c(e.l.Na,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=r[o].g;const l=r[o].map;if(n-=t,0>n)t=Math.max(0,r[o].g-100),a=!1;else try{kt(l,e,"req"+n+"_")}catch(i){s&&s(l)}}if(a){s=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,s}function Zt(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||C(),S||(T(),S=!0),O.add(t,e),e.v=0}}function en(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=ke(c(e.Fa,e),an(e,e.v)),e.v++,!0)}function tn(e){null!=e.A&&(r.clearTimeout(e.A),e.A=null)}function nn(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=rt(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Xt(e,t),e.m&&e.o&&Pt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ct(rt(t)),n.m=null,n.P=!0,qe(n,e)}function sn(e){null!=e.C&&(r.clearTimeout(e.C),e.C=null)}function rn(e,t){var n=null;if(e.g==t){sn(e),tn(e),e.g=null;var s=2}else{if(!Xe(e.h,t))return;n=t.D,Ze(e.h,t),s=1}if(0!=e.G)if(t.o)if(1==s){n=t.m?t.m.length:0,t=Date.now()-t.F;var r=e.B;te(s=xe(),new Ee(s,n)),Qt(e)}else Zt(e);else if(3==(r=t.s)||0==r&&0<t.X||!(1==s&&function(e,t){return!(Ye(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=ke(c(e.Ga,e,t),an(e,e.B)),e.B++,0)))}(e,t)||2==s&&en(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:on(e,5);break;case 4:on(e,10);break;case 3:on(e,6);break;default:on(e,2)}}function an(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function on(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),s=e.Xa;const t=!s;s=new st(s||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||it(s,"https"),ct(s),t?function(e,t){const n=new Te;if(r.Image){const s=new Image;s.onload=u(jt,n,"TestLoadImage: loaded",!0,t,s),s.onerror=u(jt,n,"TestLoadImage: error",!1,t,s),s.onabort=u(jt,n,"TestLoadImage: abort",!1,t,s),s.ontimeout=u(jt,n,"TestLoadImage: timeout",!1,t,s),r.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=e}else t(!1)}(s.toString(),n):function(e,t){new Te;const n=new AbortController,s=setTimeout(()=>{n.abort(),jt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(s),e.ok?jt(0,0,!0,t):jt(0,0,!1,t)}).catch(()=>{clearTimeout(s),jt(0,0,!1,t)})}(s.toString(),n)}else je(2);e.G=0,e.l&&e.l.sa(t),ln(e),Gt(e)}function ln(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function cn(e,t,n){var s=n instanceof st?rt(n):new st(n);if(""!=s.g)t&&(s.g=t+"."+s.g),at(s,s.s);else{var i=r.location;s=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new st(null);s&&it(a,s),t&&(a.g=t),i&&at(a,i),n&&(a.l=n),s=a}return n=e.D,t=e.ya,n&&t&&lt(s,n,t),lt(s,"VER",e.la),Xt(e,s),s}function un(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Rt(new Tt({eb:n})):new Rt(e.pa)).Ha(e.J),t}function hn(){}function dn(){}function fn(e,t){ee.call(this),this.g=new $t(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new gn(this)}function pn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function mn(){ye.call(this),this.status=1}function gn(e){this.g=e}(e=Rt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oe.g(),this.v=this.o?fe(this.o):fe(Oe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Mt(this,a)}if(e=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var i in s)n.set(i,s[i]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const e of s.keys())n.set(e,s.get(e))}s=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=r.FormData&&e instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Dt,t,void 0))||s||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Mt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),Ft(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ft(this,!0)),Rt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ut(this):this.bb())},e.bb=function(){Ut(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Bt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=$t.prototype).la=8,e.G=1,e.connect=function(e,t,n,s){je(0),this.W=e,this.H=t||{},n&&void 0!==s&&(this.H.OSID=n,this.H.OAID=s),this.F=this.X,this.I=cn(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const r=new Pe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(r.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var s=this.i[n];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(t+=s)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Jt(this,r,t),lt(n=rt(this.I),"RID",e),lt(n,"CVER",22),this.D&&lt(n,"X-HTTP-Session-Id",this.D),Xt(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(It(i)))+"&"+t:this.m&&Pt(n,this.m,i)),Je(this.h,r),this.Ua&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),r.T=!0,Me(r,n,null)):Me(r,n,t),this.G=2}}else 3==this.G&&(e?Yt(this,e):0==this.i.length||Qe(this.h)||Yt(this))},e.Fa=function(){if(this.u=null,nn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=ke(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,je(10),Wt(this),nn(this))},e.Za=function(){null!=this.C&&(this.C=null,Wt(this),en(this),je(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},dn.prototype.g=function(e,t){return new fn(e,t)},h(fn,ee),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Kt(this.g)},fn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ce(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.G&&Qt(t)},fn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,fn.aa.N.call(this)},h(pn,ge),h(mn,ye),h(gn,hn),gn.prototype.ua=function(){te(this.g,"a")},gn.prototype.ta=function(e){te(this.g,new pn(e))},gn.prototype.sa=function(e){te(this.g,new mn)},gn.prototype.ra=function(){te(this.g,"b")},dn.prototype.createWebChannel=dn.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,ji=function(){return new dn},_i=function(){return xe()},Ni=ve,wi={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,xi=Ce,Ae.COMPLETE="complete",bi=Ae,pe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",ee.prototype.listen=ee.prototype.K,vi=pe,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,yi=Rt}).apply(void 0!==Ei?Ei:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const ki="@firebase/firestore",Ti="4.9.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Si.UNAUTHENTICATED=new Si(null),Si.GOOGLE_CREDENTIALS=new Si("google-credentials-uid"),Si.FIRST_PARTY=new Si("first-party-uid"),Si.MOCK_USER=new Si("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Oi="12.0.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new Ge("@firebase/firestore");function Ai(){return Ci.logLevel}function Ii(e,...t){if(Ci.logLevel<=Be.DEBUG){const n=t.map(Li);Ci.debug(`Firestore (${Oi}): ${e}`,...n)}}function Pi(e,...t){if(Ci.logLevel<=Be.ERROR){const n=t.map(Li);Ci.error(`Firestore (${Oi}): ${e}`,...n)}}function Ri(e,...t){if(Ci.logLevel<=Be.WARN){const n=t.map(Li);Ci.warn(`Firestore (${Oi}): ${e}`,...n)}}function Li(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(e,t,n){let s="Unexpected state";"string"==typeof t?s=t:n=t,Mi(e,s,n)}function Mi(e,t,n){let s=`FIRESTORE (${Oi}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{s+=" CONTEXT: "+JSON.stringify(n)}catch(r){s+=" CONTEXT: "+n}throw Pi(s),new Error(s)}function qi(e,t,n,s){let r="Unexpected state";"string"==typeof n?r=n:s=n,e||Mi(t,r,s)}function Ui(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vi extends Te{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Hi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Si.UNAUTHENTICATED))}shutdown(){}}class $i{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ki{constructor(e){this.t=e,this.currentUser=Si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qi(void 0===this.o,42304);let n=this.i;const s=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Bi,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await s(this.currentUser)})},a=e=>{Ii("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Ii("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Bi)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Ii("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(qi("string"==typeof t.accessToken,31837,{l:t}),new zi(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qi(null===e||"string"==typeof e,2055,{h:e}),new Si(e)}}class Wi{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Si.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Gi{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Wi(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yi{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qi(void 0===this.o,3512);const n=e=>{null!=e.error&&Ii("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,Ii("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const s=e=>{Ii("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>s(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?s(e):Ii("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qi(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(qi("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Qi(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Xi(40);for(let s=0;s<n.length;++s)t.length<20&&n[s]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[s]%62))}return t}}function Zi(e,t){return e<t?-1:e>t?1:0}function ea(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const n=e.charAt(s),r=t.charAt(s);if(n!==r)return sa(n)===sa(r)?Zi(n,r):sa(n)?1:-1}return Zi(e.length,t.length)}const ta=55296,na=57343;function sa(e){const t=e.charCodeAt(0);return t>=ta&&t<=na}function ra(e,t,n){return e.length===t.length&&e.every((e,s)=>n(e,t[s]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="__name__";class aa{constructor(e,t,n){void 0===t?t=0:t>e.length&&Di(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Di(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===aa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof aa?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const n=aa.compareSegments(e.get(s),t.get(s));if(0!==n)return n}return Zi(e.length,t.length)}static compareSegments(e,t){const n=aa.isNumericId(e),s=aa.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?aa.extractNumericId(e).compare(aa.extractNumericId(t)):ea(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pi.fromString(e.substring(4,e.length-2))}}class oa extends aa{construct(e,t,n){return new oa(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Vi(Fi.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new oa(t)}static emptyPath(){return new oa([])}}const la=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ca extends aa{construct(e,t,n){return new ca(e,t,n)}static isValidIdentifier(e){return la.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ca.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ia}static keyField(){return new ca([ia])}static fromServerFormat(e){const t=[];let n="",s=0;const r=()=>{if(0===n.length)throw new Vi(Fi.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;s<e.length;){const t=e[s];if("\\"===t){if(s+1===e.length)throw new Vi(Fi.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[s+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Vi(Fi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,s+=2}else"`"===t?(i=!i,s++):"."!==t||i?(n+=t,s++):(r(),s++)}if(r(),i)throw new Vi(Fi.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ca(t)}static emptyPath(){return new ca([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.path=e}static fromPath(e){return new ua(oa.fromString(e))}static fromName(e){return new ua(oa.fromString(e).popFirst(5))}static empty(){return new ua(oa.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===oa.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return oa.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ua(new oa(e.slice()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(e,t,n){if(!n)throw new Vi(Fi.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function da(e){if(!ua.isDocumentKey(e))throw new Vi(Fi.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function fa(e){if(ua.isDocumentKey(e))throw new Vi(Fi.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function pa(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ma(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":Di(12329,{type:typeof e})}function ga(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Vi(Fi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ma(e);throw new Vi(Fi.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(e,t){const n={typeString:e};return t&&(n.value=t),n}function va(e,t){if(!pa(e))throw new Vi(Fi.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const r=t[s].typeString,i="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n=`JSON missing required field: '${s}'`;break}const a=e[s];if(r&&typeof a!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(void 0!==i&&a!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new Vi(Fi.INVALID_ARGUMENT,n);return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=-62135596800,xa=1e6;class wa{static now(){return wa.fromMillis(Date.now())}static fromDate(e){return wa.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*xa);return new wa(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Vi(Fi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Vi(Fi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ba)throw new Vi(Fi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Vi(Fi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xa}_compareTo(e){return this.seconds===e.seconds?Zi(this.nanoseconds,e.nanoseconds):Zi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wa._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(va(e,wa._jsonSchema))return new wa(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ba;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wa._jsonSchemaVersion="firestore/timestamp/1.0",wa._jsonSchema={type:ya("string",wa._jsonSchemaVersion),seconds:ya("number"),nanoseconds:ya("number")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Na{static fromTimestamp(e){return new Na(e)}static min(){return new Na(new wa(0,0))}static max(){return new Na(new wa(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(e){return new ja(e.readTime,e.key,-1)}class ja{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ja(Na.min(),ua.empty(),-1)}static max(){return new ja(Na.max(),ua.empty(),-1)}}function Ea(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ua.comparator(e.documentKey,t.documentKey),0!==n?n:Zi(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class ka{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(e){if(e.code!==Fi.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;Ii("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Di(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Sa((n,s)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,s)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Sa?t:Sa.resolve(t)}catch(t){return Sa.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Sa.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Sa.reject(t)}static resolve(e){return new Sa((t,n)=>{t(e)})}static reject(e){return new Sa((t,n)=>{n(e)})}static waitFor(e){return new Sa((t,n)=>{let s=0,r=0,i=!1;e.forEach(e=>{++s,e.next(()=>{++r,i&&r===s&&t()},e=>n(e))}),i=!0,r===s&&t()})}static or(e){let t=Sa.resolve(!1);for(const n of e)t=t.next(e=>e?Sa.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,s)=>{n.push(t.call(this,e,s))}),this.waitFor(n)}static mapArray(e,t){return new Sa((n,s)=>{const r=e.length,i=new Array(r);let a=0;for(let o=0;o<r;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===r&&n(i)},e=>s(e))}})}static doWhile(e,t){return new Sa((n,s)=>{const r=()=>{!0===e()?t().next(()=>{r()},s):n()};r()})}}function Oa(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ca.ce=-1;function Aa(e){return null==e}function Ia(e){return 0===e&&1/e==-1/0}function Pa(e,t){let n=t;const s=e.length;for(let r=0;r<s;r++){const t=e.charAt(r);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function Ra(e){return e+""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Da(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ma(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,t){this.comparator=e,this.root=t||Fa.EMPTY}insert(e,t){return new qa(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fa.BLACK,null,null))}remove(e){return new qa(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ua(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ua(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ua(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ua(this.root,e,this.comparator,!0)}}class Ua{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fa{constructor(e,t,n,s,r){this.key=e,this.value=t,this.color=null!=n?n:Fa.RED,this.left=null!=s?s:Fa.EMPTY,this.right=null!=r?r:Fa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,r){return new Fa(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const r=n(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,n),null):0===r?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Fa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Fa.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Di(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Di(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Di(27949);return e+(this.isRed()?0:1)}}Fa.EMPTY=null,Fa.RED=!0,Fa.BLACK=!1,Fa.EMPTY=new class{constructor(){this.size=0}get key(){throw Di(57766)}get value(){throw Di(16141)}get color(){throw Di(16727)}get left(){throw Di(29726)}get right(){throw Di(36894)}copy(e,t,n,s,r){return this}insert(e,t,n){return new Fa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Va{constructor(e){this.comparator=e,this.data=new qa(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ba(this.data.getIterator())}getIteratorFrom(e){return new Ba(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Va))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(0!==this.comparator(e,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Va(this.comparator);return t.data=e,t}}class Ba{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.fields=e,e.sort(ca.comparator)}static empty(){return new za([])}unionWith(e){let t=new Va(ca.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new za(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ra(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Ha("Invalid base64 string: "+t):t}}(e);return new $a(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new $a(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$a.EMPTY_BYTE_STRING=new $a("");const Ka=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wa(e){if(qi(!!e,39018),"string"==typeof e){let t=0;const n=Ka.exec(e);if(qi(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Ga(e.seconds),nanos:Ga(e.nanos)}}function Ga(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Qa(e){return"string"==typeof e?$a.fromBase64String(e):$a.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya="server_timestamp",Xa="__type__",Ja="__previous_value__",Za="__local_write_time__";function eo(e){var t,n;return(null==(n=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[Xa])?void 0:n.stringValue)===Ya}function to(e){const t=e.mapValue.fields[Ja];return eo(t)?to(t):t}function no(e){const t=Wa(e.mapValue.fields[Za].timestampValue);return new wa(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,t,n,s,r,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const ro="(default)";class io{constructor(e,t){this.projectId=e,this.database=t||ro}static empty(){return new io("","")}get isDefaultDatabase(){return this.database===ro}isEqual(e){return e instanceof io&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="__type__",oo="__max__",lo={fields:{__type__:{stringValue:oo}}},co="__vector__",uo="value";function ho(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?eo(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===oo}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,n;const s=null==(n=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[ao])?void 0:n.stringValue;return s===co}(e)?10:11:Di(28295,{value:e})}function fo(e,t){if(e===t)return!0;const n=ho(e);if(n!==ho(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return no(e).isEqual(no(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Wa(e.timestampValue),s=Wa(t.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return s=t,Qa(e.bytesValue).isEqual(Qa(s.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ga(e.geoPointValue.latitude)===Ga(t.geoPointValue.latitude)&&Ga(e.geoPointValue.longitude)===Ga(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ga(e.integerValue)===Ga(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ga(e.doubleValue),s=Ga(t.doubleValue);return n===s?Ia(n)===Ia(s):isNaN(n)&&isNaN(s)}return!1}(e,t);case 9:return ra(e.arrayValue.values||[],t.arrayValue.values||[],fo);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},s=t.mapValue.fields||{};if(La(n)!==La(s))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===s[r]||!fo(n[r],s[r])))return!1;return!0}(e,t);default:return Di(52216,{left:e})}var s}function po(e,t){return void 0!==(e.values||[]).find(e=>fo(e,t))}function mo(e,t){if(e===t)return 0;const n=ho(e),s=ho(t);if(n!==s)return Zi(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Zi(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ga(e.integerValue||e.doubleValue),s=Ga(t.integerValue||t.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(e,t);case 3:return go(e.timestampValue,t.timestampValue);case 4:return go(no(e),no(t));case 5:return ea(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Qa(e),s=Qa(t);return n.compareTo(s)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),s=t.split("/");for(let r=0;r<n.length&&r<s.length;r++){const e=Zi(n[r],s[r]);if(0!==e)return e}return Zi(n.length,s.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Zi(Ga(e.latitude),Ga(t.latitude));return 0!==n?n:Zi(Ga(e.longitude),Ga(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return yo(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,s,r,i;const a=e.fields||{},o=t.fields||{},l=null==(n=a[uo])?void 0:n.arrayValue,c=null==(s=o[uo])?void 0:s.arrayValue,u=Zi((null==(r=null==l?void 0:l.values)?void 0:r.length)||0,(null==(i=null==c?void 0:c.values)?void 0:i.length)||0);return 0!==u?u:yo(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===lo&&t===lo)return 0;if(e===lo)return 1;if(t===lo)return-1;const n=e.fields||{},s=Object.keys(n),r=t.fields||{},i=Object.keys(r);s.sort(),i.sort();for(let a=0;a<s.length&&a<i.length;++a){const e=ea(s[a],i[a]);if(0!==e)return e;const t=mo(n[s[a]],r[i[a]]);if(0!==t)return t}return Zi(s.length,i.length)}(e.mapValue,t.mapValue);default:throw Di(23264,{he:n})}}function go(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Zi(e,t);const n=Wa(e),s=Wa(t),r=Zi(n.seconds,s.seconds);return 0!==r?r:Zi(n.nanos,s.nanos)}function yo(e,t){const n=e.values||[],s=t.values||[];for(let r=0;r<n.length&&r<s.length;++r){const e=mo(n[r],s[r]);if(e)return e}return Zi(n.length,s.length)}function vo(e){return bo(e)}function bo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Wa(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Qa(e.bytesValue).toBase64():"referenceValue"in e?function(e){return ua.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const s of e.values||[])n?n=!1:t+=",",t+=bo(s);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",s=!0;for(const r of t)s?s=!1:n+=",",n+=`${r}:${bo(e.fields[r])}`;return n+"}"}(e.mapValue):Di(61005,{value:e})}function xo(e){switch(ho(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=to(e);return t?16+xo(t):16;case 5:return 2*e.stringValue.length;case 6:return Qa(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce((e,t)=>e+xo(t),0);case 10:case 11:return function(e){let t=0;return Da(e.fields,(e,n)=>{t+=e.length+xo(n)}),t}(e.mapValue);default:throw Di(13486,{value:e})}}function wo(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function No(e){return!!e&&"integerValue"in e}function _o(e){return!!e&&"arrayValue"in e}function jo(e){return!!e&&"nullValue"in e}function Eo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ko(e){return!!e&&"mapValue"in e}function To(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Da(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=To(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=To(e.arrayValue.values[n]);return t}return{...e}}class So{constructor(e){this.value=e}static empty(){return new So({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ko(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=To(t)}setAll(e){let t=ca.emptyPath(),n={},s=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,s),n={},s=[],t=r.popLast()}e?n[r.lastSegment()]=To(e):s.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,s)}delete(e){const t=this.field(e.popLast());ko(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];ko(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Da(t,(t,n)=>e[t]=n);for(const s of n)delete e[s]}clone(){return new So(To(this.value))}}function Oo(e){const t=[];return Da(e.fields,(e,n)=>{const s=new ca([e]);if(ko(n)){const e=Oo(n.mapValue).fields;if(0===e.length)t.push(s);else for(const n of e)t.push(s.child(n))}else t.push(s)}),new za(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Co{constructor(e,t,n,s,r,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=r,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Co(e,0,Na.min(),Na.min(),Na.min(),So.empty(),0)}static newFoundDocument(e,t,n,s){return new Co(e,1,t,Na.min(),n,s,0)}static newNoDocument(e,t){return new Co(e,2,t,Na.min(),Na.min(),So.empty(),0)}static newUnknownDocument(e,t){return new Co(e,3,t,Na.min(),Na.min(),So.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Na.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=So.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=So.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Na.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Co&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Co(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,t){this.position=e,this.inclusive=t}}function Io(e,t,n){let s=0;for(let r=0;r<e.position.length;r++){const i=t[r],a=e.position[r];if(s=i.field.isKeyField()?ua.comparator(ua.fromName(a.referenceValue),n.key):mo(a,n.data.field(i.field)),"desc"===i.dir&&(s*=-1),0!==s)break}return s}function Po(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!fo(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t="asc"){this.field=e,this.dir=t}}function Lo(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{}class Mo extends Do{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ho(e,t,n):"array-contains"===t?new Go(e,n):"in"===t?new Qo(e,n):"not-in"===t?new Yo(e,n):"array-contains-any"===t?new Xo(e,n):new Mo(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new $o(e,n):new Ko(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(mo(t,this.value)):null!==t&&ho(this.value)===ho(t)&&this.matchesComparison(mo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Di(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qo extends Do{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new qo(e,t)}matches(e){return Uo(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Uo(e){return"and"===e.op}function Fo(e){return function(e){for(const t of e.filters)if(t instanceof qo)return!1;return!0}(e)&&Uo(e)}function Vo(e){if(e instanceof Mo)return e.field.canonicalString()+e.op.toString()+vo(e.value);if(Fo(e))return e.filters.map(e=>Vo(e)).join(",");{const t=e.filters.map(e=>Vo(e)).join(",");return`${e.op}(${t})`}}function Bo(e,t){return e instanceof Mo?(n=e,(s=t)instanceof Mo&&n.op===s.op&&n.field.isEqual(s.field)&&fo(n.value,s.value)):e instanceof qo?function(e,t){return t instanceof qo&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,s)=>e&&Bo(n,t.filters[s]),!0)}(e,t):void Di(19439);var n,s}function zo(e){return e instanceof Mo?`${(t=e).field.canonicalString()} ${t.op} ${vo(t.value)}`:e instanceof qo?function(e){return e.op.toString()+" {"+e.getFilters().map(zo).join(" ,")+"}"}(e):"Filter";var t}class Ho extends Mo{constructor(e,t,n){super(e,t,n),this.key=ua.fromName(n.referenceValue)}matches(e){const t=ua.comparator(e.key,this.key);return this.matchesComparison(t)}}class $o extends Mo{constructor(e,t){super(e,"in",t),this.keys=Wo("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ko extends Mo{constructor(e,t){super(e,"not-in",t),this.keys=Wo("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Wo(e,t){var n;return((null==(n=t.arrayValue)?void 0:n.values)||[]).map(e=>ua.fromName(e.referenceValue))}class Go extends Mo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _o(t)&&po(t.arrayValue,this.value)}}class Qo extends Mo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&po(this.value.arrayValue,t)}}class Yo extends Mo{constructor(e,t){super(e,"not-in",t)}matches(e){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!po(this.value.arrayValue,t)}}class Xo extends Mo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_o(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>po(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t=null,n=[],s=[],r=null,i=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=r,this.startAt=i,this.endAt=a,this.Te=null}}function Zo(e,t=null,n=[],s=[],r=null,i=null,a=null){return new Jo(e,t,n,s,r,i,a)}function el(e){const t=Ui(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Vo(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),Aa(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>vo(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>vo(e)).join(",")),t.Te=e}return t.Te}function tl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Lo(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Bo(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Po(e.startAt,t.startAt)&&Po(e.endAt,t.endAt)}function nl(e){return ua.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,t=null,n=[],s=[],r=null,i="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=r,this.limitType=i,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rl(e){return new sl(e)}function il(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function al(e){return null!==e.collectionGroup}function ol(e){const t=Ui(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new Va(ca.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Ro(s,n))}),e.has(ca.keyField().canonicalString())||t.Ie.push(new Ro(ca.keyField(),n))}return t.Ie}function ll(e){const t=Ui(e);return t.Ee||(t.Ee=function(e,t){if("F"===e.limitType)return Zo(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ro(e.field,t)});const n=e.endAt?new Ao(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Ao(e.startAt.position,e.startAt.inclusive):null;return Zo(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}(t,ol(e))),t.Ee}function cl(e,t){const n=e.filters.concat([t]);return new sl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ul(e,t,n){return new sl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function hl(e,t){return tl(ll(e),ll(t))&&e.limitType===t.limitType}function dl(e){return`${el(ll(e))}|lt:${e.limitType}`}function fl(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>zo(e)).join(", ")}]`),Aa(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>vo(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>vo(e)).join(",")),`Target(${t})`}(ll(e))}; limitType=${e.limitType})`}function pl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ua.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ol(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(s=t,!((n=e).startAt&&!function(e,t,n){const s=Io(e,t,n);return e.inclusive?s<=0:s<0}(n.startAt,ol(n),s)||n.endAt&&!function(e,t,n){const s=Io(e,t,n);return e.inclusive?s>=0:s>0}(n.endAt,ol(n),s)));var n,s}function ml(e){return(t,n)=>{let s=!1;for(const r of ol(e)){const e=gl(r,t,n);if(0!==e)return e;s=s||r.field.isKeyField()}return 0}}function gl(e,t,n){const s=e.field.isKeyField()?ua.comparator(t.key,n.key):function(e,t,n){const s=t.data.field(e),r=n.data.field(e);return null!==s&&null!==r?mo(s,r):Di(42886)}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return Di(19790,{direction:e.dir})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[s,r]of n)if(this.equalsFn(s,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0===s)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return 1===n.length?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,(t,n)=>{for(const[s,r]of n)e(s,r)})}isEmpty(){return Ma(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=new qa(ua.comparator);function bl(){return vl}const xl=new qa(ua.comparator);function wl(...e){let t=xl;for(const n of e)t=t.insert(n.key,n);return t}function Nl(e){let t=xl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function _l(){return El()}function jl(){return El()}function El(){return new yl(e=>e.toString(),(e,t)=>e.isEqual(t))}const kl=new qa(ua.comparator),Tl=new Va(ua.comparator);function Sl(...e){let t=Tl;for(const n of e)t=t.add(n);return t}const Ol=new Va(Zi);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Cl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ia(t)?"-0":t}}function Al(e){return{integerValue:""+e}}function Il(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Ia(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?Al(t):Cl(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this._=void 0}}function Rl(e,t,n){return e instanceof Ml?function(e,t){const n={fields:{[Xa]:{stringValue:Ya},[Za]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&eo(t)&&(t=to(t)),t&&(n.fields[Ja]=t),{mapValue:n}}(n,t):e instanceof ql?Ul(e,t):e instanceof Fl?Vl(e,t):function(e,t){const n=Dl(e,t),s=zl(n)+zl(e.Ae);return No(n)&&No(e.Ae)?Al(s):Cl(e.serializer,s)}(e,t)}function Ll(e,t,n){return e instanceof ql?Ul(e,t):e instanceof Fl?Vl(e,t):n}function Dl(e,t){return e instanceof Bl?No(n=t)||(s=n)&&"doubleValue"in s?t:{integerValue:0}:null;var n,s}class Ml extends Pl{}class ql extends Pl{constructor(e){super(),this.elements=e}}function Ul(e,t){const n=Hl(t);for(const s of e.elements)n.some(e=>fo(e,s))||n.push(s);return{arrayValue:{values:n}}}class Fl extends Pl{constructor(e){super(),this.elements=e}}function Vl(e,t){let n=Hl(t);for(const s of e.elements)n=n.filter(e=>!fo(e,s));return{arrayValue:{values:n}}}class Bl extends Pl{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function zl(e){return Ga(e.integerValue||e.doubleValue)}function Hl(e){return _o(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class $l{constructor(e,t){this.version=e,this.transformResults=t}}class Kl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kl}static exists(e){return new Kl(void 0,e)}static updateTime(e){return new Kl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Gl{}function Ql(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ic(e.key,Kl.none()):new ec(e.key,e.data,Kl.none());{const n=e.data,s=So.empty();let r=new Va(ca.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?s.delete(e):s.set(e,t),r=r.add(e)}return new tc(e.key,s,new za(r.toArray()),Kl.none())}}function Yl(e,t,n){var s;e instanceof ec?function(e,t,n){const s=e.value.clone(),r=sc(e.fieldTransforms,t,n.transformResults);s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):e instanceof tc?function(e,t,n){if(!Wl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const s=sc(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(nc(e)),r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):(s=n,t.convertToNoDocument(s.version).setHasCommittedMutations())}function Xl(e,t,n,s){return e instanceof ec?function(e,t,n,s){if(!Wl(e.precondition,t))return n;const r=e.value.clone(),i=rc(e.fieldTransforms,s,t);return r.setAll(i),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,s):e instanceof tc?function(e,t,n,s){if(!Wl(e.precondition,t))return n;const r=rc(e.fieldTransforms,s,t),i=t.data;return i.setAll(nc(e)),i.setAll(r),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,s):(r=t,i=n,Wl(e.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):i);var r,i}function Jl(e,t){let n=null;for(const s of e.fieldTransforms){const e=t.data.field(s.field),r=Dl(s.transform,e||null);null!=r&&(null===n&&(n=So.empty()),n.set(s.field,r))}return n||null}function Zl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,s=t.fieldTransforms,!!(void 0===n&&void 0===s||n&&s&&ra(n,s,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,s=t.transform,n instanceof ql&&s instanceof ql||n instanceof Fl&&s instanceof Fl?ra(n.elements,s.elements,fo):n instanceof Bl&&s instanceof Bl?fo(n.Ae,s.Ae):n instanceof Ml&&s instanceof Ml);var n,s}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,s}class ec extends Gl{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class tc extends Gl{constructor(e,t,n,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function nc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function sc(e,t,n){const s=new Map;qi(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const i=e[r],a=i.transform,o=t.data.field(i.field);s.set(i.field,Ll(a,o,n[r]))}return s}function rc(e,t,n){const s=new Map;for(const r of e){const e=r.transform,i=n.data.field(r.field);s.set(r.field,Rl(e,i,t))}return s}class ic extends Gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ac extends Gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const t=this.mutations[s];t.key.isEqual(e.key)&&Yl(t,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Xl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Xl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=jl();return this.mutations.forEach(s=>{const r=e.get(s.key),i=r.overlayedDocument;let a=this.applyToLocalView(i,r.mutatedFields);a=t.has(s.key)?null:a;const o=Ql(i,a);null!==o&&n.set(s.key,o),i.isValidDocument()||i.convertToNoDocument(Na.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Sl())}isEqual(e){return this.batchId===e.batchId&&ra(this.mutations,e.mutations,(e,t)=>Zl(e,t))&&ra(this.baseMutations,e.baseMutations,(e,t)=>Zl(e,t))}}class lc{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){qi(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=function(){return kl}();const r=e.mutations;for(let i=0;i<r.length;i++)s=s.insert(r[i].key,n[i].version);return new lc(e,t,n,s)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hc,dc;function fc(e){if(void 0===e)return Pi("GRPC error has no .code"),Fi.UNKNOWN;switch(e){case hc.OK:return Fi.OK;case hc.CANCELLED:return Fi.CANCELLED;case hc.UNKNOWN:return Fi.UNKNOWN;case hc.DEADLINE_EXCEEDED:return Fi.DEADLINE_EXCEEDED;case hc.RESOURCE_EXHAUSTED:return Fi.RESOURCE_EXHAUSTED;case hc.INTERNAL:return Fi.INTERNAL;case hc.UNAVAILABLE:return Fi.UNAVAILABLE;case hc.UNAUTHENTICATED:return Fi.UNAUTHENTICATED;case hc.INVALID_ARGUMENT:return Fi.INVALID_ARGUMENT;case hc.NOT_FOUND:return Fi.NOT_FOUND;case hc.ALREADY_EXISTS:return Fi.ALREADY_EXISTS;case hc.PERMISSION_DENIED:return Fi.PERMISSION_DENIED;case hc.FAILED_PRECONDITION:return Fi.FAILED_PRECONDITION;case hc.ABORTED:return Fi.ABORTED;case hc.OUT_OF_RANGE:return Fi.OUT_OF_RANGE;case hc.UNIMPLEMENTED:return Fi.UNIMPLEMENTED;case hc.DATA_LOSS:return Fi.DATA_LOSS;default:return Di(39323,{code:e})}}(dc=hc||(hc={}))[dc.OK=0]="OK",dc[dc.CANCELLED=1]="CANCELLED",dc[dc.UNKNOWN=2]="UNKNOWN",dc[dc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dc[dc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dc[dc.NOT_FOUND=5]="NOT_FOUND",dc[dc.ALREADY_EXISTS=6]="ALREADY_EXISTS",dc[dc.PERMISSION_DENIED=7]="PERMISSION_DENIED",dc[dc.UNAUTHENTICATED=16]="UNAUTHENTICATED",dc[dc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dc[dc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dc[dc.ABORTED=10]="ABORTED",dc[dc.OUT_OF_RANGE=11]="OUT_OF_RANGE",dc[dc.UNIMPLEMENTED=12]="UNIMPLEMENTED",dc[dc.INTERNAL=13]="INTERNAL",dc[dc.UNAVAILABLE=14]="UNAVAILABLE",dc[dc.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const pc=new pi([4294967295,4294967295],0);function mc(e){const t=(new TextEncoder).encode(e),n=new mi;return n.update(t),new Uint8Array(n.digest())}function gc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),r=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new pi([n,s],0),new pi([r,i],0)]}class yc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new vc(`Invalid padding: ${t}`);if(n<0)throw new vc(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new vc(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new vc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=pi.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(pi.fromNumber(n)));return 1===s.compare(pc)&&(s=new pi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=mc(e),[n,s]=gc(t);for(let r=0;r<this.hashCount;r++){const e=this.ye(n,s,r);if(!this.we(e))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),i=new yc(r,s,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=mc(e),[n,s]=gc(t);for(let r=0;r<this.hashCount;r++){const e=this.ye(n,s,r);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t,n,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new bc(Na.min(),s,new qa(Zi),bl(),Sl())}}class xc{constructor(e,t,n,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new xc(n,t,Sl(),Sl(),Sl())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class Nc{constructor(e,t){this.targetId=e,this.Ce=t}}class _c{constructor(e,t,n=$a.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class jc{constructor(){this.ve=0,this.Fe=Tc(),this.Me=$a.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Sl(),t=Sl(),n=Sl();return this.Fe.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:Di(38017,{changeType:r})}}),new xc(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Tc()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qi(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Ec{constructor(e){this.Ge=e,this.ze=new Map,this.je=bl(),this.Je=kc(),this.He=kc(),this.Ye=new qa(Zi)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Di(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const r=s.target;if(nl(r))if(0===n){const e=new ua(r.path);this.et(t,e,Co.newNoDocument(e,Na.min()))}else qi(1===n,20013,{expectedCount:n});else{const s=this._t(t);if(s!==n){const n=this.ut(e),r=n?this.ct(n,e,s):1;if(0!==r){this.it(t);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:r=0}=t;let i,a;try{i=Qa(n).toUint8Array()}catch(o){if(o instanceof Ha)return Ri("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new yc(i,s,r)}catch(o){return Ri(o instanceof vc?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach(n=>{const r=this.Ge.ht(),i=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.et(t,n,null),s++)}),s}Tt(e){const t=new Map;this.ze.forEach((n,s)=>{const r=this.ot(s);if(r){if(n.current&&nl(r.target)){const t=new ua(r.target.path);this.It(t).has(s)||this.Et(s,t)||this.et(s,t,Co.newNoDocument(t,e))}n.Be&&(t.set(s,n.ke()),n.qe())}});let n=Sl();this.He.forEach((e,t)=>{let s=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(s=!1,!1)}),s&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const s=new bc(e,t,this.Ye,this.je,n);return this.je=bl(),this.Je=kc(),this.He=kc(),this.Ye=new qa(Zi),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new jc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Va(Zi),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Va(Zi),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Ii("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function kc(){return new qa(ua.comparator)}function Tc(){return new qa(ua.comparator)}const Sc=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Oc=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Cc=(()=>({and:"AND",or:"OR"}))();class Ac{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ic(e,t){return e.useProto3Json||Aa(t)?t:{value:t}}function Pc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Lc(e,t){return Pc(e,t.toTimestamp())}function Dc(e){return qi(!!e,49232),Na.fromTimestamp(function(e){const t=Wa(e);return new wa(t.seconds,t.nanos)}(e))}function Mc(e,t){return qc(e,t).canonicalString()}function qc(e,t){const n=(s=e,new oa(["projects",s.projectId,"databases",s.database])).child("documents");var s;return void 0===t?n:n.child(t)}function Uc(e){const t=oa.fromString(e);return qi(su(t),10190,{key:t.toString()}),t}function Fc(e,t){return Mc(e.databaseId,t.path)}function Vc(e,t){const n=Uc(t);if(n.get(1)!==e.databaseId.projectId)throw new Vi(Fi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Vi(Fi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ua(Hc(n))}function Bc(e,t){return Mc(e.databaseId,t)}function zc(e){return new oa(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Hc(e){return qi(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function $c(e,t,n){return{name:Fc(e,t),fields:n.value.mapValue.fields}}function Kc(e,t){return{documents:[Bc(e,t.path)]}}function Wc(e,t){const n={structuredQuery:{}},s=t.path;let r;null!==t.collectionGroup?(r=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Bc(e,r);const i=function(e){if(0!==e.length)return tu(qo.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>{return{field:Zc((t=e).field),direction:Yc(t.dir)};var t})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Ic(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(l=t.startAt).inclusive,values:l.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:r};var l}function Gc(e){let t=function(e){const t=Uc(e);return 4===t.length?oa.emptyPath():Hc(t)}(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){qi(1===s,65062);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Qc(e);return t instanceof qo&&Fo(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(e=>{return new Ro(eu((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Aa(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ao(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ao(n,t)}(n.endAt)),function(e,t,n,s,r,i,a,o){return new sl(e,t,n,s,r,i,a,o)}(t,r,a,i,o,"F",l,c)}function Qc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=eu(e.unaryFilter.field);return Mo.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=eu(e.unaryFilter.field);return Mo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=eu(e.unaryFilter.field);return Mo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=eu(e.unaryFilter.field);return Mo.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Di(61313);default:return Di(60726)}}(e):void 0!==e.fieldFilter?(t=e,Mo.create(eu(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Di(58110);default:return Di(50506)}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return qo.create(e.compositeFilter.filters.map(e=>Qc(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Di(1026)}}(e.compositeFilter.op))}(e):Di(30097,{filter:e});var t}function Yc(e){return Sc[e]}function Xc(e){return Oc[e]}function Jc(e){return Cc[e]}function Zc(e){return{fieldPath:e.canonicalString()}}function eu(e){return ca.fromServerFormat(e.fieldPath)}function tu(e){return e instanceof Mo?function(e){if("=="===e.op){if(Eo(e.value))return{unaryFilter:{field:Zc(e.field),op:"IS_NAN"}};if(jo(e.value))return{unaryFilter:{field:Zc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Eo(e.value))return{unaryFilter:{field:Zc(e.field),op:"IS_NOT_NAN"}};if(jo(e.value))return{unaryFilter:{field:Zc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zc(e.field),op:Xc(e.op),value:e.value}}}(e):e instanceof qo?function(e){const t=e.getFilters().map(e=>tu(e));return 1===t.length?t[0]:{compositeFilter:{op:Jc(e.op),filters:t}}}(e):Di(54877,{filter:e})}function nu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function su(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,t,n,s,r=Na.min(),i=Na.min(),a=$a.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new ru(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ru(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e){this.yt=e}}function au(e){const t=Gc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ul(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(){this.Cn=new lu}addToCollectionParentIndex(e,t){return this.Cn.add(t),Sa.resolve()}getCollectionParents(e,t){return Sa.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Sa.resolve()}deleteFieldIndex(e,t){return Sa.resolve()}deleteAllFieldIndexes(e){return Sa.resolve()}createTargetIndexes(e,t){return Sa.resolve()}getDocumentsMatchingTarget(e,t){return Sa.resolve(null)}getIndexType(e,t){return Sa.resolve(0)}getFieldIndexes(e,t){return Sa.resolve([])}getNextCollectionGroupToUpdate(e){return Sa.resolve(null)}getMinOffset(e,t){return Sa.resolve(ja.min())}getMinOffsetFromCollectionGroup(e,t){return Sa.resolve(ja.min())}updateCollectionGroup(e,t,n){return Sa.resolve()}updateIndexEntries(e,t){return Sa.resolve()}}class lu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new Va(oa.comparator),r=!s.has(n);return this.index[t]=s.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Va(oa.comparator)).toArray()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uu=41943040;class hu{static withCacheSize(e){return new hu(e,hu.DEFAULT_COLLECTION_PERCENTILE,hu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hu.DEFAULT_COLLECTION_PERCENTILE=10,hu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hu.DEFAULT=new hu(uu,hu.DEFAULT_COLLECTION_PERCENTILE,hu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hu.DISABLED=new hu(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class du{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new du(0)}static cr(){return new du(-1)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu="LruGarbageCollector";function pu([e,t],[n,s]){const r=Zi(e,n);return 0===r?Zi(t,s):r}class mu{constructor(e){this.Ir=e,this.buffer=new Va(pu),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();pu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Ii(fu,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Oa(e)?Ii(fu,"Ignoring IndexedDB error during garbage collection: ",e):await Ta(e)}await this.Vr(3e5)})}}class yu{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Sa.resolve(Ca.ce);const n=new mu(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ii("LruGarbageCollector","Garbage collection skipped; disabled"),Sa.resolve(cu)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ii("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cu):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,r,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Ii("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),s=this.params.maximumSequenceNumbersToCollect):s=t,i=Date.now(),this.nthSequenceNumber(e,s))).next(s=>(n=s,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(r=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Ai()<=Be.DEBUG&&Ii("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-c}ms\n\tDetermined least recently used ${s} in `+(a-i)+`ms\n\tRemoved ${r} targets in `+(o-a)+`ms\n\tRemoved ${e} documents in `+(l-o)+`ms\nTotal Duration: ${l-c}ms`),Sa.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:e})))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class vu{constructor(){this.changes=new yl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Co.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Sa.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Xl(n.mutation,e,za.empty(),wa.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Sl()).next(()=>t))}getLocalViewOfDocuments(e,t,n=Sl()){const s=_l();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,n).next(e=>{let t=wl();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=_l();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Sl()))}populateOverlays(e,t,n){const s=[];return n.forEach(e=>{t.has(e)||s.push(e)}),this.documentOverlayCache.getOverlays(e,s).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,s){let r=bl();const i=El(),a=El();return t.forEach((e,t)=>{const a=n.get(t.key);s.has(t.key)&&(void 0===a||a.mutation instanceof tc)?r=r.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Xl(a.mutation,t,a.mutation.getFieldMask(),wa.now())):i.set(t.key,za.empty())}),this.recalculateAndSaveOverlays(e,r).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>a.set(e,new bu(t,i.get(e)??null))),a))}recalculateAndSaveOverlays(e,t){const n=El();let s=new qa((e,t)=>e-t),r=Sl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const r of e)r.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||za.empty();a=r.applyToLocalView(i,a),n.set(e,a);const o=(s.get(r.batchId)||Sl()).add(e);s=s.insert(r.batchId,o)})}).next(()=>{const i=[],a=s.getReverseIterator();for(;a.hasNext();){const s=a.getNext(),o=s.key,l=s.value,c=jl();l.forEach(e=>{if(!r.has(e)){const s=Ql(t.get(e),n.get(e));null!==s&&c.set(e,s),r=r.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Sa.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,s){return r=t,ua.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):al(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s);var r}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next(r=>{const i=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-r.size):Sa.resolve(_l());let a=-1,o=r;return i.next(t=>Sa.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),r.get(t)?Sa.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,r)).next(()=>this.computeViews(e,o,t,Sl())).next(e=>({batchId:a,changes:Nl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ua(t)).next(e=>{let t=wl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const r=t.collectionGroup;let i=wl();return this.indexManager.getCollectionParents(e,r).next(a=>Sa.forEach(a,a=>{const o=(l=t,c=a.child(r),new sl(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,o,n,s).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,s))).next(e=>{r.forEach((t,n)=>{const s=n.getKey();null===e.get(s)&&(e=e.insert(s,Co.newInvalidDocument(s)))});let n=wl();return e.forEach((e,s)=>{const i=r.get(e);void 0!==i&&Xl(i.mutation,s,za.empty(),wa.now()),pl(t,s)&&(n=n.insert(e,s))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Sa.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,{id:(n=t).id,version:n.version,createTime:Dc(n.createTime)}),Sa.resolve();var n}getNamedQuery(e,t){return Sa.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,{name:(n=t).name,query:au(n.bundledQuery),readTime:Dc(n.readTime)}),Sa.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(){this.overlays=new qa(ua.comparator),this.qr=new Map}getOverlay(e,t){return Sa.resolve(this.overlays.get(t))}getOverlays(e,t){const n=_l();return Sa.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,s)=>{this.St(e,t,s)}),Sa.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return void 0!==s&&(s.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Sa.resolve()}getOverlaysForCollection(e,t,n){const s=_l(),r=t.length+1,i=new ua(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===r&&e.largestBatchId>n&&s.set(e.getKey(),e)}return Sa.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let r=new qa((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=_l(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=_l(),o=r.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=s)););return Sa.resolve(a)}St(e,t,n){const s=this.overlays.get(n.key);if(null!==s){const e=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new cc(t,n));let r=this.qr.get(t);void 0===r&&(r=Sl(),this.qr.set(t,r)),this.qr.set(t,r.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(){this.sessionToken=$a.EMPTY_BYTE_STRING}getSessionToken(e){return Sa.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Sa.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this.Qr=new Va(Eu.$r),this.Ur=new Va(Eu.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Eu(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Eu(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ua(new oa([])),n=new Eu(t,e),s=new Eu(t,e+1),r=[];return this.Ur.forEachInRange([n,s],e=>{this.Gr(e),r.push(e.key)}),r}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ua(new oa([])),n=new Eu(t,e),s=new Eu(t,e+1);let r=Sl();return this.Ur.forEachInRange([n,s],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new Eu(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Eu{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ua.comparator(e.key,t.key)||Zi(e.Yr,t.Yr)}static Kr(e,t){return Zi(e.Yr,t.Yr)||ua.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Va(Eu.$r)}checkEmpty(e){return Sa.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new oc(r,t,n,s);this.mutationQueue.push(i);for(const a of s)this.Zr=this.Zr.add(new Eu(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Sa.resolve(i)}lookupMutationBatch(e,t){return Sa.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),r=s<0?0:s;return Sa.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Sa.resolve(0===this.mutationQueue.length?-1:this.tr-1)}getAllMutationBatches(e){return Sa.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Eu(t,0),s=new Eu(t,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([n,s],e=>{const t=this.Xr(e.Yr);r.push(t)}),Sa.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Va(Zi);return t.forEach(e=>{const t=new Eu(e,0),s=new Eu(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,s],e=>{n=n.add(e.Yr)})}),Sa.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let r=n;ua.isDocumentKey(r)||(r=r.child(""));const i=new Eu(new ua(r),0);let a=new Va(Zi);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===s&&(a=a.add(e.Yr)),!0)},i),Sa.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){qi(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Sa.forEach(t.mutations,s=>{const r=new Eu(s.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Eu(t,0),s=this.Zr.firstAfterOrEqual(n);return Sa.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Sa.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e){this.ri=e,this.docs=new qa(ua.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),r=s?s.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Sa.resolve(n?n.document.mutableCopy():Co.newInvalidDocument(t))}getEntries(e,t){let n=bl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Co.newInvalidDocument(e))}),Sa.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let r=bl();const i=t.path,a=new ua(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Ea(_a(a),n)<=0||(s.has(a.key)||pl(t,a))&&(r=r.insert(a.key,a.mutableCopy()))}return Sa.resolve(r)}getAllFromCollectionGroup(e,t,n,s){Di(9500)}ii(e,t){return Sa.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Su(this)}getSize(e){return Sa.resolve(this.size)}}class Su extends vu{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)}),Sa.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this.persistence=e,this.si=new yl(e=>el(e),tl),this.lastRemoteSnapshotVersion=Na.min(),this.highestTargetId=0,this.oi=0,this._i=new ju,this.targetCount=0,this.ai=du.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Sa.resolve()}getLastRemoteSnapshotVersion(e){return Sa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Sa.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Sa.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Sa.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new du(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Sa.resolve()}updateTargetData(e,t){return this.Pr(t),Sa.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Sa.resolve()}removeTargets(e,t,n){let s=0;const r=[];return this.si.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(i),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),Sa.waitFor(r).next(()=>s)}getTargetCount(e){return Sa.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Sa.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Sa.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(t=>{r.push(s.markPotentiallyOrphaned(e,t))}),Sa.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Sa.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Sa.resolve(n)}containsKey(e,t){return Sa.resolve(this._i.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ca(0),this.li=!1,this.li=!0,this.hi=new _u,this.referenceDelegate=e(this),this.Pi=new Ou(this),this.indexManager=new ou,this.remoteDocumentCache=new Tu(e=>this.referenceDelegate.Ti(e)),this.serializer=new iu(t),this.Ii=new wu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Nu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new ku(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Ii("MemoryPersistence","Starting transaction:",e);const s=new Au(this.ci.next());return this.referenceDelegate.Ei(),n(s).next(e=>this.referenceDelegate.di(s).next(()=>e)).toPromise().then(e=>(s.raiseOnCommittedEvent(),e))}Ai(e,t){return Sa.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Au extends ka{constructor(e){super(),this.currentSequenceNumber=e}}class Iu{constructor(e){this.persistence=e,this.Ri=new ju,this.Vi=null}static mi(e){return new Iu(e)}get fi(){if(this.Vi)return this.Vi;throw Di(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Sa.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Sa.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Sa.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Sa.forEach(this.fi,n=>{const s=ua.fromPath(n);return this.gi(e,s).next(e=>{e||t.removeEntry(s,Na.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Sa.or([()=>Sa.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Pu{constructor(e,t){this.persistence=e,this.pi=new yl(e=>function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ra(t)),t=Pa(e.get(n),t);return Ra(t)}(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=function(e,t){return new yu(e,t)}(this,t)}static mi(e,t){return new Pu(e,t)}Ei(){}di(e){return Sa.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Sa.forEach(this.pi,(n,s)=>this.br(e,n,s).next(e=>e?Sa.resolve():t(s)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,s=>this.br(e,s,t).next(e=>{e||(n++,r.removeEntry(s,Na.min()))})).next(()=>r.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Sa.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Sa.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Sa.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Sa.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xo(e.data.value)),t}br(e,t,n){return Sa.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Sa.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=Sl(),s=Sl();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Ru(e,t.fromCache,n,s)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=ke()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Ee())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const r={result:null};return this.ys(e,t).next(e=>{r.result=e}).next(()=>{if(!r.result)return this.ws(e,t,s,n).next(e=>{r.result=e})}).next(()=>{if(r.result)return;const n=new Lu;return this.Ss(e,t,n).next(s=>{if(r.result=s,this.Vs)return this.bs(e,t,n,s.size)})}).next(()=>r.result)}bs(e,t,n,s){return n.documentReadCount<this.fs?(Ai()<=Be.DEBUG&&Ii("QueryEngine","SDK will not create cache indexes for query:",fl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Sa.resolve()):(Ai()<=Be.DEBUG&&Ii("QueryEngine","Query:",fl(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(Ai()<=Be.DEBUG&&Ii("QueryEngine","The SDK decides to create cache indexes for query:",fl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ll(t))):Sa.resolve())}ys(e,t){if(il(t))return Sa.resolve(null);let n=ll(t);return this.indexManager.getIndexType(e,n).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=ul(t,null,"F"),n=ll(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const r=Sl(...s);return this.ps.getDocuments(e,r).next(s=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,s);return this.Cs(t,i,r,n.readTime)?this.ys(e,ul(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,s){return il(t)||s.isEqual(Na.min())?Sa.resolve(null):this.ps.getDocuments(e,n).next(r=>{const i=this.Ds(t,r);return this.Cs(t,i,n,s)?Sa.resolve(null):(Ai()<=Be.DEBUG&&Ii("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fl(t)),this.vs(e,i,t,function(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,r=Na.fromTimestamp(1e9===s?new wa(n+1,0):new wa(n,s));return new ja(r,ua.empty(),t)}(s,-1)).next(e=>e))})}Ds(e,t){let n=new Va(ml(e));return t.forEach((t,s)=>{pl(e,s)&&(n=n.add(s))}),n}Cs(e,t,n,s){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,t,n){return Ai()<=Be.DEBUG&&Ii("QueryEngine","Using full collection scan to execute query:",fl(t)),this.ps.getDocumentsMatchingQuery(e,t,ja.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu="LocalStore";class qu{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new qa(Zi),this.xs=new yl(e=>el(e),tl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xu(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}async function Uu(e,t){const n=Ui(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.mutationQueue.getAllMutationBatches(e).next(r=>(s=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const r=[],i=[];let a=Sl();for(const e of s){r.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:r,addedBatchIds:i}))})})}function Fu(e){const t=Ui(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Vu(e,t){const n=Ui(e),s=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];t.targetChanges.forEach((i,o)=>{const l=r.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken($a.EMPTY_BYTE_STRING,Na.min()).withLastLimboFreeSnapshotVersion(Na.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,s)),r=r.insert(o,c),function(e,t,n){if(0===e.resumeToken.approximateByteSize())return!0;if(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8)return!0;return n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Pi.updateTargetData(e,c))});let o=bl(),l=Sl();if(t.documentUpdates.forEach(s=>{t.resolvedLimboDocuments.has(s)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,s))}),a.push(function(e,t,n){let s=Sl(),r=Sl();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=bl();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(r=r.add(n)),i.isNoDocument()&&i.version.isEqual(Na.min())?(t.removeEntry(n,i.readTime),s=s.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),s=s.insert(n,i)):Ii(Mu,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{ks:s,qs:r}})}(e,i,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!s.isEqual(Na.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,s));a.push(t)}return Sa.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=r,e))}function Bu(e,t){const n=Ui(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function zu(e,t,n){const s=Ui(e),r=s.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,e=>s.persistence.referenceDelegate.removeTarget(e,r))}catch(a){if(!Oa(a))throw a;Ii(Mu,`Failed to update sequence numbers for target ${t}: ${a}`)}s.Ms=s.Ms.remove(t),s.xs.delete(r.target)}function Hu(e,t,n){const s=Ui(e);let r=Na.min(),i=Sl();return s.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const s=Ui(e),r=s.xs.get(n);return void 0!==r?Sa.resolve(s.Ms.get(r)):s.Pi.getTargetData(t,n)}(s,e,ll(t)).next(t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>s.Fs.getDocumentsMatchingQuery(e,t,n?r:Na.min(),n?i:Sl())).next(e=>(function(e,t,n){let s=e.Os.get(t)||Na.min();n.forEach((e,t)=>{t.readTime.compareTo(s)>0&&(s=t.readTime)}),e.Os.set(t,s)}(s,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,Qs:i})))}class $u{constructor(){this.activeTargetIds=Ol}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ku{constructor(){this.Mo=new $u,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $u,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{Oo(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu="ConnectivityMonitor";class Qu{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ii(Gu,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ii(Gu,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu=null;function Xu(){return null===Yu?Yu=268435456+Math.round(2147483648*Math.random()):Yu++,"0x"+Yu.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Ju="RestConnection",Zu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eh{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===ro?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,t,n,s,r){const i=Xu(),a=this.zo(e,t.toUriEncodedString());Ii(Ju,`Sending RPC '${e}' ${i}:`,a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,s,r);const{host:l}=new URL(a),c=be(l);return this.Jo(e,a,o,n,c).then(t=>(Ii(Ju,`Received RPC '${e}' ${i}: `,t),t),t=>{throw Ri(Ju,`RPC '${e}' ${i} failed with error: `,t,"url: ",a,"request:",n),t})}Ho(e,t,n,s,r,i){return this.Go(e,t,n,s,r)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Oi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Zu[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="WebChannelConnection";class sh extends eh{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,r){const i=Xu();return new Promise((r,a)=>{const o=new yi;o.setWithCredentials(!0),o.listenOnce(bi.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case xi.NO_ERROR:const t=o.getResponseJson();Ii(nh,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),r(t);break;case xi.TIMEOUT:Ii(nh,`RPC '${e}' ${i} timed out`),a(new Vi(Fi.DEADLINE_EXCEEDED,"Request time out"));break;case xi.HTTP_ERROR:const n=o.getStatus();if(Ii(nh,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Fi).indexOf(t)>=0?t:Fi.UNKNOWN}(t.status);a(new Vi(e,t.message))}else a(new Vi(Fi.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Vi(Fi.UNAVAILABLE,"Connection failed."));break;default:Di(9055,{l_:e,streamId:i,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Ii(nh,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(s);Ii(nh,`RPC '${e}' ${i} sending request:`,s),o.send(t,"POST",l,n,15)})}T_(e,t,n){const s=Xu(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ji(),a=_i(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=r.join("");Ii(nh,`Creating RPC '${e}' stream ${s}: ${c}`,o);const u=i.createWebChannel(c,o);this.I_(u);let h=!1,d=!1;const f=new th({Yo:t=>{d?Ii(nh,`Not sending because RPC '${e}' stream ${s} is closed:`,t):(h||(Ii(nh,`Opening RPC '${e}' stream ${s} transport.`),u.open(),h=!0),Ii(nh,`RPC '${e}' stream ${s} sending:`,t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return p(u,vi.EventType.OPEN,()=>{d||(Ii(nh,`RPC '${e}' stream ${s} transport opened.`),f.o_())}),p(u,vi.EventType.CLOSE,()=>{d||(d=!0,Ii(nh,`RPC '${e}' stream ${s} transport closed`),f.a_(),this.E_(u))}),p(u,vi.EventType.ERROR,t=>{d||(d=!0,Ri(nh,`RPC '${e}' stream ${s} transport errored. Name:`,t.name,"Message:",t.message),f.a_(new Vi(Fi.UNAVAILABLE,"The operation could not be completed")))}),p(u,vi.EventType.MESSAGE,t=>{var n;if(!d){const r=t.data[0];qi(!!r,16349);const i=r,a=(null==i?void 0:i.error)||(null==(n=i[0])?void 0:n.error);if(a){Ii(nh,`RPC '${e}' stream ${s} received error:`,a);const t=a.status;let n=function(e){const t=hc[e];if(void 0!==t)return fc(t)}(t),r=a.message;void 0===n&&(n=Fi.INTERNAL,r="Unknown error status: "+t+" with message "+a.message),d=!0,f.a_(new Vi(n,r)),u.close()}else Ii(nh,`RPC '${e}' stream ${s} received:`,r),f.u_(r)}}),p(a,Ni.STAT_EVENT,t=>{t.stat===wi.PROXY?Ii(nh,`RPC '${e}' stream ${s} detected buffering proxy`):t.stat===wi.NOPROXY&&Ii(nh,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function rh(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(e){return new Ac(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,t,n=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&Ii("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="PersistentStream";class lh{constructor(e,t,n,s,r,i,a,o){this.Mi=e,this.S_=n,this.b_=s,this.connection=r,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ah(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Fi.RESOURCE_EXHAUSTED?(Pi(t.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Fi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.D_===t&&this.G_(e,n)},t=>{e(()=>{const e=new Vi(Fi.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ii(oh,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Ii(oh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ch extends lh{constructor(e,t,n,s,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,i),this.serializer=r}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r="NO_CHANGE"===(s=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===s?1:"REMOVE"===s?2:"CURRENT"===s?3:"RESET"===s?4:Di(39313,{state:s}),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(qi(void 0===t||"string"==typeof t,58123),$a.fromBase64String(t||"")):(qi(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),$a.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(e){const t=void 0===e.code?Fi.UNKNOWN:fc(e.code);return new Vi(t,e.message||"")}(o);n=new _c(r,i,a,l||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=Vc(e,s.document.name),i=Dc(s.document.updateTime),a=s.document.createTime?Dc(s.document.createTime):Na.min(),o=new So({mapValue:{fields:s.document.fields}}),l=Co.newFoundDocument(r,i,a,o),c=s.targetIds||[],u=s.removedTargetIds||[];n=new wc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=Vc(e,s.document),i=s.readTime?Dc(s.readTime):Na.min(),a=Co.newNoDocument(r,i),o=s.removedTargetIds||[];n=new wc([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=Vc(e,s.document),i=s.removedTargetIds||[];n=new wc([],i,r,null)}else{if(!("filter"in t))return Di(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:s=0,unchangedNames:r}=e,i=new uc(s,r),a=e.targetId;n=new Nc(a,i)}}var s;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Na.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Na.min():t.readTime?Dc(t.readTime):Na.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=zc(this.serializer),t.addTarget=function(e,t){let n;const s=t.target;if(n=nl(s)?{documents:Kc(e,s)}:{query:Wc(e,s).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Rc(e,t.resumeToken);const s=Ic(e,t.expectedCount);null!==s&&(n.expectedCount=s)}else if(t.snapshotVersion.compareTo(Na.min())>0){n.readTime=Pc(e,t.snapshotVersion.toTimestamp());const s=Ic(e,t.expectedCount);null!==s&&(n.expectedCount=s)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Di(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=zc(this.serializer),t.removeTarget=e,this.q_(t)}}class uh extends lh{constructor(e,t,n,s,r,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,i),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return qi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qi(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){qi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(qi(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Dc(e.updateTime):Dc(t);return n.isEqual(Na.min())&&(n=Dc(t)),new $l(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Dc(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=zc(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof ec)n={update:$c(e,t.key,t.value)};else if(t instanceof ic)n={delete:Fc(e,t.key)};else if(t instanceof tc)n={update:$c(e,t.key,t.data),updateMask:nu(t.fieldMask)};else{if(!(t instanceof ac))return Di(16599,{Vt:t.type});n={verify:Fc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ml)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ql)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Bl)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Di(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=(s=e,void 0!==(r=t.precondition).updateTime?{updateTime:Lc(s,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:Di(27497))),n;var s,r}(this.serializer,e))};this.q_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{}class dh extends hh{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Vi(Fi.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.Go(e,qc(t,n),s,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Fi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Vi(Fi.UNKNOWN,e.toString())})}Ho(e,t,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Ho(e,qc(t,n),s,i,a,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Fi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Vi(Fi.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class fh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pi(t),this.aa=!1):Ii("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="RemoteStore";class mh{constructor(e,t,n,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{jh(this)&&(Ii(ph,"Restarting streams for network reachability change."),await async function(e){const t=Ui(e);t.Ea.add(4),await yh(t),t.Ra.set("Unknown"),t.Ea.delete(4),await gh(t)}(this))})}),this.Ra=new fh(n,s)}}async function gh(e){if(jh(e))for(const t of e.da)await t(!0)}async function yh(e){for(const t of e.da)await t(!1)}function vh(e,t){const n=Ui(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),_h(n)?Nh(n):Bh(n).O_()&&xh(n,t))}function bh(e,t){const n=Ui(e),s=Bh(n);n.Ia.delete(t),s.O_()&&wh(n,t),0===n.Ia.size&&(s.O_()?s.L_():jh(n)&&n.Ra.set("Unknown"))}function xh(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Na.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Bh(e).Y_(t)}function wh(e,t){e.Va.Ue(t),Bh(e).Z_(t)}function Nh(e){e.Va=new Ec({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Bh(e).start(),e.Ra.ua()}function _h(e){return jh(e)&&!Bh(e).x_()&&e.Ia.size>0}function jh(e){return 0===Ui(e).Ea.size}function Eh(e){e.Va=void 0}async function kh(e){e.Ra.set("Online")}async function Th(e){e.Ia.forEach((t,n)=>{xh(e,t)})}async function Sh(e,t){Eh(e),_h(e)?(e.Ra.ha(t),Nh(e)):e.Ra.set("Unknown")}async function Oh(e,t,n){if(e.Ra.set("Online"),t instanceof _c&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const s of t.targetIds)e.Ia.has(s)&&(await e.remoteSyncer.rejectListen(s,n),e.Ia.delete(s),e.Va.removeTarget(s))}(e,t)}catch(s){Ii(ph,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Ch(e,s)}else if(t instanceof wc?e.Va.Ze(t):t instanceof Nc?e.Va.st(t):e.Va.tt(t),!n.isEqual(Na.min()))try{const t=await Fu(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.Ia.get(s);r&&e.Ia.set(s,r.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const s=e.Ia.get(t);if(!s)return;e.Ia.set(t,s.withResumeToken($a.EMPTY_BYTE_STRING,s.snapshotVersion)),wh(e,t);const r=new ru(s.target,t,n,s.sequenceNumber);xh(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(r){Ii(ph,"Failed to raise snapshot:",r),await Ch(e,r)}}async function Ch(e,t,n){if(!Oa(t))throw t;e.Ea.add(1),await yh(e),e.Ra.set("Offline"),n||(n=()=>Fu(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ii(ph,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await gh(e)})}function Ah(e,t){return t().catch(n=>Ch(e,n,t))}async function Ih(e){const t=Ui(e),n=zh(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:-1;for(;Ph(t);)try{const e=await Bu(t.localStore,s);if(null===e){0===t.Ta.length&&n.L_();break}s=e.batchId,Rh(t,e)}catch(r){await Ch(t,r)}Lh(t)&&Dh(t)}function Ph(e){return jh(e)&&e.Ta.length<10}function Rh(e,t){e.Ta.push(t);const n=zh(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Lh(e){return jh(e)&&!zh(e).x_()&&e.Ta.length>0}function Dh(e){zh(e).start()}async function Mh(e){zh(e).ra()}async function qh(e){const t=zh(e);for(const n of e.Ta)t.ea(n.mutations)}async function Uh(e,t,n){const s=e.Ta.shift(),r=lc.from(s,t,n);await Ah(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Ih(e)}async function Fh(e,t){t&&zh(e).X_&&await async function(e,t){if(function(e){switch(e){case Fi.OK:return Di(64938);case Fi.CANCELLED:case Fi.UNKNOWN:case Fi.DEADLINE_EXCEEDED:case Fi.RESOURCE_EXHAUSTED:case Fi.INTERNAL:case Fi.UNAVAILABLE:case Fi.UNAUTHENTICATED:return!1;case Fi.INVALID_ARGUMENT:case Fi.NOT_FOUND:case Fi.ALREADY_EXISTS:case Fi.PERMISSION_DENIED:case Fi.FAILED_PRECONDITION:case Fi.ABORTED:case Fi.OUT_OF_RANGE:case Fi.UNIMPLEMENTED:case Fi.DATA_LOSS:return!0;default:return Di(15467,{code:e})}}(n=t.code)&&n!==Fi.ABORTED){const n=e.Ta.shift();zh(e).B_(),await Ah(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Ih(e)}var n}(e,t),Lh(e)&&Dh(e)}async function Vh(e,t){const n=Ui(e);n.asyncQueue.verifyOperationInProgress(),Ii(ph,"RemoteStore received new credentials");const s=jh(n);n.Ea.add(3),await yh(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await gh(n)}function Bh(e){return e.ma||(e.ma=function(e,t,n){const s=Ui(e);return s.sa(),new ch(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{Xo:kh.bind(null,e),t_:Th.bind(null,e),r_:Sh.bind(null,e),H_:Oh.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),_h(e)?Nh(e):e.Ra.set("Unknown")):(await e.ma.stop(),Eh(e))})),e.ma}function zh(e){return e.fa||(e.fa=function(e,t,n){const s=Ui(e);return s.sa(),new uh(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Mh.bind(null,e),r_:Fh.bind(null,e),ta:qh.bind(null,e),na:Uh.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Ih(e)):(await e.fa.stop(),e.Ta.length>0&&(Ii(ph,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Hh{constructor(e,t,n,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=r,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,r){const i=Date.now()+n,a=new Hh(e,t,i,s,r);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vi(Fi.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $h(e,t){if(Pi("AsyncQueue",`${t}: ${e}`),Oa(e))return new Vi(Fi.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{static emptySet(e){return new Kh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ua.comparator(t.key,n.key):(e,t)=>ua.comparator(e.key,t.key),this.keyedMap=wl(),this.sortedSet=new qa(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(!e.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Kh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this.ga=new qa(ua.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Di(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Gh{constructor(e,t,n,s,r,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=r,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,s,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Gh(e,t,Kh.emptySet(t),i,n,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Yh{constructor(){this.queries=Xh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Ui(e),s=n.queries;n.queries=Xh(),s.forEach((e,n)=>{for(const s of n.Sa)s.onError(t)})}(this,new Vi(Fi.ABORTED,"Firestore shutting down"))}}function Xh(){return new yl(e=>dl(e),hl)}async function Jh(e,t){const n=Ui(e);let s=3;const r=t.query;let i=n.queries.get(r);i?!i.ba()&&t.Da()&&(s=2):(i=new Qh,s=t.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const e=$h(a,`Initialization of query '${fl(t.query)}' failed`);return void t.onError(e)}n.queries.set(r,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&nd(n)}async function Zh(e,t){const n=Ui(e),s=t.query;let r=3;const i=n.queries.get(s);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?r=t.Da()?0:1:!i.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function ed(e,t){const n=Ui(e);let s=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(r)&&(s=!0);t.wa=r}}s&&nd(n)}function td(e,t,n){const s=Ui(e),r=s.queries.get(t);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(t)}function nd(e){e.Ca.forEach(e=>{e.next()})}var sd,rd;(rd=sd||(sd={})).Ma="default",rd.Cache="cache";class id{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Gh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Gh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sd.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e){this.key=e}}class od{constructor(e){this.key=e}}class ld{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Sl(),this.mutatedKeys=Sl(),this.eu=ml(e),this.tu=new Kh(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Wh,s=t?t.tu:this.tu;let r=t?t.mutatedKeys:this.mutatedKeys,i=s,a=!1;const o="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,l="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((e,t)=>{const c=s.get(e),u=pl(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),r=d?r.add(e):r.delete(e)):(i=i.delete(e),r=r.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:a,mutatedKeys:r}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Di(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),s=s??!1;const a=t&&!s?this._u():[],o=0===this.Xa.size&&this.current&&!s?1:0,l=o!==this.Za;return this.Za=o,0!==i.length||l?{snapshot:new Gh(this.query,e.tu,r,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Wh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Sl(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new od(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new ad(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Sl();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Gh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const cd="SyncEngine";class ud{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class hd{constructor(e){this.key=e,this.hu=!1}}class dd{constructor(e,t,n,s,r,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new yl(e=>dl(e),hl),this.Iu=new Map,this.Eu=new Set,this.du=new qa(ua.comparator),this.Au=new Map,this.Ru=new ju,this.Vu={},this.mu=new Map,this.fu=du.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function fd(e,t,n=!0){const s=Rd(e);let r;const i=s.Tu.get(t);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await md(s,t,n,!0),r}async function pd(e,t){const n=Rd(e);await md(n,t,!0,!1)}async function md(e,t,n,s){const r=await function(e,t){const n=Ui(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let s;return n.Pi.getTargetData(e,t).next(r=>r?(s=r,Sa.resolve(s)):n.Pi.allocateTargetId(e).next(r=>(s=new ru(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,s).next(()=>s))))}).then(e=>{const s=n.Ms.get(e.targetId);return(null===s||e.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}(e.localStore,ll(t)),i=r.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return s&&(o=await async function(e,t,n,s,r){e.pu=(t,n,s)=>async function(e,t,n,s){let r=t.view.ru(n);r.Cs&&(r=await Hu(e.localStore,t.query,!1).then(({documents:e})=>t.view.ru(e,r)));const i=s&&s.targetChanges.get(t.targetId),a=s&&null!=s.targetMismatches.get(t.targetId),o=t.view.applyChanges(r,e.isPrimaryClient,i,a);return Sd(e,t.targetId,o.au),o.snapshot}(e,t,n,s);const i=await Hu(e.localStore,t,!0),a=new ld(t,i.Qs),o=a.ru(i.documents),l=xc.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==e.onlineState,r),c=a.applyChanges(o,e.isPrimaryClient,l);Sd(e,n,c.au);const u=new ud(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}(e,t,i,"current"===a,r.resumeToken)),e.isPrimaryClient&&n&&vh(e.remoteStore,r),o}async function gd(e,t,n){const s=Ui(e),r=s.Tu.get(t),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(e=>!hl(e,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await zu(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&bh(s.remoteStore,r.targetId),kd(s,r.targetId)}).catch(Ta)):(kd(s,r.targetId),await zu(s.localStore,r.targetId,!0))}async function yd(e,t){const n=Ui(e),s=n.Tu.get(t),r=n.Iu.get(s.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),bh(n.remoteStore,s.targetId))}async function vd(e,t,n){const s=function(e){const t=Ui(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Nd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=_d.bind(null,t),t}(e);try{const e=await function(e,t){const n=Ui(e),s=wa.now(),r=t.reduce((e,t)=>e.add(t.key),Sl());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=bl(),l=Sl();return n.Ns.getEntries(e,r).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(r=>{i=r;const a=[];for(const e of t){const t=Jl(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new tc(e.key,t,Oo(t.value.mapValue),Kl.exists(!0)))}return n.mutationQueue.addMutationBatch(e,s,a,t)}).next(t=>{a=t;const s=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,s)})}).then(()=>({batchId:a.batchId,changes:Nl(i)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let s=e.Vu[e.currentUser.toKey()];s||(s=new qa(Zi)),s=s.insert(t,n),e.Vu[e.currentUser.toKey()]=s}(s,e.batchId,n),await Ad(s,e.changes),await Ih(s.remoteStore)}catch(r){const e=$h(r,"Failed to persist write");n.reject(e)}}async function bd(e,t){const n=Ui(e);try{const e=await Vu(n.localStore,t);t.targetChanges.forEach((e,t)=>{const s=n.Au.get(t);s&&(qi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?s.hu=!0:e.modifiedDocuments.size>0?qi(s.hu,14607):e.removedDocuments.size>0&&(qi(s.hu,42227),s.hu=!1))}),await Ad(n,e,t)}catch(s){await Ta(s)}}function xd(e,t,n){const s=Ui(e);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const e=[];s.Tu.forEach((n,s)=>{const r=s.view.va(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const n=Ui(e);n.onlineState=t;let s=!1;n.queries.forEach((e,n)=>{for(const r of n.Sa)r.va(t)&&(s=!0)}),s&&nd(n)}(s.eventManager,t),e.length&&s.Pu.H_(e),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function wd(e,t,n){const s=Ui(e);s.sharedClientState.updateQueryState(t,"rejected",n);const r=s.Au.get(t),i=r&&r.key;if(i){let e=new qa(ua.comparator);e=e.insert(i,Co.newNoDocument(i,Na.min()));const n=Sl().add(i),r=new bc(Na.min(),new Map,new qa(Zi),e,n);await bd(s,r),s.du=s.du.remove(i),s.Au.delete(t),Cd(s)}else await zu(s.localStore,t,!1).then(()=>kd(s,t,n)).catch(Ta)}async function Nd(e,t){const n=Ui(e),s=t.batch.batchId;try{const e=await function(e,t){const n=Ui(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const s=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,s){const r=n.batch,i=r.keys();let a=Sa.resolve();return i.forEach(e=>{a=a.next(()=>s.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);qi(null!==i,48541),t.version.compareTo(i)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),s.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,r))}(n,e,t,r).next(()=>r.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Sl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,s))})}(n.localStore,t);Ed(n,s,null),jd(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ad(n,e)}catch(r){await Ta(r)}}async function _d(e,t,n){const s=Ui(e);try{const e=await function(e,t){const n=Ui(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let s;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(qi(null!==t,37113),s=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,s,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,s)).next(()=>n.localDocuments.getDocuments(e,s))})}(s.localStore,t);Ed(s,t,n),jd(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Ad(s,e)}catch(r){await Ta(r)}}function jd(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Ed(e,t,n){const s=Ui(e);let r=s.Vu[s.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),s.Vu[s.currentUser.toKey()]=r}}function kd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Iu.get(t))e.Tu.delete(s),n&&e.Pu.yu(s,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Td(e,t)})}function Td(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(bh(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Cd(e))}function Sd(e,t,n){for(const s of n)s instanceof ad?(e.Ru.addReference(s.key,t),Od(e,s)):s instanceof od?(Ii(cd,"Document no longer in limbo: "+s.key),e.Ru.removeReference(s.key,t),e.Ru.containsKey(s.key)||Td(e,s.key)):Di(19791,{wu:s})}function Od(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Eu.has(s)||(Ii(cd,"New document in limbo: "+n),e.Eu.add(s),Cd(e))}function Cd(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ua(oa.fromString(t)),s=e.fu.next();e.Au.set(s,new hd(n)),e.du=e.du.insert(n,s),vh(e.remoteStore,new ru(ll(rl(n.path)),s,"TargetPurposeLimboResolution",Ca.ce))}}async function Ad(e,t,n){const s=Ui(e),r=[],i=[],a=[];s.Tu.isEmpty()||(s.Tu.forEach((e,o)=>{a.push(s.pu(o,t,n).then(e=>{var t;if((e||n)&&s.isPrimaryClient){const r=e?!e.fromCache:null==(t=null==n?void 0:n.targetChanges.get(o.targetId))?void 0:t.current;s.sharedClientState.updateQueryState(o.targetId,r?"current":"not-current")}if(e){r.push(e);const t=Ru.As(o.targetId,e);i.push(t)}}))}),await Promise.all(a),s.Pu.H_(r),await async function(e,t){const n=Ui(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Sa.forEach(t,t=>Sa.forEach(t.Es,s=>n.persistence.referenceDelegate.addReference(e,t.targetId,s)).next(()=>Sa.forEach(t.ds,s=>n.persistence.referenceDelegate.removeReference(e,t.targetId,s)))))}catch(s){if(!Oa(s))throw s;Ii(Mu,"Failed to update sequence numbers: "+s)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),s=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(s);n.Ms=n.Ms.insert(e,r)}}}(s.localStore,i))}async function Id(e,t){const n=Ui(e);if(!n.currentUser.isEqual(t)){Ii(cd,"User change. New user:",t.toKey());const e=await Uu(n.localStore,t);n.currentUser=t,r="'waitForPendingWrites' promise is rejected due to a user change.",(s=n).mu.forEach(e=>{e.forEach(e=>{e.reject(new Vi(Fi.CANCELLED,r))})}),s.mu.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ad(n,e.Ls)}var s,r}function Pd(e,t){const n=Ui(e),s=n.Au.get(t);if(s&&s.hu)return Sl().add(s.key);{let e=Sl();const s=n.Iu.get(t);if(!s)return e;for(const t of s){const s=n.Tu.get(t);e=e.unionWith(s.view.nu)}return e}}function Rd(e){const t=Ui(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=bd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wd.bind(null,t),t.Pu.H_=ed.bind(null,t.eventManager),t.Pu.yu=td.bind(null,t.eventManager),t}class Ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ih(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return function(e,t,n,s){return new qu(e,t,n,s)}(this.persistence,new Du,e.initialUser,this.serializer)}Cu(e){return new Cu(Iu.mi,this.serializer)}Du(e){return new Ku}async terminate(){var e,t;null==(e=this.gcScheduler)||e.stop(),null==(t=this.indexBackfillerScheduler)||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ld.provider={build:()=>new Ld};class Dd extends Ld{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){qi(this.persistence.referenceDelegate instanceof Pu,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new gu(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?hu.withCacheSize(this.cacheSizeBytes):hu.DEFAULT;return new Cu(e=>Pu.mi(e,t),this.serializer)}}class Md{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>xd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Id.bind(null,this.syncEngine),await async function(e,t){const n=Ui(e);t?(n.Ea.delete(2),await gh(n)):t||(n.Ea.add(2),await yh(n),n.Ra.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Yh}createDatastore(e){const t=ih(e.databaseInfo.databaseId),n=(s=e.databaseInfo,new sh(s));var s;return function(e,t,n,s){return new dh(e,t,n,s)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,s=e.asyncQueue,r=e=>xd(this.syncEngine,e,0),i=Qu.v()?new Qu:new Wu,new mh(t,n,s,r,i);var t,n,s,r,i}createSyncEngine(e,t){return function(e,t,n,s,r,i,a){const o=new dd(e,t,n,s,r,i);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ui(e);Ii(ph,"RemoteStore shutting down."),t.Ea.add(5),await yh(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null==(e=this.datastore)||e.terminate(),null==(t=this.eventManager)||t.terminate()}}Md.provider={build:()=>new Md};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class qd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="FirestoreClient";class Fd{constructor(e,t,n,s,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=Si.UNAUTHENTICATED,this.clientId=Ji.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,async e=>{Ii(Ud,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Ii(Ud,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=$h(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Vd(e,t){e.asyncQueue.verifyOperationInProgress(),Ii(Ud,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async e=>{s.isEqual(e)||(await Uu(t.localStore,e),s=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Bd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ii(Ud,"Using user provided OfflineComponentProvider");try{await Vd(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!("FirebaseError"===(n=r).name?n.code===Fi.FAILED_PRECONDITION||n.code===Fi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw r;Ri("Error using user provided cache. Falling back to memory cache: "+r),await Vd(e,new Ld)}}else Ii(Ud,"Using default OfflineComponentProvider"),await Vd(e,new Dd(void 0));var n;return e._offlineComponents}(e);Ii(Ud,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Vh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Vh(t.remoteStore,n)),e._onlineComponents=t}async function zd(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ii(Ud,"Using user provided OnlineComponentProvider"),await Bd(e,e._uninitializedComponentsProvider._online)):(Ii(Ud,"Using default OnlineComponentProvider"),await Bd(e,new Md))),e._onlineComponents}async function Hd(e){const t=await zd(e),n=t.eventManager;return n.onListen=fd.bind(null,t.syncEngine),n.onUnlisten=gd.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=pd.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=yd.bind(null,t.syncEngine),n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $d(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Kd=new Map,Wd="firestore.googleapis.com",Gd=!0;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new Vi(Fi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wd,this.ssl=Gd}else this.host=e.host,this.ssl=e.ssl??Gd;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=uu;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Vi(Fi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,s){if(!0===t&&!0===s)throw new Vi(Fi.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$d(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Vi(Fi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Vi(Fi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Vi(Fi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Yd{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Vi(Fi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Vi(Fi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qd(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Hi;switch(e.type){case"firstParty":return new Gi(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Vi(Fi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Kd.get(e);t&&(Ii("ComponentProvider","Removing Datastore"),Kd.delete(e),t.terminate())}(this),Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Xd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Xd(this.firestore,e,this._query)}}class Jd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jd(this.firestore,e,this._key)}toJSON(){return{type:Jd._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(va(t,Jd._jsonSchema))return new Jd(e,n||null,new ua(oa.fromString(t.referencePath)))}}Jd._jsonSchemaVersion="firestore/documentReference/1.0",Jd._jsonSchema={type:ya("string",Jd._jsonSchemaVersion),referencePath:ya("string")};class Zd extends Xd{constructor(e,t,n){super(e,t,rl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jd(this.firestore,null,new ua(e))}withConverter(e){return new Zd(this.firestore,e,this._path)}}function ef(e,t,...n){if(e=Me(e),ha("collection","path",t),e instanceof Yd){const s=oa.fromString(t,...n);return fa(s),new Zd(e,null,s)}{if(!(e instanceof Jd||e instanceof Zd))throw new Vi(Fi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(oa.fromString(t,...n));return fa(s),new Zd(e.firestore,null,s)}}function tf(e,t,...n){if(e=Me(e),1===arguments.length&&(t=Ji.newId()),ha("doc","path",t),e instanceof Yd){const s=oa.fromString(t,...n);return da(s),new Jd(e,null,new ua(s))}{if(!(e instanceof Jd||e instanceof Zd))throw new Vi(Fi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(oa.fromString(t,...n));return da(s),new Jd(e.firestore,e instanceof Zd?e.converter:null,new ua(s))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="AsyncQueue";class sf{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ah(this,"async_queue_retry"),this._c=()=>{const e=rh();e&&Ii(nf,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=rh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=rh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Bi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Oa(e))throw e;Ii(nf,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Pi("INTERNAL UNHANDLED ERROR: ",rf(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Hh.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(s),s}uc(){this.nc&&Di(47125,{Pc:rf(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function rf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class af extends Yd{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new sf,this._persistenceKey=(null==s?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sf(e),this._firestoreClient=void 0,await e}}}function of(e){if(e._terminated)throw new Vi(Fi.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,s;const r=e._freezeSettings(),i=(a=e._databaseId,o=(null==(t=e._app)?void 0:t.options.appId)||"",l=e._persistenceKey,c=r,new so(a,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,$d(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator));var a,o,l,c;e._componentsProvider||(null==(n=r.localCache)?void 0:n._offlineComponentProvider)&&(null==(s=r.localCache)?void 0:s._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new Fd(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class lf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lf($a.fromBase64String(e))}catch(t){throw new Vi(Fi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new lf($a.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:lf._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(va(e,lf._jsonSchema))return lf.fromBase64String(e.bytes)}}lf._jsonSchemaVersion="firestore/bytes/1.0",lf._jsonSchema={type:ya("string",lf._jsonSchemaVersion),bytes:ya("string")};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class cf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Vi(Fi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ca(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Vi(Fi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Vi(Fi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Zi(this._lat,e._lat)||Zi(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hf._jsonSchemaVersion}}static fromJSON(e){if(va(e,hf._jsonSchema))return new hf(e.latitude,e.longitude)}}hf._jsonSchemaVersion="firestore/geoPoint/1.0",hf._jsonSchema={type:ya("string",hf._jsonSchemaVersion),latitude:ya("number"),longitude:ya("number")};
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class df{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:df._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(va(e,df._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new df(e.vectorValues);throw new Vi(Fi.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}df._jsonSchemaVersion="firestore/vectorValue/1.0",df._jsonSchema={type:ya("string",df._jsonSchemaVersion),vectorValues:ya("object")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ff=/^__.*__$/;class pf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new tc(e,this.data,this.fieldMask,t,this.fieldTransforms):new ec(e,this.data,t,this.fieldTransforms)}}class mf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new tc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Di(40011,{Ac:e})}}class yf{constructor(e,t,n,s,r,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,void 0===r&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new yf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null==(t=this.path)?void 0:t.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var t;const n=null==(t=this.path)?void 0:t.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Of(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(gf(this.Ac)&&ff.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ih(e)}Cc(e,t,n,s=!1){return new yf({Ac:e,methodName:t,Dc:n,path:ca.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bf(e){const t=e._freezeSettings(),n=ih(e._databaseId);return new vf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function xf(e,t,n,s,r,i={}){const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,r);Ef("Data must be an object, but it was:",a,s);const o=_f(s,a);let l,c;if(i.merge)l=new za(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const s of i.mergeFields){const r=kf(t,s,n);if(!a.contains(r))throw new Vi(Fi.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Cf(e,r)||e.push(r)}l=new za(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new pf(new So(o),l,c)}class wf extends uf{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wf}}function Nf(e,t){if(jf(e=Me(e)))return Ef("Unsupported field value:",t,e),_f(e,t);if(e instanceof uf)return function(e,t){if(!gf(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let s=0;for(const r of e){let e=Nf(r,t.wc(s));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),s++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Me(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Il(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=wa.fromDate(e);return{timestampValue:Pc(t.serializer,n)}}if(e instanceof wa){const n=new wa(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Pc(t.serializer,n)}}if(e instanceof hf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof lf)return{bytesValue:Rc(t.serializer,e._byteString)};if(e instanceof Jd){const n=t.databaseId,s=e.firestore._databaseId;if(!s.isEqual(n))throw t.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Mc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof df)return n=e,s=t,{mapValue:{fields:{[ao]:{stringValue:co},[uo]:{arrayValue:{values:n.toArray().map(e=>{if("number"!=typeof e)throw s.Sc("VectorValues must only contain numeric values.");return Cl(s.serializer,e)})}}}}};var n,s;throw t.Sc(`Unsupported field value: ${ma(e)}`)}(e,t)}function _f(e,t){const n={};return Ma(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Da(e,(e,s)=>{const r=Nf(s,t.mc(e));null!=r&&(n[e]=r)}),{mapValue:{fields:n}}}function jf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof wa||e instanceof hf||e instanceof lf||e instanceof Jd||e instanceof uf||e instanceof df)}function Ef(e,t,n){if(!jf(n)||!pa(n)){const s=ma(n);throw"an object"===s?t.Sc(e+" a custom object"):t.Sc(e+" "+s)}}function kf(e,t,n){if((t=Me(t))instanceof cf)return t._internalPath;if("string"==typeof t)return Sf(e,t);throw Of("Field path arguments must be of type string or ",e,!1,void 0,n)}const Tf=new RegExp("[~\\*/\\[\\]]");function Sf(e,t,n){if(t.search(Tf)>=0)throw Of(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new cf(...t.split("."))._internalPath}catch(s){throw Of(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Of(e,t,n,s,r){const i=s&&!s.isEmpty(),a=void 0!==r;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${s}`),a&&(l+=` in document ${r}`),l+=")"),new Vi(Fi.INVALID_ARGUMENT,o+e+l)}function Cf(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,n,s,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Jd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new If(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class If extends Af{data(){return super.data()}}function Pf(e,t){return"string"==typeof t?Sf(e,t):t instanceof cf?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{}class Lf extends Rf{}function Df(e,t,...n){let s=[];t instanceof Rf&&s.push(t),s=s.concat(n),function(e){const t=e.filter(e=>e instanceof Uf).length,n=e.filter(e=>e instanceof Mf).length;if(t>1||t>0&&n>0)throw new Vi(Fi.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)e=r._apply(e);return e}class Mf extends Lf{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Mf(e,t,n)}_apply(e){const t=this._parse(e);return Hf(e._query,t),new Xd(e.firestore,e.converter,cl(e._query,t))}_parse(e){const t=bf(e.firestore),n=function(e,t,n,s,r,i,a){let o;if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Vi(Fi.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){zf(a,i);const t=[];for(const n of a)t.push(Bf(s,e,n));o={arrayValue:{values:t}}}else o=Bf(s,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||zf(a,i),o=function(e,t,n,s=!1){return Nf(n,e.Cc(s?4:3,t))}(n,t,a,"in"===i||"not-in"===i);return Mo.create(r,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function qf(e,t,n){const s=t,r=Pf("where",e);return Mf._create(r,s,n)}class Uf extends Rf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Uf(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:qo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const s=t.getFlattenedFilters();for(const r of s)Hf(n,r),n=cl(n,r)}(e._query,t),new Xd(e.firestore,e.converter,cl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ff extends Lf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ff(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Vi(Fi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Vi(Fi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ro(t,n)}(e._query,this._field,this._direction);return new Xd(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new sl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Vf(e,t="asc"){const n=t,s=Pf("orderBy",e);return Ff._create(s,n)}function Bf(e,t,n){if("string"==typeof(n=Me(n))){if(""===n)throw new Vi(Fi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!al(t)&&-1!==n.indexOf("/"))throw new Vi(Fi.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(oa.fromString(n));if(!ua.isDocumentKey(s))throw new Vi(Fi.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return wo(e,new ua(s))}if(n instanceof Jd)return wo(e,n._key);throw new Vi(Fi.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ma(n)}.`)}function zf(e,t){if(!Array.isArray(e)||0===e.length)throw new Vi(Fi.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Hf(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Vi(Fi.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Vi(Fi.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class $f{convertValue(e,t="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ga(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Di(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Da(e,(e,s)=>{n[e]=this.convertValue(s,t)}),n}convertVectorValue(e){var t,n,s;const r=null==(s=null==(n=null==(t=e.fields)?void 0:t[uo].arrayValue)?void 0:n.values)?void 0:s.map(e=>Ga(e.doubleValue));return new df(r)}convertGeoPoint(e){return new hf(Ga(e.latitude),Ga(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=to(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(no(e));default:return null}}convertTimestamp(e){const t=Wa(e);return new wa(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=oa.fromString(e);qi(su(n),9688,{name:e});const s=new io(n.get(1),n.get(3)),r=new ua(n.popFirst(5));return s.isEqual(t)||Pi(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wf extends Af{constructor(e,t,n,s,r,i){super(e,t,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Pf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Vi(Fi.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wf._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Wf._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wf._jsonSchema={type:ya("string",Wf._jsonSchemaVersion),bundleSource:ya("string","DocumentSnapshot"),bundleName:ya("string"),bundle:ya("string")};class Gf extends Wf{data(e={}){return super.data(e)}}class Qf{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Kf(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Gf(this._firestore,this._userDataWriter,n.key,n,new Kf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Vi(Fi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const s=new Gf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Kf(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:s,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const s=new Gf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Kf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,i=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Yf(t.type),doc:s,oldIndex:r,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Vi(Fi.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qf._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ji.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),s.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Yf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Di(61501,{type:e})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(e){e=ga(e,Jd);const t=ga(e.firestore,af);return function(e,t,n={}){const s=new Bi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,s,r){const i=new qd({next:o=>{i.Nu(),t.enqueueAndForget(()=>Zh(e,a));const l=o.docs.has(n);!l&&o.fromCache?r.reject(new Vi(Fi.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&s&&"server"===s.source?r.reject(new Vi(Fi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(o)},error:e=>r.reject(e)}),a=new id(rl(n.path),i,{includeMetadataChanges:!0,qa:!0});return Jh(e,a)}(await Hd(e),e.asyncQueue,t,n,s)),s.promise}(of(t),e._key).then(n=>function(e,t,n){const s=n.docs.get(t._key),r=new Jf(e);return new Wf(e,r,t._key,s,new Kf(n.hasPendingWrites,n.fromCache),t.converter)}(t,e,n))}Qf._jsonSchemaVersion="firestore/querySnapshot/1.0",Qf._jsonSchema={type:ya("string",Qf._jsonSchemaVersion),bundleSource:ya("string","QuerySnapshot"),bundleName:ya("string"),bundle:ya("string")};class Jf extends $f{constructor(e){super(),this.firestore=e}convertBytes(e){return new lf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jd(this.firestore,null,t)}}function Zf(e){e=ga(e,Xd);const t=ga(e.firestore,af),n=of(t),s=new Jf(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Vi(Fi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),function(e,t,n={}){const s=new Bi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,s,r){const i=new qd({next:n=>{i.Nu(),t.enqueueAndForget(()=>Zh(e,a)),n.fromCache&&"server"===s.source?r.reject(new Vi(Fi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),a=new id(n,i,{includeMetadataChanges:!0,qa:!0});return Jh(e,a)}(await Hd(e),e.asyncQueue,t,n,s)),s.promise}(n,e._query).then(n=>new Qf(t,s,e,n))}function ep(e,t,n,...s){e=ga(e,Jd);const r=ga(e.firestore,af),i=bf(r);let a;return a="string"==typeof(t=Me(t))||t instanceof cf?function(e,t,n,s,r,i){const a=e.Cc(1,t,n),o=[kf(t,s,n)],l=[r];if(i.length%2!=0)throw new Vi(Fi.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)o.push(kf(t,i[d])),l.push(i[d+1]);const c=[],u=So.empty();for(let d=o.length-1;d>=0;--d)if(!Cf(c,o[d])){const e=o[d];let t=l[d];t=Me(t);const n=a.yc(e);if(t instanceof wf)c.push(e);else{const s=Nf(t,n);null!=s&&(c.push(e),u.set(e,s))}}const h=new za(c);return new mf(u,h,a.fieldTransforms)}(i,"updateDoc",e._key,t,n,s):function(e,t,n,s){const r=e.Cc(1,t,n);Ef("Data must be an object, but it was:",r,s);const i=[],a=So.empty();Da(s,(e,s)=>{const o=Sf(t,e,n);s=Me(s);const l=r.yc(o);if(s instanceof wf)i.push(o);else{const e=Nf(s,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new za(i);return new mf(a,o,r.fieldTransforms)}(i,"updateDoc",e._key,t),tp(r,[a.toMutation(e._key,Kl.exists(!0))])}function tp(e,t){return function(e,t){const n=new Bi;return e.asyncQueue.enqueueAndForget(async()=>vd(await function(e){return zd(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(of(e),t)}!function(e,t=!0){Oi=Jt,Wt(new qe("firestore",(e,{instanceIdentifier:n,options:s})=>{const r=e.getProvider("app").getImmediate(),i=new af(new Ki(e.getProvider("auth-internal")),new Yi(r,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Vi(Fi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new io(e.options.projectId,t)}(r,n),r);return s={useFetchStreams:t,...s},i._setSettings(s),i},"PUBLIC").setMultipleInstances(!0)),tn(ki,Ti,e),tn(ki,Ti,"esm2020")}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const np="firebasestorage.googleapis.com",sp="storageBucket";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class rp extends Te{constructor(e,t,n=0){super(cp(e),`Firebase Storage: ${t} (${cp(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rp.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var ip,ap,op,lp;function cp(e){return"storage/"+e}function up(){return new rp(ip.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function hp(e){return new rp(ip.INVALID_ARGUMENT,e)}function dp(){return new rp(ip.APP_DELETED,"The Firebase app was deleted.")}function fp(e,t){return new rp(ip.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function pp(e){throw new rp(ip.INTERNAL_ERROR,"Internal error: "+e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(ap=ip||(ip={})).UNKNOWN="unknown",ap.OBJECT_NOT_FOUND="object-not-found",ap.BUCKET_NOT_FOUND="bucket-not-found",ap.PROJECT_NOT_FOUND="project-not-found",ap.QUOTA_EXCEEDED="quota-exceeded",ap.UNAUTHENTICATED="unauthenticated",ap.UNAUTHORIZED="unauthorized",ap.UNAUTHORIZED_APP="unauthorized-app",ap.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",ap.INVALID_CHECKSUM="invalid-checksum",ap.CANCELED="canceled",ap.INVALID_EVENT_NAME="invalid-event-name",ap.INVALID_URL="invalid-url",ap.INVALID_DEFAULT_BUCKET="invalid-default-bucket",ap.NO_DEFAULT_BUCKET="no-default-bucket",ap.CANNOT_SLICE_BLOB="cannot-slice-blob",ap.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",ap.NO_DOWNLOAD_URL="no-download-url",ap.INVALID_ARGUMENT="invalid-argument",ap.INVALID_ARGUMENT_COUNT="invalid-argument-count",ap.APP_DELETED="app-deleted",ap.INVALID_ROOT_OPERATION="invalid-root-operation",ap.INVALID_FORMAT="invalid-format",ap.INTERNAL_ERROR="internal-error",ap.UNSUPPORTED_ENVIRONMENT="unsupported-environment";class mp{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=mp.makeFromUrl(e,t)}catch(r){return new mp(e,"")}if(""===n.path)return n;throw s=e,new rp(ip.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.");var s}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+s+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp(`^https?://${t===np?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<o.length;l++){const t=o[l],s=t.regex.exec(e);if(s){const e=s[t.indices.bucket];let r=s[t.indices.path];r||(r=""),n=new mp(e,r),t.postModify(n);break}}if(null==n)throw function(e){return new rp(ip.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class gp{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(e){return"string"==typeof e||e instanceof String}function vp(e){return bp()&&e instanceof Blob}function bp(){return"undefined"!=typeof Blob}function xp(e,t,n,s){if(s<t)throw hp(`Invalid value for '${e}'. Expected ${t} or greater.`);if(s>n)throw hp(`Invalid value for '${e}'. Expected ${n} or less.`)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(e,t,n){let s=t;return null==n&&(s=`https://${t}`),`${n}://${s}/v0${e}`}function Np(e){const t=encodeURIComponent;let n="?";for(const s in e)if(e.hasOwnProperty(s)){n=n+(t(s)+"="+t(e[s]))+"&"}return n=n.slice(0,-1),n}(lp=op||(op={}))[lp.NO_ERROR=0]="NO_ERROR",lp[lp.NETWORK_ERROR=1]="NETWORK_ERROR",lp[lp.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _p{constructor(e,t,n,s,r,i,a,o,l,c,u,h=!0,d=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new jp(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const s=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(s),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(s),this.pendingConnection_=null;const t=n.getErrorCode()===op.NO_ERROR,r=n.getStatus();if(!t||
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){const n=e>=500&&e<600,s=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return n||s||r}(r,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===op.ABORT;return void e(!1,new jp(!1,null,t))}const i=-1!==this.successCodes_.indexOf(r);e(!0,new jp(i,n))})},t=(e,t)=>{const n=this.resolve_,s=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());!
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return void 0!==e}(e)?n():n(e)}catch(i){s(i)}else if(null!==r){const e=up();e.serverResponse=r.getErrorText(),this.errorCallback_?s(this.errorCallback_(r,e)):s(e)}else if(t.canceled){s(this.appDelete_?dp():new rp(ip.CANCELED,"User canceled the upload/download."))}else{s(new rp(ip.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new jp(!1,null,!0)):this.backoffId_=function(e,t,n){let s=1,r=null,i=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(...e){c||(c=!0,t.apply(null,e))}function h(t){r=setTimeout(()=>{r=null,e(f,l())},t)}function d(){i&&clearTimeout(i)}function f(e,...t){if(c)return void d();if(e)return d(),void u.call(null,e,...t);if(l()||a)return d(),void u.call(null,e,...t);let n;s<64&&(s*=2),1===o?(o=2,n=0):n=1e3*(s+Math.random()),h(n)}let p=!1;function m(e){p||(p=!0,d(),c||(null!==r?(e||(o=2),clearTimeout(r),h(0)):e||(o=1)))}return h(0),i=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class jp{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Ep(...e){const t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(bp())return new Blob(e);throw new rp(ip.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function kp(e){if("undefined"==typeof atob)throw t="base-64",new rp(ip.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="raw",Sp="base64",Op="base64url",Cp="data_url";class Ap{constructor(e,t){this.data=e,this.contentType=t||null}}function Ip(e,t){switch(e){case Tp:return new Ap(Pp(t));case Sp:case Op:return new Ap(Rp(e,t));case Cp:return new Ap(function(e){const t=new Lp(e);return t.base64?Rp(Sp,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw fp(Cp,"Malformed data URL.")}return Pp(t)}(t.rest)}(t),new Lp(t).contentType)}throw up()}function Pp(e){const t=[];for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);if(s<=127)t.push(s);else if(s<=2047)t.push(192|s>>6,128|63&s);else if(55296==(64512&s)){if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){s=65536|(1023&s)<<10|1023&e.charCodeAt(++n),t.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s)}else t.push(239,191,189)}else 56320==(64512&s)?t.push(239,191,189):t.push(224|s>>12,128|s>>6&63,128|63&s)}return new Uint8Array(t)}function Rp(e,t){switch(e){case Sp:{const n=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(n||s){throw fp(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Op:{const n=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(n||s){throw fp(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=kp(t)}catch(r){if(r.message.includes("polyfill"))throw r;throw fp(e,"Invalid character found")}const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}class Lp{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw fp(Cp,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Dp{constructor(e,t){let n=0,s="";vp(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(vp(this.data_)){const i=this.data_,a=(s=e,r=t,(n=i).webkitSlice?n.webkitSlice(s,r):n.mozSlice?n.mozSlice(s,r):n.slice?n.slice(s,r):null);return null===a?null:new Dp(a)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Dp(n,!0)}var n,s,r}static getBlob(...e){if(bp()){const t=e.map(e=>e instanceof Dp?e.data_:e);return new Dp(Ep.apply(null,t))}{const t=e.map(e=>yp(e)?Ip(Tp,e).data:e.data_);let n=0;t.forEach(e=>{n+=e.byteLength});const s=new Uint8Array(n);let r=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)s[r++]=e[t]}),new Dp(s,!0)}}uploadData(){return this.data_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(e,t){return t}class Fp{constructor(e,t,n,s){this.server=e,this.local=t||e,this.writable=!!n,this.xform=s||Up}}let Vp=null;function Bp(){if(Vp)return Vp;const e=[];e.push(new Fp("bucket")),e.push(new Fp("generation")),e.push(new Fp("metageneration")),e.push(new Fp("name","fullPath",!0));const t=new Fp("name");t.xform=function(e,t){return function(e){return!yp(e)||e.length<2?e:qp(e)}(t)},e.push(t);const n=new Fp("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Fp("timeCreated")),e.push(new Fp("updated")),e.push(new Fp("md5Hash",null,!0)),e.push(new Fp("cacheControl",null,!0)),e.push(new Fp("contentDisposition",null,!0)),e.push(new Fp("contentEncoding",null,!0)),e.push(new Fp("contentLanguage",null,!0)),e.push(new Fp("contentType",null,!0)),e.push(new Fp("metadata","customMetadata",!0)),Vp=e,Vp}function zp(e,t,n){const s={type:"file"},r=n.length;for(let i=0;i<r;i++){const e=n[i];s[e.local]=e.xform(s,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,s=e.fullPath,r=new mp(n,s);return t._makeStorageReference(r)}})}(s,e),s}function Hp(e,t,n){const s=Mp(t);if(null===s)return null;return zp(e,s,n)}class $p{constructor(e,t,n,s){this.url=e,this.method=t,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(e){if(!e)throw up()}function Wp(e,t){return function(n,s){const r=Hp(e,s,t);return Kp(null!==r),function(e,t,n,s){const r=Mp(t);if(null===r)return null;if(!yp(r.downloadTokens))return null;const i=r.downloadTokens;if(0===i.length)return null;const a=encodeURIComponent;return i.split(",").map(t=>{const r=e.bucket,i=e.fullPath;return wp("/b/"+a(r)+"/o/"+a(i),n,s)+Np({alt:"media",token:t})})[0]}(r,s,e.host,e._protocol)}}function Gp(e){return function(t,n){let s;var r,i;return 401===t.getStatus()?s=t.getErrorText().includes("Firebase App Check token is invalid")?new rp(ip.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new rp(ip.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,s=new rp(ip.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=e.path,s=new rp(ip.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):s=n,s.status=t.getStatus(),s.serverResponse=n.serverResponse,s}}function Qp(e){const t=Gp(e);return function(n,s){let r=t(n,s);var i;return 404===n.getStatus()&&(i=e.path,r=new rp(ip.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),r.serverResponse=s.serverResponse,r}}function Yp(e,t,n,s,r){const i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=function(e,t,n){const s=Object.assign({},n);return s.fullPath=e.path,s.size=t.size(),s.contentType||(s.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),s}(t,s,r),c=function(e,t){const n={},s=t.length;for(let r=0;r<s;r++){const s=t[r];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}(l,n),u="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",h="\r\n--"+o+"--",d=Dp.getBlob(u,s,h);if(null===d)throw new rp(ip.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.");const f={name:l.fullPath},p=wp(i,e.host,e._protocol),m=e.maxUploadRetryTime,g=new $p(p,"POST",function(e,t){return function(n,s){const r=Hp(e,s,t);return Kp(null!==r),r}}(e,n),m);return g.urlParams=f,g.headers=a,g.body=d.uploadData(),g.errorHandler=Gp(t),g}class Xp{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=op.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=op.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=op.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,s,r){if(this.sent_)throw pp("cannot .send() more than once");if(be(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==s?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pp("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw pp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Jp extends Xp{initXhr(){this.xhr_.responseType="text"}}function Zp(){return new Jp}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,t){this._service=e,this._location=t instanceof mp?t:mp.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new em(e,t)}get root(){const e=new mp(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qp(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new mp(this._location.bucket,e);return new em(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new rp(ip.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function tm(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const s=wp(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new $p(s,"GET",Wp(e,n),r);return i.errorHandler=Qp(t),i}(e.storage,e._location,Bp());return e.storage.makeRequestWithTokens(t,Zp).then(e=>{if(null===e)throw new rp(ip.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function nm(e,t){if(e instanceof im){const n=e;if(null==n._bucket)throw new rp(ip.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+sp+"' property when initializing the app?");const s=new em(n,n._bucket);return null!=t?nm(s,t):s}return void 0!==t?function(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),s=new mp(e._location.bucket,n);return new em(e.storage,s)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t):e}function sm(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof im)return new em(e,t);throw hp("To use ref(service, url), the first argument must be a Storage instance.")}return nm(e,t)}function rm(e,t){const n=null==t?void 0:t[sp];return null==n?null:mp.makeFromBucketSpec(n,e)}class im{constructor(e,t,n,s,r,i=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=r,this._isUsingEmulator=i,this._bucket=null,this._host=np,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?mp.makeFromBucketSpec(s,this._host):rm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=mp.makeFromBucketSpec(this._url,e):this._bucket=rm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new em(this,e)}_makeRequest(e,t,n,s,r=!0){if(this._deleted)return new gp(dp());{const i=function(e,t,n,s,r,i,a=!0,o=!1){const l=Np(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(u,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,s),new _p(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,a,o)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,this._appId,n,s,t,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const am="@firebase/storage",om="0.14.0",lm="storage";function cm(e,t,n){return function(e,t,n){e._throwIfRoot("uploadBytes");const s=Yp(e.storage,e._location,Bp(),new Dp(t,!0),n);return e.storage.makeRequestWithTokens(s,Zp).then(t=>({metadata:t,ref:e}))}(e=Me(e),t,n)}function um(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new im(n,s,r,t,Jt)}Wt(new qe(lm,um,"PUBLIC").setMultipleInstances(!0)),tn(am,om,""),tn(am,om,"esm2020");const hm=Zt({apiKey:"AIzaSyBsGpZc-Ir3BDvWOo8oW69B1ztWmsqUMMY",authDomain:"blog-2d2b8.firebaseapp.com",projectId:"blog-2d2b8",storageBucket:"blog-2d2b8.firebasestorage.app",messagingSenderId:"200217285010",appId:"1:200217285010:web:33e2803380785b2c95314b"}),dm=function(e=en()){const t=Gt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Gt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Ce(n.getOptions(),t??{}))return e;vn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:oi,persistence:[jr,or,cr]}),s=ye("authTokenSyncURL");if(s&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(s,location.origin);if(location.origin===e.origin){const t=(r=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>hi)return;const s=null==t?void 0:t.token;di!==s&&(di=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});!function(e,t,n){Me(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,s){Me(e).onIdTokenChanged(t,n,s)}(n,e=>t(e))}}var r;const i=pe("auth");return i&&Ls(n,`http://${i}`),n}(hm),fm=function(e){const t="object"==typeof e?e:en(),n="string"==typeof e?e:ro,s=Gt(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const e=me("firestore");e&&function(e,t,n,s={}){var r;e=ga(e,Yd);const i=be(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;i&&(xe(`https://${l}`),je("Firestore",!0)),a.host!==Wd&&a.host!==l&&Ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:i,emulatorOptions:s};if(!Ce(c,o)&&(e._setSettings(c),s.mockUserToken)){let t,n;if("string"==typeof s.mockUserToken)t=s.mockUserToken,n=Si.MOCK_USER;else{t=we(s.mockUserToken,null==(r=e._app)?void 0:r.options.projectId);const i=s.mockUserToken.sub||s.mockUserToken.user_id;if(!i)throw new Vi(Fi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Si(i)}e._authCredentials=new $i(new zi(t,n))}}(s,...e)}return s}(hm),pm=function(e=en(),t){const n=Gt(e=Me(e),lm).getImmediate({identifier:t}),s=me("storage");return s&&function(e,t,n,s={}){!function(e,t,n,s={}){e.host=`${t}:${n}`;const r=be(t);r&&(xe(`https://${e.host}/b`),je("Storage",!0)),e._isUsingEmulator=!0,e._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(e._overrideAuthToken="string"==typeof i?i:we(i,e.app.options.projectId))}(e,t,n,s)}(n,...s),n}(hm),mm=e.createContext(void 0),gm=()=>{const t=e.useContext(mm);if(void 0===t)throw new Error("useAuth must be used within an AuthProvider");return t},ym=({children:t})=>{const[n,s]=e.useState(null),[r,i]=e.useState(!0);e.useEffect(()=>{var e,t,n;return e=e=>{s(e),i(!1)},Me(dm).onAuthStateChanged(e,t,n)},[]);const a={currentUser:n,login:async(e,t)=>{await sr(dm,e,t)},logout:async()=>{var e;await(e=dm,Me(e).signOut())},loading:r};return _.jsx(mm.Provider,{value:a,children:!r&&t})},vm=({children:e})=>{const{currentUser:t}=gm();return t?_.jsx(_.Fragment,{children:e}):_.jsx(a,{to:"/adminblog"})},bm="blogs",xm=e=>e.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),wm=async(e,t)=>{const n=(s=pm,r=`blog-images/${t}-${Date.now()}`,sm(s=Me(s),r));var s,r;const i=await cm(n,e);return await(a=i.ref,tm(a=Me(a)));var a},Nm=async e=>{const t=xm(e.title);let n="";e.image&&(n=await wm(e.image,t));const s={slug:t,title:e.title,author:e.author,publishDate:e.publishDate,status:e.status,imageUrl:n,content:e.content,excerpt:e.content.replace(/<[^>]*>/g,"").substring(0,150)+"..."};return(await function(e,t){const n=ga(e.firestore,af),s=tf(e),r=function(e,t){let n;return n=e?e.toFirestore(t):t,n}(e.converter,t);return tp(n,[xf(bf(e.firestore),"addDoc",s._key,r,null!==e.converter,{}).toMutation(s._key,Kl.exists(!1))]).then(()=>s)}(ef(fm,bm),s)).id},_m=async e=>{const t=tf(fm,bm,e);var n;await(n=t,tp(ga(n.firestore,af),[new ic(n._key,Kl.none())]))},jm=()=>{const[t,n]=e.useState([]),[s,i]=e.useState(!0),[a,o]=e.useState("");return e.useEffect(()=>{(async()=>{try{const e=await(async()=>{try{const e=Df(ef(fm,bm),qf("status","==","published"),Vf("publishDate","desc"));return(await Zf(e)).docs.map(e=>{const t=e.data();return{id:e.id,...t}})}catch(a){const t=Df(ef(fm,bm),qf("status","==","published"));return(await Zf(t)).docs.map(e=>{const t=e.data();return{id:e.id,...t}}).sort((e,t)=>new Date(t.publishDate).getTime()-new Date(e.publishDate).getTime())}})();n(e)}catch(e){o("Failed to load blog posts. Please try again later.")}finally{i(!1)}})()},[]),s?_.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh",paddingTop:"80px"},children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:_.jsx("span",{className:"visually-hidden",children:"Loading..."})}),_.jsx("p",{className:"text-muted",children:"Loading blog posts..."})]})}):_.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f8f9fa",paddingTop:"80px"},children:[_.jsx("section",{className:"py-5",style:{backgroundColor:"#336021"},children:_.jsx("div",{className:"container",children:_.jsx("div",{className:"row",children:_.jsx("div",{className:"col-lg-8 mx-auto text-center",children:_.jsxs("div",{className:"text-white",children:[_.jsx("h1",{className:"display-4 fw-bold mb-3",children:"Our Blog"}),_.jsx("p",{className:"lead mb-0",children:"Stay updated with the latest insights, trends, and innovations in renewable energy"})]})})})})}),_.jsxs("div",{className:"container py-5",children:[a&&_.jsxs("div",{className:"alert alert-danger d-flex align-items-center mb-4",role:"alert",children:[_.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),_.jsx("div",{children:a})]}),0!==t.length||a?_.jsx("div",{className:"row g-4",children:t.map(e=>_.jsx("div",{className:"col-lg-4 col-md-6",children:_.jsxs("div",{className:"card border-0 shadow-sm h-100 hover-lift",children:[e.imageUrl&&_.jsx("img",{src:e.imageUrl,alt:e.title,className:"card-img-top",style:{height:"200px",objectFit:"cover"}}),_.jsxs("div",{className:"card-body d-flex flex-column",children:[_.jsx("h5",{className:"card-title fw-bold mb-3",children:e.title}),_.jsx("p",{className:"card-text text-muted mb-3 flex-grow-1",children:e.excerpt||e.content.replace(/<[^>]*>/g,"").substring(0,150)+"..."}),_.jsxs("div",{className:"d-flex justify-content-between align-items-center text-sm text-muted mb-3",children:[_.jsxs("span",{children:[_.jsx("i",{className:"fas fa-user me-1"}),e.author]}),_.jsxs("span",{children:[_.jsx("i",{className:"fas fa-calendar me-1"}),new Date(e.publishDate).toLocaleDateString()]})]}),_.jsxs(r,{to:`/blogs/${e.slug}`,className:"btn btn-success",children:[_.jsx("i",{className:"fas fa-arrow-right me-2"}),"Read More"]})]})]})},e.id))}):_.jsxs("div",{className:"text-center py-5",children:[_.jsx("div",{className:"mb-4",children:_.jsx("i",{className:"fas fa-blog text-muted",style:{fontSize:"4rem"}})}),_.jsx("h3",{className:"text-muted mb-3",children:"No blog posts available yet"}),_.jsx("p",{className:"text-muted",children:"Check back soon for the latest updates and insights!"})]})]})]})},Em=()=>{const{slug:t}=i(),[n,s]=e.useState(null),[a,o]=e.useState(!0),[l,c]=e.useState(!1);return e.useEffect(()=>{(async()=>{if(t)try{const e=await(async e=>{const t=Df(ef(fm,bm),qf("slug","==",e)),n=await Zf(t);if(n.empty)return null;const s=n.docs[0];return{id:s.id,...s.data()}})(t);e?s(e):c(!0)}catch(e){c(!0)}finally{o(!1)}})()},[t]),a?_.jsx("div",{className:"min-h-screen flex items-center justify-center",children:_.jsx("div",{className:"text-xl",children:"Loading blog post..."})}):l||!n?_.jsx("div",{className:"min-h-screen flex items-center justify-center",children:_.jsxs("div",{className:"text-center",children:[_.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Blog Post Not Found"}),_.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"The blog post you're looking for doesn't exist."}),_.jsx(r,{to:"/blogs",className:"bg-blue-600 text-white px-6 py-3 rounded hover:bg-blue-700 transition-colors",children:"Back to Blogs"})]})}):_.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:_.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[_.jsx(r,{to:"/blogs",className:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-8",children:"â Back to Blogs"}),_.jsxs("article",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[n.imageUrl&&_.jsx("img",{src:n.imageUrl,alt:n.title,className:"w-full h-64 md:h-96 object-cover"}),_.jsxs("div",{className:"p-8",children:[_.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:n.title}),_.jsxs("div",{className:"flex items-center text-gray-600 mb-8 pb-8 border-b",children:[_.jsxs("span",{className:"mr-6",children:["By ",n.author]}),_.jsx("span",{children:new Date(n.publishDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),_.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:n.content}})]})]})]})})},km=()=>{const[t,n]=e.useState(""),[s,i]=e.useState(""),[a,l]=e.useState(""),[c,u]=e.useState(!1),{login:h}=gm(),d=o();return _.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:_.jsxs("div",{className:"max-w-md w-full space-y-8",children:[_.jsxs("div",{className:"text-center",children:[_.jsx(r,{to:"/",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-8",children:"â Back to Website"}),_.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Admin Login"}),_.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to manage your blog content"})]}),_.jsx("div",{className:"bg-white py-8 px-6 shadow rounded-lg",children:_.jsxs("form",{className:"space-y-6",onSubmit:async e=>{e.preventDefault();try{l(""),u(!0),await h(t,s),d("/admin/dashboard")}catch(n){l("Failed to log in. Please check your credentials.")}finally{u(!1)}},children:[a&&_.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:a}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),_.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Enter your email",value:t,onChange:e=>n(e.target.value)})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),_.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Enter your password",value:s,onChange:e=>i(e.target.value)})]}),_.jsx("div",{children:_.jsx("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:c?"Signing in...":"Sign in"})})]})}),_.jsx("div",{className:"text-center",children:_.jsx("p",{className:"text-xs text-gray-500",children:"Secure admin access only"})})]})})},Tm=()=>{const[t,n]=e.useState([]),[s,i]=e.useState(!0),{logout:a}=gm();e.useEffect(()=>{o()},[]);const o=async()=>{try{const e=await(async()=>{const e=Df(ef(fm,bm),Vf("publishDate","desc"));return(await Zf(e)).docs.map(e=>({id:e.id,...e.data()}))})();n(e)}catch(e){}finally{i(!1)}};if(s)return _.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:_.jsx("span",{className:"visually-hidden",children:"Loading..."})}),_.jsx("p",{className:"text-muted",children:"Loading dashboard..."})]})});const l=t.filter(e=>"published"===e.status).length,c=t.filter(e=>"draft"===e.status).length;return _.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f8f9fa",paddingTop:"80px"},children:[_.jsx("section",{className:"py-5",style:{backgroundColor:"#336021"},children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row align-items-center",children:[_.jsx("div",{className:"col-lg-8",children:_.jsxs("div",{className:"text-white",children:[_.jsx("h1",{className:"display-4 fw-bold mb-2",children:"Blog Dashboard"}),_.jsx("p",{className:"lead mb-0",children:"Manage your blog posts and content with ease"})]})}),_.jsx("div",{className:"col-lg-4 text-lg-end",children:_.jsxs("div",{className:"d-flex gap-2 justify-content-lg-end justify-content-start mt-3 mt-lg-0",children:[_.jsxs(r,{to:"/admin/blog/new",className:"btn btn-light btn-lg",children:[_.jsx("i",{className:"fas fa-plus me-2"}),"New Post"]}),_.jsxs(r,{to:"/admin/quotes",className:"btn btn-outline-light btn-lg",children:[_.jsx("i",{className:"fas fa-calculator me-2"}),"Quotes"]}),_.jsxs("button",{onClick:async()=>{try{await a()}catch(e){}},className:"btn btn-outline-light btn-lg",children:[_.jsx("i",{className:"fas fa-sign-out-alt me-2"}),"Logout"]})]})})]})})}),_.jsxs("div",{className:"container py-5",children:[_.jsxs("div",{className:"row g-4 mb-5",children:[_.jsx("div",{className:"col-md-4",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsx("div",{className:"card-body",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("div",{className:"flex-shrink-0",children:_.jsx("div",{className:"bg-primary bg-opacity-10 rounded-3 p-3",children:_.jsx("i",{className:"fas fa-file-alt text-primary fs-4"})})}),_.jsxs("div",{className:"flex-grow-1 ms-3",children:[_.jsx("h6",{className:"text-muted mb-1",children:"Total Posts"}),_.jsx("h3",{className:"mb-0 fw-bold",children:t.length})]})]})})})}),_.jsx("div",{className:"col-md-4",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsx("div",{className:"card-body",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("div",{className:"flex-shrink-0",children:_.jsx("div",{className:"bg-success bg-opacity-10 rounded-3 p-3",children:_.jsx("i",{className:"fas fa-check-circle text-success fs-4"})})}),_.jsxs("div",{className:"flex-grow-1 ms-3",children:[_.jsx("h6",{className:"text-muted mb-1",children:"Published"}),_.jsx("h3",{className:"mb-0 fw-bold text-success",children:l})]})]})})})}),_.jsx("div",{className:"col-md-4",children:_.jsx("div",{className:"card border-0 shadow-sm h-100",children:_.jsx("div",{className:"card-body",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("div",{className:"flex-shrink-0",children:_.jsx("div",{className:"bg-warning bg-opacity-10 rounded-3 p-3",children:_.jsx("i",{className:"fas fa-clock text-warning fs-4"})})}),_.jsxs("div",{className:"flex-grow-1 ms-3",children:[_.jsx("h6",{className:"text-muted mb-1",children:"Drafts"}),_.jsx("h3",{className:"mb-0 fw-bold text-warning",children:c})]})]})})})})]}),_.jsxs("div",{className:"card border-0 shadow-sm",children:[_.jsx("div",{className:"card-header bg-white border-bottom",children:_.jsx("h5",{className:"mb-0 fw-bold",children:"All Blog Posts"})}),_.jsx("div",{className:"card-body p-0",children:0===t.length?_.jsxs("div",{className:"text-center py-5",children:[_.jsx("div",{className:"mb-4",children:_.jsx("i",{className:"fas fa-file-alt text-muted",style:{fontSize:"4rem"}})}),_.jsx("h4",{className:"text-muted mb-3",children:"No blog posts yet"}),_.jsx("p",{className:"text-muted mb-4",children:"Get started by creating your first blog post"}),_.jsxs(r,{to:"/admin/blog/new",className:"btn btn-success btn-lg",children:[_.jsx("i",{className:"fas fa-plus me-2"}),"Create Your First Post"]})]}):_.jsx("div",{className:"table-responsive",children:_.jsxs("table",{className:"table table-hover mb-0",children:[_.jsx("thead",{className:"table-light",children:_.jsxs("tr",{children:[_.jsx("th",{scope:"col",className:"border-0",children:"Post"}),_.jsx("th",{scope:"col",className:"border-0",children:"Author"}),_.jsx("th",{scope:"col",className:"border-0",children:"Date"}),_.jsx("th",{scope:"col",className:"border-0",children:"Status"}),_.jsx("th",{scope:"col",className:"border-0 text-end",children:"Actions"})]})}),_.jsx("tbody",{children:t.map(e=>_.jsxs("tr",{children:[_.jsx("td",{className:"py-3",children:_.jsxs("div",{className:"d-flex align-items-center",children:[e.imageUrl?_.jsx("img",{src:e.imageUrl,alt:e.title,className:"rounded me-3",style:{width:"60px",height:"60px",objectFit:"cover"}}):_.jsx("div",{className:"bg-light rounded me-3 d-flex align-items-center justify-content-center",style:{width:"60px",height:"60px"},children:_.jsx("i",{className:"fas fa-image text-muted"})}),_.jsxs("div",{children:[_.jsx("h6",{className:"mb-1 fw-semibold",children:e.title}),_.jsxs("small",{className:"text-muted",children:[e.content.replace(/<[^>]*>/g,"").substring(0,80),"..."]})]})]})}),_.jsx("td",{className:"py-3",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("i",{className:"fas fa-user-circle text-muted me-2"}),e.author]})}),_.jsx("td",{className:"py-3",children:_.jsxs("div",{className:"d-flex align-items-center",children:[_.jsx("i",{className:"fas fa-calendar text-muted me-2"}),new Date(e.publishDate).toLocaleDateString()]})}),_.jsx("td",{className:"py-3",children:_.jsxs("span",{className:"badge "+("published"===e.status?"bg-success":"bg-warning text-dark"),children:[_.jsx("i",{className:`fas ${"published"===e.status?"fa-check-circle":"fa-clock"} me-1`}),e.status]})}),_.jsx("td",{className:"py-3 text-end",children:_.jsxs("div",{className:"btn-group",role:"group",children:[_.jsxs(r,{to:`/admin/blog/edit/${e.id}`,className:"btn btn-outline-primary btn-sm",children:[_.jsx("i",{className:"fas fa-edit me-1"}),"Edit"]}),_.jsxs("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this blog post?"))try{await _m(e),n(t.filter(t=>t.id!==e))}catch(s){alert("Error deleting blog post")}})(e.id),className:"btn btn-outline-danger btn-sm",children:[_.jsx("i",{className:"fas fa-trash me-1"}),"Delete"]})]})})]},e.id))})]})})})]})]})]})};var Sm=function(){this.__data__=[],this.size=0};var Om=function(e,t){return e===t||e!=e&&t!=t},Cm=Om;var Am=function(e,t){for(var n=e.length;n--;)if(Cm(e[n][0],t))return n;return-1},Im=Am,Pm=Array.prototype.splice;var Rm=Am;var Lm=Am;var Dm=Am;var Mm=Sm,qm=function(e){var t=this.__data__,n=Im(t,e);return!(n<0)&&(n==t.length-1?t.pop():Pm.call(t,n,1),--this.size,!0)},Um=function(e){var t=this.__data__,n=Rm(t,e);return n<0?void 0:t[n][1]},Fm=function(e){return Lm(this.__data__,e)>-1},Vm=function(e,t){var n=this.__data__,s=Dm(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this};function Bm(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Bm.prototype.clear=Mm,Bm.prototype.delete=qm,Bm.prototype.get=Um,Bm.prototype.has=Fm,Bm.prototype.set=Vm;var zm=Bm,Hm=zm;var $m=function(){this.__data__=new Hm,this.size=0};var Km=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var Wm=function(e){return this.__data__.get(e)};var Gm=function(e){return this.__data__.has(e)},Qm="object"==typeof l&&l&&l.Object===Object&&l,Ym=Qm,Xm="object"==typeof self&&self&&self.Object===Object&&self,Jm=Ym||Xm||Function("return this")(),Zm=Jm.Symbol,eg=Zm,tg=Object.prototype,ng=tg.hasOwnProperty,sg=tg.toString,rg=eg?eg.toStringTag:void 0;var ig=function(e){var t=ng.call(e,rg),n=e[rg];try{e[rg]=void 0;var s=!0}catch(i){}var r=sg.call(e);return s&&(t?e[rg]=n:delete e[rg]),r},ag=Object.prototype.toString;var og=ig,lg=function(e){return ag.call(e)},cg=Zm?Zm.toStringTag:void 0;var ug=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":cg&&cg in Object(e)?og(e):lg(e)};var hg=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},dg=ug,fg=hg;var pg,mg=function(e){if(!fg(e))return!1;var t=dg(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},gg=Jm["__core-js_shared__"],yg=(pg=/[^.]+$/.exec(gg&&gg.keys&&gg.keys.IE_PROTO||""))?"Symbol(src)_1."+pg:"";var vg=function(e){return!!yg&&yg in e},bg=Function.prototype.toString;var xg=function(e){if(null!=e){try{return bg.call(e)}catch(t){}try{return e+""}catch(t){}}return""},wg=mg,Ng=vg,_g=hg,jg=xg,Eg=/^\[object .+?Constructor\]$/,kg=Function.prototype,Tg=Object.prototype,Sg=kg.toString,Og=Tg.hasOwnProperty,Cg=RegExp("^"+Sg.call(Og).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ag=function(e){return!(!_g(e)||Ng(e))&&(wg(e)?Cg:Eg).test(jg(e))},Ig=function(e,t){return null==e?void 0:e[t]};var Pg=function(e,t){var n=Ig(e,t);return Ag(n)?n:void 0},Rg=Pg(Jm,"Map"),Lg=Pg(Object,"create"),Dg=Lg;var Mg=function(){this.__data__=Dg?Dg(null):{},this.size=0};var qg=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ug=Lg,Fg=Object.prototype.hasOwnProperty;var Vg=function(e){var t=this.__data__;if(Ug){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Fg.call(t,e)?t[e]:void 0},Bg=Lg,zg=Object.prototype.hasOwnProperty;var Hg=Lg;var $g=Mg,Kg=qg,Wg=Vg,Gg=function(e){var t=this.__data__;return Bg?void 0!==t[e]:zg.call(t,e)},Qg=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Hg&&void 0===t?"__lodash_hash_undefined__":t,this};function Yg(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Yg.prototype.clear=$g,Yg.prototype.delete=Kg,Yg.prototype.get=Wg,Yg.prototype.has=Gg,Yg.prototype.set=Qg;var Xg=Yg,Jg=zm,Zg=Rg;var ey=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var ty=function(e,t){var n=e.__data__;return ey(t)?n["string"==typeof t?"string":"hash"]:n.map},ny=ty;var sy=ty;var ry=ty;var iy=ty;var ay=function(){this.size=0,this.__data__={hash:new Xg,map:new(Zg||Jg),string:new Xg}},oy=function(e){var t=ny(this,e).delete(e);return this.size-=t?1:0,t},ly=function(e){return sy(this,e).get(e)},cy=function(e){return ry(this,e).has(e)},uy=function(e,t){var n=iy(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this};function hy(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}hy.prototype.clear=ay,hy.prototype.delete=oy,hy.prototype.get=ly,hy.prototype.has=cy,hy.prototype.set=uy;var dy=hy,fy=zm,py=Rg,my=dy;var gy=zm,yy=$m,vy=Km,by=Wm,xy=Gm,wy=function(e,t){var n=this.__data__;if(n instanceof fy){var s=n.__data__;if(!py||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new my(s)}return n.set(e,t),this.size=n.size,this};function Ny(e){var t=this.__data__=new gy(e);this.size=t.size}Ny.prototype.clear=yy,Ny.prototype.delete=vy,Ny.prototype.get=by,Ny.prototype.has=xy,Ny.prototype.set=wy;var _y=Ny;var jy=dy,Ey=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ky=function(e){return this.__data__.has(e)};function Ty(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new jy;++t<n;)this.add(e[t])}Ty.prototype.add=Ty.prototype.push=Ey,Ty.prototype.has=ky;var Sy=Ty,Oy=function(e,t){for(var n=-1,s=null==e?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1},Cy=function(e,t){return e.has(t)};var Ay=function(e,t,n,s,r,i){var a=1&n,o=e.length,l=t.length;if(o!=l&&!(a&&l>o))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var h=-1,d=!0,f=2&n?new Sy:void 0;for(i.set(e,t),i.set(t,e);++h<o;){var p=e[h],m=t[h];if(s)var g=a?s(m,p,h,t,e,i):s(p,m,h,e,t,i);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!Oy(t,function(e,t){if(!Cy(f,t)&&(p===e||r(p,e,n,s,i)))return f.push(t)})){d=!1;break}}else if(p!==m&&!r(p,m,n,s,i)){d=!1;break}}return i.delete(e),i.delete(t),d};var Iy=Jm.Uint8Array,Py=Om,Ry=Ay,Ly=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,s){n[++t]=[s,e]}),n},Dy=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},My=Zm?Zm.prototype:void 0,qy=My?My.valueOf:void 0;var Uy=function(e,t,n,s,r,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Iy(e),new Iy(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Py(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=Ly;case"[object Set]":var l=1&s;if(o||(o=Dy),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;s|=2,a.set(e,t);var u=Ry(o(e),o(t),s,r,i,a);return a.delete(e),u;case"[object Symbol]":if(qy)return qy.call(e)==qy.call(t)}return!1};var Fy=function(e,t){for(var n=-1,s=t.length,r=e.length;++n<s;)e[r+n]=t[n];return e},Vy=Array.isArray,By=Fy,zy=Vy;var Hy=function(e,t,n){var s=t(e);return zy(e)?s:By(s,n(e))};var $y=function(e,t){for(var n=-1,s=null==e?0:e.length,r=0,i=[];++n<s;){var a=e[n];t(a,n,e)&&(i[r++]=a)}return i},Ky=function(){return[]},Wy=Object.prototype.propertyIsEnumerable,Gy=Object.getOwnPropertySymbols,Qy=Gy?function(e){return null==e?[]:(e=Object(e),$y(Gy(e),function(t){return Wy.call(e,t)}))}:Ky;var Yy=function(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s};var Xy=function(e){return null!=e&&"object"==typeof e},Jy=ug,Zy=Xy;var ev,tv,nv,sv,rv,iv,av,ov,lv=function(e){return Zy(e)&&"[object Arguments]"==Jy(e)},cv=Xy,uv=Object.prototype,hv=uv.hasOwnProperty,dv=uv.propertyIsEnumerable,fv=lv(function(){return arguments}())?lv:function(e){return cv(e)&&hv.call(e,"callee")&&!dv.call(e,"callee")},pv={exports:{}};ev=pv,nv=Jm,sv=function(){return!1},rv=(tv=pv.exports)&&!tv.nodeType&&tv,iv=rv&&ev&&!ev.nodeType&&ev,av=iv&&iv.exports===rv?nv.Buffer:void 0,ov=(av?av.isBuffer:void 0)||sv,ev.exports=ov;var mv=pv.exports,gv=/^(?:0|[1-9]\d*)$/;var yv=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&gv.test(e))&&e>-1&&e%1==0&&e<t};var vv=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},bv=ug,xv=vv,wv=Xy,Nv={};Nv["[object Float32Array]"]=Nv["[object Float64Array]"]=Nv["[object Int8Array]"]=Nv["[object Int16Array]"]=Nv["[object Int32Array]"]=Nv["[object Uint8Array]"]=Nv["[object Uint8ClampedArray]"]=Nv["[object Uint16Array]"]=Nv["[object Uint32Array]"]=!0,Nv["[object Arguments]"]=Nv["[object Array]"]=Nv["[object ArrayBuffer]"]=Nv["[object Boolean]"]=Nv["[object DataView]"]=Nv["[object Date]"]=Nv["[object Error]"]=Nv["[object Function]"]=Nv["[object Map]"]=Nv["[object Number]"]=Nv["[object Object]"]=Nv["[object RegExp]"]=Nv["[object Set]"]=Nv["[object String]"]=Nv["[object WeakMap]"]=!1;var _v=function(e){return wv(e)&&xv(e.length)&&!!Nv[bv(e)]};var jv=function(e){return function(t){return e(t)}},Ev={exports:{}};!function(e,t){var n=Qm,s=t&&!t.nodeType&&t,r=s&&e&&!e.nodeType&&e,i=r&&r.exports===s&&n.process,a=function(){try{var e=r&&r.require&&r.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=a}(Ev,Ev.exports);var kv=Ev.exports,Tv=_v,Sv=jv,Ov=kv&&kv.isTypedArray,Cv=Ov?Sv(Ov):Tv,Av=Yy,Iv=fv,Pv=Vy,Rv=mv,Lv=yv,Dv=Cv,Mv=Object.prototype.hasOwnProperty;var qv=function(e,t){var n=Pv(e),s=!n&&Iv(e),r=!n&&!s&&Rv(e),i=!n&&!s&&!r&&Dv(e),a=n||s||r||i,o=a?Av(e.length,String):[],l=o.length;for(var c in e)!t&&!Mv.call(e,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Lv(c,l))||o.push(c);return o},Uv=Object.prototype;var Fv=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Uv)};var Vv=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),Bv=Fv,zv=Vv,Hv=Object.prototype.hasOwnProperty;var $v=mg,Kv=vv;var Wv=qv,Gv=function(e){if(!Bv(e))return zv(e);var t=[];for(var n in Object(e))Hv.call(e,n)&&"constructor"!=n&&t.push(n);return t},Qv=function(e){return null!=e&&Kv(e.length)&&!$v(e)};var Yv=Hy,Xv=Qy,Jv=function(e){return Qv(e)?Wv(e):Gv(e)};var Zv=function(e){return Yv(e,Jv,Xv)},eb=Object.prototype.hasOwnProperty;var tb=function(e,t,n,s,r,i){var a=1&n,o=Zv(e),l=o.length;if(l!=Zv(t).length&&!a)return!1;for(var c=l;c--;){var u=o[c];if(!(a?u in t:eb.call(t,u)))return!1}var h=i.get(e),d=i.get(t);if(h&&d)return h==t&&d==e;var f=!0;i.set(e,t),i.set(t,e);for(var p=a;++c<l;){var m=e[u=o[c]],g=t[u];if(s)var y=a?s(g,m,u,t,e,i):s(m,g,u,e,t,i);if(!(void 0===y?m===g||r(m,g,n,s,i):y)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(f=!1)}return i.delete(e),i.delete(t),f},nb=Pg(Jm,"DataView"),sb=Rg,rb=Pg(Jm,"Promise"),ib=Pg(Jm,"Set"),ab=Pg(Jm,"WeakMap"),ob=ug,lb=xg,cb="[object Map]",ub="[object Promise]",hb="[object Set]",db="[object WeakMap]",fb="[object DataView]",pb=lb(nb),mb=lb(sb),gb=lb(rb),yb=lb(ib),vb=lb(ab),bb=ob;(nb&&bb(new nb(new ArrayBuffer(1)))!=fb||sb&&bb(new sb)!=cb||rb&&bb(rb.resolve())!=ub||ib&&bb(new ib)!=hb||ab&&bb(new ab)!=db)&&(bb=function(e){var t=ob(e),n="[object Object]"==t?e.constructor:void 0,s=n?lb(n):"";if(s)switch(s){case pb:return fb;case mb:return cb;case gb:return ub;case yb:return hb;case vb:return db}return t});var xb=_y,wb=Ay,Nb=Uy,_b=tb,jb=bb,Eb=Vy,kb=mv,Tb=Cv,Sb="[object Arguments]",Ob="[object Array]",Cb="[object Object]",Ab=Object.prototype.hasOwnProperty;var Ib=function(e,t,n,s,r,i){var a=Eb(e),o=Eb(t),l=a?Ob:jb(e),c=o?Ob:jb(t),u=(l=l==Sb?Cb:l)==Cb,h=(c=c==Sb?Cb:c)==Cb,d=l==c;if(d&&kb(e)){if(!kb(t))return!1;a=!0,u=!1}if(d&&!u)return i||(i=new xb),a||Tb(e)?wb(e,t,n,s,r,i):Nb(e,t,l,n,s,r,i);if(!(1&n)){var f=u&&Ab.call(e,"__wrapped__"),p=h&&Ab.call(t,"__wrapped__");if(f||p){var m=f?e.value():e,g=p?t.value():t;return i||(i=new xb),r(m,g,n,s,i)}}return!!d&&(i||(i=new xb),_b(e,t,n,s,r,i))},Pb=Xy;var Rb=function e(t,n,s,r,i){return t===n||(null==t||null==n||!Pb(t)&&!Pb(n)?t!=t&&n!=n:Ib(t,n,s,r,e,i))},Lb=Rb;var Db,Mb=function(e,t){return Lb(e,t)},qb={exports:{}};"undefined"!=typeof self&&self,Db=function(){return function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=109)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=n(17),r=n(18),i=n(19),a=n(45),o=n(46),l=n(47),c=n(48),u=n(49),h=n(12),d=n(32),f=n(33),p=n(31),m=n(1),g={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:s.default,Format:r.default,Leaf:i.default,Embed:c.default,Scroll:a.default,Block:l.default,Inline:o.default,Text:u.default,Attributor:{Attribute:h.default,Class:d.default,Style:f.default,Store:p.default}};t.default=g},function(e,t,n){var s,r=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=this;return t="[Parchment] "+t,(n=e.call(this,t)||this).message=t,n.name=n.constructor.name,n}return r(t,e),t}(Error);t.ParchmentError=i;var a,o,l={},c={},u={},h={};function d(e,t){var n;if(void 0===t&&(t=a.ANY),"string"==typeof e)n=h[e]||l[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)n=h.text;else if("number"==typeof e)e&a.LEVEL&a.BLOCK?n=h.block:e&a.LEVEL&a.INLINE&&(n=h.inline);else if(e instanceof HTMLElement){var s=(e.getAttribute("class")||"").split(/\s+/);for(var r in s)if(n=c[s[r]])break;n=n||u[e.tagName]}return null==n?null:t&a.LEVEL&n.scope&&t&a.TYPE&n.scope?n:null}t.DATA_KEY="__blot",(o=a=t.Scope||(t.Scope={}))[o.TYPE=3]="TYPE",o[o.LEVEL=12]="LEVEL",o[o.ATTRIBUTE=13]="ATTRIBUTE",o[o.BLOT=14]="BLOT",o[o.INLINE=7]="INLINE",o[o.BLOCK=11]="BLOCK",o[o.BLOCK_BLOT=10]="BLOCK_BLOT",o[o.INLINE_BLOT=6]="INLINE_BLOT",o[o.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",o[o.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",o[o.ANY=15]="ANY",t.create=function(e,t){var n=d(e);if(null==n)throw new i("Unable to create "+e+" blot");var s=n,r=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:s.create(t);return new s(r,t)},t.find=function e(n,s){return void 0===s&&(s=!1),null==n?null:null!=n[t.DATA_KEY]?n[t.DATA_KEY].blot:s?e(n.parentNode,s):null},t.query=d,t.register=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length>1)return t.map(function(t){return e(t)});var s=t[0];if("string"!=typeof s.blotName&&"string"!=typeof s.attrName)throw new i("Invalid definition");if("abstract"===s.blotName)throw new i("Cannot register abstract class");return h[s.blotName||s.attrName]=s,"string"==typeof s.keyName?l[s.keyName]=s:(null!=s.className&&(c[s.className]=s),null!=s.tagName&&(Array.isArray(s.tagName)?s.tagName=s.tagName.map(function(e){return e.toUpperCase()}):s.tagName=s.tagName.toUpperCase(),(Array.isArray(s.tagName)?s.tagName:[s.tagName]).forEach(function(e){null!=u[e]&&null!=s.className||(u[e]=s)}))),s}},function(e,t,n){var s=n(51),r=n(11),i=n(3),a=n(20),o=String.fromCharCode(0),l=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};l.prototype.insert=function(e,t){var n={};return 0===e.length?this:(n.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n))},l.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},l.prototype.retain=function(e,t){if(e<=0)return this;var n={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n)},l.prototype.push=function(e){var t=this.ops.length,n=this.ops[t-1];if(e=i(!0,{},e),"object"==typeof n){if("number"==typeof e.delete&&"number"==typeof n.delete)return this.ops[t-1]={delete:n.delete+e.delete},this;if("number"==typeof n.delete&&null!=e.insert&&(t-=1,"object"!=typeof(n=this.ops[t-1])))return this.ops.unshift(e),this;if(r(e.attributes,n.attributes)){if("string"==typeof e.insert&&"string"==typeof n.insert)return this.ops[t-1]={insert:n.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof n.retain)return this.ops[t-1]={retain:n.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],n=[];return this.forEach(function(s){(e(s)?t:n).push(s)}),[t,n]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce(function(e,t){return t.insert?e+a.length(t):t.delete?e-t.delete:e},0)},l.prototype.length=function(){return this.reduce(function(e,t){return e+a.length(t)},0)},l.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var n=[],s=a.iterator(this.ops),r=0;r<t&&s.hasNext();){var i;r<e?i=s.next(e-r):(i=s.next(t-r),n.push(i)),r+=a.length(i)}return new l(n)},l.prototype.compose=function(e){var t=a.iterator(this.ops),n=a.iterator(e.ops),s=[],i=n.peek();if(null!=i&&"number"==typeof i.retain&&null==i.attributes){for(var o=i.retain;"insert"===t.peekType()&&t.peekLength()<=o;)o-=t.peekLength(),s.push(t.next());i.retain-o>0&&n.next(i.retain-o)}for(var c=new l(s);t.hasNext()||n.hasNext();)if("insert"===n.peekType())c.push(n.next());else if("delete"===t.peekType())c.push(t.next());else{var u=Math.min(t.peekLength(),n.peekLength()),h=t.next(u),d=n.next(u);if("number"==typeof d.retain){var f={};"number"==typeof h.retain?f.retain=u:f.insert=h.insert;var p=a.attributes.compose(h.attributes,d.attributes,"number"==typeof h.retain);if(p&&(f.attributes=p),c.push(f),!n.hasNext()&&r(c.ops[c.ops.length-1],f)){var m=new l(t.rest());return c.concat(m).chop()}}else"number"==typeof d.delete&&"number"==typeof h.retain&&c.push(d)}return c.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var n=[this,e].map(function(t){return t.map(function(n){if(null!=n.insert)return"string"==typeof n.insert?n.insert:o;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")}).join("")}),i=new l,c=s(n[0],n[1],t),u=a.iterator(this.ops),h=a.iterator(e.ops);return c.forEach(function(e){for(var t=e[1].length;t>0;){var n=0;switch(e[0]){case s.INSERT:n=Math.min(h.peekLength(),t),i.push(h.next(n));break;case s.DELETE:n=Math.min(t,u.peekLength()),u.next(n),i.delete(n);break;case s.EQUAL:n=Math.min(u.peekLength(),h.peekLength(),t);var o=u.next(n),l=h.next(n);r(o.insert,l.insert)?i.retain(n,a.attributes.diff(o.attributes,l.attributes)):i.push(l).delete(n)}t-=n}}),i.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var n=a.iterator(this.ops),s=new l,r=0;n.hasNext();){if("insert"!==n.peekType())return;var i=n.peek(),o=a.length(i)-n.peekLength(),c="string"==typeof i.insert?i.insert.indexOf(t,o)-o:-1;if(c<0)s.push(n.next());else if(c>0)s.push(n.next(c));else{if(!1===e(s,n.next(1).attributes||{},r))return;r+=1,s=new l}}s.length()>0&&e(s,{},r)},l.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var n=a.iterator(this.ops),s=a.iterator(e.ops),r=new l;n.hasNext()||s.hasNext();)if("insert"!==n.peekType()||!t&&"insert"===s.peekType())if("insert"===s.peekType())r.push(s.next());else{var i=Math.min(n.peekLength(),s.peekLength()),o=n.next(i),c=s.next(i);if(o.delete)continue;c.delete?r.push(c):r.retain(i,a.attributes.transform(o.attributes,c.attributes,t))}else r.retain(a.length(n.next()));return r.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var n=a.iterator(this.ops),s=0;n.hasNext()&&s<=e;){var r=n.peekLength(),i=n.peekType();n.next(),"delete"!==i?("insert"===i&&(s<e||!t)&&(e+=r),s+=r):e-=Math.min(r,e-s)}return e},e.exports=l},function(e,t){var n=Object.prototype.hasOwnProperty,s=Object.prototype.toString,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===s.call(e)},o=function(e){if(!e||"[object Object]"!==s.call(e))return!1;var t,r=n.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!i)return!1;for(t in e);return void 0===t||n.call(e,t)},l=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!n.call(e,t))return;if(i)return i(e,t).value}return e[t]};e.exports=function e(){var t,n,s,r,i,u,h=arguments[0],d=1,f=arguments.length,p=!1;for("boolean"==typeof h&&(p=h,h=arguments[1]||{},d=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});d<f;++d)if(null!=(t=arguments[d]))for(n in t)s=c(h,n),h!==(r=c(t,n))&&(p&&r&&(o(r)||(i=a(r)))?(i?(i=!1,u=s&&a(s)?s:[]):u=s&&o(s)?s:{},l(h,{name:n,newValue:e(p,u,r)})):void 0!==r&&l(h,{name:n,newValue:r}));return h}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),r=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},i=h(n(3)),a=h(n(2)),o=h(n(0)),l=h(n(16)),c=h(n(6)),u=h(n(7));function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),s(t,[{key:"attach",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new o.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new a.default).insert(this.value(),(0,i.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var n=o.default.query(e,o.default.Scope.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,t)}},{key:"formatAt",value:function(e,t,n,s){this.format(n,s)}},{key:"insertAt",value:function(e,n,s){if("string"==typeof n&&n.endsWith("\n")){var i=o.default.create(g.blotName);this.parent.insertBefore(i,0===e?this:this.next),i.insertAt(0,n.slice(0,-1))}else r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,s)}}]),t}(o.default.Embed);m.scope=o.default.Scope.BLOCK_BLOT;var g=function(e){function t(e){d(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cache={},n}return p(t,e),s(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(o.default.Leaf).reduce(function(e,t){return 0===t.length()?e:e.insert(t.value(),y(t))},new a.default).insert("\n",y(this))),this.cache.delta}},{key:"deleteAt",value:function(e,n){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,n),this.cache={}}},{key:"formatAt",value:function(e,n,s,i){n<=0||(o.default.query(s,o.default.Scope.BLOCK)?e+n===this.length()&&this.format(s,i):r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(n,this.length()-e-1),s,i),this.cache={})}},{key:"insertAt",value:function(e,n,s){if(null!=s)return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,s);if(0!==n.length){var i=n.split("\n"),a=i.shift();a.length>0&&(e<this.length()-1||null==this.children.tail?r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});var o=this;i.reduce(function(e,t){return(o=o.split(e,!0)).insertAt(0,t),t.length},e+a.length)}}},{key:"insertBefore",value:function(e,n){var s=this.children.head;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n),s instanceof l.default&&s.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,n){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,n),this.cache={}}},{key:"optimize",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(0===e||e>=this.length()-1)){var s=this.clone();return 0===e?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}var i=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,n);return this.cache={},i}}]),t}(o.default.Block);function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"==typeof e.formats&&(t=(0,i.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:y(e.parent,t))}g.blotName="block",g.tagName="P",g.defaultChild="break",g.allowedChildren=[c.default,o.default.Embed,u.default],t.bubbleFormats=y,t.BlockEmbed=m,t.default=g},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],s=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);s=!0);}catch(l){r=!0,i=l}finally{try{!s&&o.return&&o.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();n(50);var a=g(n(2)),o=g(n(14)),l=g(n(8)),c=g(n(9)),u=g(n(0)),h=n(15),d=g(h),f=g(n(3)),p=g(n(10)),m=g(n(34));function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,p.default)("quill"),b=function(){function e(t){var n=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=x(t,s),this.container=this.options.container,null==this.container)return v.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=u.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new o.default(this.scroll),this.selection=new d.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,function(e){e===l.default.events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())}),this.emitter.on(l.default.events.SCROLL_UPDATE,function(e,t){var s=n.selection.lastRange,r=s&&0===s.length?s.index:void 0;w.call(n,function(){return n.editor.update(null,t,r)},e)});var i=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+r+"<p><br></p></div>");this.setContents(i),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return i(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),p.default.level(e)}},{key:"find",value:function(e){return e.__quill||u.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&v.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var n=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e){var r=e.attrName||e.blotName;"string"==typeof r?this.register("formats/"+r,e,t):Object.keys(e).forEach(function(s){n.register(s,e[s],t)})}else null==this.imports[e]||s||v.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?u.default.register(t):e.startsWith("modules")&&"function"==typeof t.register&&t.register()}}]),i(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e){var n=e;(e=document.createElement("div")).classList.add(n)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,n){var s=this,i=N(e,t,n),a=r(i,4);return e=a[0],t=a[1],n=a[3],w.call(this,function(){return s.editor.deleteText(e,t)},n,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return w.call(this,function(){var s=n.getSelection(!0),r=new a.default;if(null==s)return r;if(u.default.query(e,u.default.Scope.BLOCK))r=n.editor.formatLine(s.index,s.length,y({},e,t));else{if(0===s.length)return n.selection.format(e,t),r;r=n.editor.formatText(s.index,s.length,y({},e,t))}return n.setSelection(s,l.default.sources.SILENT),r},s)}},{key:"formatLine",value:function(e,t,n,s,i){var a,o=this,l=N(e,t,n,s,i),c=r(l,4);return e=c[0],t=c[1],a=c[2],i=c[3],w.call(this,function(){return o.editor.formatLine(e,t,a)},i,e,0)}},{key:"formatText",value:function(e,t,n,s,i){var a,o=this,l=N(e,t,n,s,i),c=r(l,4);return e=c[0],t=c[1],a=c[2],i=c[3],w.call(this,function(){return o.editor.formatText(e,t,a)},i,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=void 0;n="number"==typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var s=this.container.getBoundingClientRect();return{bottom:n.bottom-s.top,height:n.height,left:n.left-s.left,right:n.right-s.left,top:n.top-s.top,width:n.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=N(e,t),s=r(n,2);return e=s[0],t=s[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=N(e,t),s=r(n,2);return e=s[0],t=s[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,n,s){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return w.call(this,function(){return r.editor.insertEmbed(t,n,s)},i,t)}},{key:"insertText",value:function(e,t,n,s,i){var a,o=this,l=N(e,0,n,s,i),c=r(l,4);return e=c[0],a=c[2],i=c[3],w.call(this,function(){return o.editor.insertText(e,t,a)},i,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,n){this.clipboard.dangerouslyPasteHTML(e,t,n)}},{key:"removeFormat",value:function(e,t,n){var s=this,i=N(e,t,n),a=r(i,4);return e=a[0],t=a[1],n=a[3],w.call(this,function(){return s.editor.removeFormat(e,t)},n,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,function(){e=new a.default(e);var n=t.getLength(),s=t.editor.deleteText(0,n),r=t.editor.applyDelta(e),i=r.ops[r.ops.length-1];return null!=i&&"string"==typeof i.insert&&"\n"===i.insert[i.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),r.delete(1)),s.compose(r)},n)}},{key:"setSelection",value:function(t,n,s){if(null==t)this.selection.setRange(null,n||e.sources.API);else{var i=N(t,n,s),a=r(i,4);t=a[0],n=a[1],s=a[3],this.selection.setRange(new h.Range(t,n),s),s!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,n=(new a.default).insert(e);return this.setContents(n,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,function(){return e=new a.default(e),t.editor.applyDelta(e,n)},n,!0)}}]),e}();function x(e,t){if((t=(0,f.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==b.DEFAULTS.theme){if(t.theme=b.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=m.default;var n=(0,f.default)(!0,{},t.theme.DEFAULTS);[n,t].forEach(function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach(function(t){!0===e.modules[t]&&(e.modules[t]={})})});var s=Object.keys(n.modules).concat(Object.keys(t.modules)).reduce(function(e,t){var n=b.import("modules/"+t);return null==n?v.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=n.DEFAULTS||{},e},{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,f.default)(!0,{},b.DEFAULTS,{modules:s},n,t),["bounds","container","scrollingContainer"].forEach(function(e){"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))}),t.modules=Object.keys(t.modules).reduce(function(e,n){return t.modules[n]&&(e[n]=t.modules[n]),e},{}),t}function w(e,t,n,s){if(this.options.strict&&!this.isEnabled()&&t===l.default.sources.USER)return new a.default;var r=null==n?null:this.getSelection(),i=this.editor.delta,o=e();if(null!=r&&(!0===n&&(n=r.index),null==s?r=_(r,o,t):0!==s&&(r=_(r,n,s,t)),this.setSelection(r,l.default.sources.SILENT)),o.length()>0){var c,u,h=[l.default.events.TEXT_CHANGE,o,i,t];(c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(h)),t!==l.default.sources.SILENT&&(u=this.emitter).emit.apply(u,h)}return o}function N(e,t,n,r,i){var a={};return"number"==typeof e.index&&"number"==typeof e.length?"number"!=typeof t?(i=r,r=n,n=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!=typeof t&&(i=r,r=n,n=t,t=0),"object"===(void 0===n?"undefined":s(n))?(a=n,i=r):"string"==typeof n&&(null!=r?a[n]=r:i=n),[e,t,a,i=i||l.default.sources.API]}function _(e,t,n,s){if(null==e)return null;var i=void 0,o=void 0;if(t instanceof a.default){var c=[e.index,e.index+e.length].map(function(e){return t.transformPosition(e,s!==l.default.sources.USER)}),u=r(c,2);i=u[0],o=u[1]}else{var d=[e.index,e.index+e.length].map(function(e){return e<t||e===t&&s===l.default.sources.USER?e:n>=0?e+n:Math.max(t,e+n)}),f=r(d,2);i=f[0],o=f[1]}return new h.Range(i,o-i)}b.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},b.events=l.default.events,b.sources=l.default.sources,b.version="1.3.7",b.imports={delta:a.default,parchment:u.default,"core/module":c.default,"core/theme":m.default},t.expandConfig=x,t.overload=N,t.default=b},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),r=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},i=o(n(7)),a=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"formatAt",value:function(e,n,s,i){if(t.compare(this.statics.blotName,s)<0&&a.default.query(s,a.default.Scope.BLOT)){var o=this.isolate(e,n);i&&o.wrap(s,i)}else r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,n,s,i)}},{key:"optimize",value:function(e){if(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}],[{key:"compare",value:function(e,n){var s=t.order.indexOf(e),r=t.order.indexOf(n);return s>=0||r>=0?s-r:e===n?0:e<n?-1:1}}]),t}(a.default.Inline);l.allowedChildren=[l,a.default.Embed,i.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,r=n(0),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((s=r)&&s.__esModule?s:{default:s}).default.Text);t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),r=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},i=a(n(54));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,a(n(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(e){document.addEventListener(e,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(e){var n;e.__quill&&e.__quill.emitter&&(n=e.__quill.emitter).handleDOM.apply(n,t)})})});var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",o.error),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"emit",value:function(){o.log.apply(o,arguments),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];(this.listeners[e.type]||[]).forEach(function(t){var s=t.node,r=t.handler;(e.target===s||s.contains(e.target))&&r.apply(void 0,[e].concat(n))})}},{key:"listenDOM",value:function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:n})}}]),t}(i.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},t.default=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=n};s.DEFAULTS={},t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=["error","warn","log","info"],r="warn";function i(e){if(s.indexOf(e)<=s.indexOf(r)){for(var t,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(t=console)[e].apply(t,i)}}function a(e){return s.reduce(function(t,n){return t[n]=i.bind(console,n,e),t},{})}i.level=a.level=function(e){r=e},t.default=a},function(e,t,n){var s=Array.prototype.slice,r=n(52),i=n(53),a=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var c,u;if(o(e)||o(t))return!1;if(e.prototype!==t.prototype)return!1;if(i(e))return!!i(t)&&(e=s.call(e),t=s.call(t),a(e,t,n));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var h=r(e),d=r(t)}catch(f){return!1}if(h.length!=d.length)return!1;for(h.sort(),d.sort(),c=h.length-1;c>=0;c--)if(h[c]!=d[c])return!1;for(c=h.length-1;c>=0;c--)if(u=h[c],!a(e[u],t[u],n))return!1;return typeof e==typeof t}(e,t,n))};function o(e){return null==e}function l(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||e.length>0&&"number"!=typeof e[0])}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),r=function(){function e(e,t,n){void 0===n&&(n={}),this.attrName=e,this.keyName=t;var r=s.Scope.TYPE&s.Scope.ATTRIBUTE;null!=n.scope?this.scope=n.scope&s.Scope.LEVEL|r:this.scope=s.Scope.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,function(e){return e.name})},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=s.query(e,s.Scope.BLOT&(this.scope|s.Scope.TYPE))&&(null==this.whitelist||("string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var s=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],s=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);s=!0);}catch(l){r=!0,i=l}finally{try{!s&&o.return&&o.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},a=h(n(2)),o=h(n(0)),l=h(n(4)),c=h(n(6)),u=h(n(7));function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),t}(c.default);m.blotName="code",m.tagName="CODE";var g=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),r(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce(function(t,n){return t.insert(n).insert("\n",e.formats())},new a.default)}},{key:"format",value:function(e,n){if(e!==this.statics.blotName||!n){var r=this.descendant(u.default,this.length()-1),a=s(r,1)[0];null!=a&&a.deleteAt(a.length()-1,1),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}},{key:"formatAt",value:function(e,n,s,r){if(0!==n&&null!=o.default.query(s,o.default.Scope.BLOCK)&&(s!==this.statics.blotName||r!==this.statics.formats(this.domNode))){var i=this.newlineIndex(e);if(!(i<0||i>=e+n)){var a=this.newlineIndex(e,!0)+1,l=i-a+1,c=this.isolate(a,l),u=c.next;c.format(s,r),u instanceof t&&u.formatAt(0,e-a+n-l,s,r)}}}},{key:"insertAt",value:function(e,t,n){if(null==n){var r=this.descendant(u.default,e),i=s(r,2),a=i[0],o=i[1];a.insertAt(o,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var t=this.domNode.textContent.slice(e).indexOf("\n");return t>-1?e+t:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(o.default.create("text","\n")),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===n.statics.formats(n.domNode)&&(n.optimize(e),n.moveChildren(this),n.remove())}},{key:"replace",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(e){var t=o.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof o.default.Embed?t.remove():t.unwrap()})}}],[{key:"create",value:function(e){var n=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return n.setAttribute("spellcheck",!1),n}},{key:"formats",value:function(){return!0}}]),t}(l.default);g.blotName="code-block",g.tagName="PRE",g.TAB="  ",t.Code=m,t.default=g},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],s=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);s=!0);}catch(l){r=!0,i=l}finally{try{!s&&o.return&&o.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),a=y(n(2)),o=y(n(20)),l=y(n(0)),c=y(n(13)),u=y(n(24)),h=n(4),d=y(h),f=y(n(16)),p=y(n(21)),m=y(n(11)),g=y(n(3));function y(e){return e&&e.__esModule?e:{default:e}}var v=/^[ -~]*$/,b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return i(e,[{key:"applyDelta",value:function(e){var t=this,n=!1;this.scroll.update();var i=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce(function(e,t){if(1===t.insert){var n=(0,p.default)(t.attributes);return delete n.image,e.insert({image:t.attributes.image},n)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,p.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"==typeof t.insert){var s=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(s,t.attributes)}return e.push(t)},new a.default)}(e)).reduce(function(e,a){var c=a.retain||a.delete||a.insert.length||1,u=a.attributes||{};if(null!=a.insert){if("string"==typeof a.insert){var f=a.insert;f.endsWith("\n")&&n&&(n=!1,f=f.slice(0,-1)),e>=i&&!f.endsWith("\n")&&(n=!0),t.scroll.insertAt(e,f);var p=t.scroll.line(e),m=r(p,2),y=m[0],v=m[1],b=(0,g.default)({},(0,h.bubbleFormats)(y));if(y instanceof d.default){var x=y.descendant(l.default.Leaf,v),w=r(x,1)[0];b=(0,g.default)(b,(0,h.bubbleFormats)(w))}u=o.default.attributes.diff(b,u)||{}}else if("object"===s(a.insert)){var N=Object.keys(a.insert)[0];if(null==N)return e;t.scroll.insertAt(e,N,a.insert[N])}i+=c}return Object.keys(u).forEach(function(n){t.scroll.formatAt(e,c,n,u[n])}),e+c},0),e.reduce(function(e,n){return"number"==typeof n.delete?(t.scroll.deleteAt(e,n.delete),e):e+(n.retain||n.insert.length||1)},0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new a.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(s).forEach(function(r){if(null==n.scroll.whitelist||n.scroll.whitelist[r]){var i=n.scroll.lines(e,Math.max(t,1)),a=t;i.forEach(function(t){var i=t.length();if(t instanceof c.default){var o=e-t.offset(n.scroll),l=t.newlineIndex(o+a)-o+1;t.formatAt(o,l,r,s[r])}else t.format(r,s[r]);a-=i})}}),this.scroll.optimize(),this.update((new a.default).retain(e).retain(t,(0,p.default)(s)))}},{key:"formatText",value:function(e,t){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(s).forEach(function(r){n.scroll.formatAt(e,t,r,s[r])}),this.update((new a.default).retain(e).retain(t,(0,p.default)(s)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(e,t){return e.concat(t.delta())},new a.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],s=[];0===t?this.scroll.path(e).forEach(function(e){var t=r(e,1)[0];t instanceof d.default?n.push(t):t instanceof l.default.Leaf&&s.push(t)}):(n=this.scroll.lines(e,t),s=this.scroll.descendants(l.default.Leaf,e,t));var i=[n,s].map(function(e){if(0===e.length)return{};for(var t=(0,h.bubbleFormats)(e.shift());Object.keys(t).length>0;){var n=e.shift();if(null==n)return t;t=x((0,h.bubbleFormats)(n),t)}return t});return g.default.apply(g.default,i)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter(function(e){return"string"==typeof e.insert}).map(function(e){return e.insert}).join("")}},{key:"insertEmbed",value:function(e,t,n){return this.scroll.insertAt(e,t,n),this.update((new a.default).retain(e).insert(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n)))}},{key:"insertText",value:function(e,t){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(s).forEach(function(r){n.scroll.formatAt(e,t.length,r,s[r])}),this.update((new a.default).retain(e).insert(t,(0,p.default)(s)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===d.default.blotName&&!(e.children.length>1)&&e.children.head instanceof f.default}},{key:"removeFormat",value:function(e,t){var n=this.getText(e,t),s=this.scroll.line(e+t),i=r(s,2),o=i[0],l=i[1],u=0,h=new a.default;null!=o&&(u=o instanceof c.default?o.newlineIndex(l)-l+1:o.length()-l,h=o.delta().slice(l,l+u-1).insert("\n"));var d=this.getContents(e,t+u).diff((new a.default).insert(n).concat(h)),f=(new a.default).retain(e).concat(d);return this.applyDelta(f)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(v)&&l.default.find(t[0].target)){var r=l.default.find(t[0].target),i=(0,h.bubbleFormats)(r),o=r.offset(this.scroll),c=t[0].oldValue.replace(u.default.CONTENTS,""),d=(new a.default).insert(c),f=(new a.default).insert(r.value());e=(new a.default).retain(o).concat(d.diff(f,n)).reduce(function(e,t){return t.insert?e.insert(t.insert,i):e.push(t)},new a.default),this.delta=s.compose(e)}else this.delta=this.getDelta(),e&&(0,m.default)(s.compose(e),this.delta)||(e=s.diff(this.delta,n));return e}}]),e}();function x(e,t){return Object.keys(t).reduce(function(n,s){return null==e[s]||(t[s]===e[s]?n[s]=t[s]:Array.isArray(t[s])?t[s].indexOf(e[s])<0&&(n[s]=t[s].concat([e[s]])):n[s]=[t[s],e[s]]),n},{})}t.default=b},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var s=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],s=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);s=!0);}catch(l){r=!0,i=l}finally{try{!s&&o.return&&o.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=c(n(0)),a=c(n(21)),o=c(n(11)),l=c(n(8));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=(0,c(n(10)).default)("quill:selection"),f=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(this,e),this.index=t,this.length=n},p=function(){function e(t,n){var s=this;h(this,e),this.emitter=n,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=i.default.create("cursor",this),this.lastRange=this.savedRange=new f(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){s.mouseDown||setTimeout(s.update.bind(s,l.default.sources.USER),1)}),this.emitter.on(l.default.events.EDITOR_CHANGE,function(e,t){e===l.default.events.TEXT_CHANGE&&t.length()>0&&s.update(l.default.sources.SILENT)}),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,function(){if(s.hasFocus()){var e=s.getNativeRange();null!=e&&e.start.node!==s.cursor.textNode&&s.emitter.once(l.default.events.SCROLL_UPDATE,function(){try{s.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(t){}})}}),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,function(e,t){if(t.range){var n=t.range,r=n.startNode,i=n.startOffset,a=n.endNode,o=n.endOffset;s.setNativeRange(r,i,a,o)}}),this.update(l.default.sources.SILENT)}return r(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",function(){e.composing=!0}),this.root.addEventListener("compositionend",function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout(function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,function(){e.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){e.mouseDown=!1,e.update(l.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!i.default.query(e,i.default.Scope.BLOCK)){if(n.start.node!==this.cursor.textNode){var s=i.default.find(n.start.node,!1);if(null==s)return;if(s instanceof i.default.Leaf){var r=s.split(n.start.offset);s.parent.insertBefore(this.cursor,r)}else s.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scroll.length();e=Math.min(e,n-1),t=Math.min(e+t,n-1)-e;var r=void 0,i=this.scroll.leaf(e),a=s(i,2),o=a[0],l=a[1];if(null==o)return null;var c=o.position(l,!0),u=s(c,2);r=u[0],l=u[1];var h=document.createRange();if(t>0){h.setStart(r,l);var d=this.scroll.leaf(e+t),f=s(d,2);if(o=f[0],l=f[1],null==o)return null;var p=o.position(l,!0),m=s(p,2);return r=m[0],l=m[1],h.setEnd(r,l),h.getBoundingClientRect()}var g="left",y=void 0;return r instanceof Text?(l<r.data.length?(h.setStart(r,l),h.setEnd(r,l+1)):(h.setStart(r,l-1),h.setEnd(r,l),g="right"),y=h.getBoundingClientRect()):(y=o.domNode.getBoundingClientRect(),l>0&&(g="right")),{bottom:y.top+y.height,height:y.height,left:y[g],right:y[g],top:y.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var n=this.normalizeNative(t);return d.info("getNativeRange",n),n}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);var r=n.map(function(e){var n=s(e,2),r=n[0],a=n[1],o=i.default.find(r,!0),l=o.offset(t.scroll);return 0===a?l:o instanceof i.default.Container?l+o.length():l+o.index(r,a)}),a=Math.min(Math.max.apply(Math,u(r)),this.scroll.length()-1),o=Math.min.apply(Math,[a].concat(u(r)));return new f(o,a-o)}},{key:"normalizeNative",value:function(e){if(!m(this.root,e.startContainer)||!e.collapsed&&!m(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(function(e){for(var t=e.node,n=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>n)t=t.childNodes[n],n=0;else{if(t.childNodes.length!==n)break;n=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=n}),t}},{key:"rangeToNative",value:function(e){var t=this,n=e.collapsed?[e.index]:[e.index,e.index+e.length],r=[],i=this.scroll.length();return n.forEach(function(e,n){e=Math.min(i-1,e);var a,o=t.scroll.leaf(e),l=s(o,2),c=l[0],u=l[1],h=c.position(u,0!==n),d=s(h,2);a=d[0],u=d[1],r.push(a,u)}),r.length<2&&(r=r.concat(r)),r}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var n=this.getBounds(t.index,t.length);if(null!=n){var r=this.scroll.length()-1,i=this.scroll.line(Math.min(t.index,r)),a=s(i,1)[0],o=a;if(t.length>0){var l=this.scroll.line(Math.min(t.index+t.length,r));o=s(l,1)[0]}if(null!=a&&null!=o){var c=e.getBoundingClientRect();n.top<c.top?e.scrollTop-=c.top-n.top:n.bottom>c.bottom&&(e.scrollTop+=n.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(d.info("setNativeRange",e,t,n,s),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=n.parentNode){var i=document.getSelection();if(null!=i)if(null!=e){this.hasFocus()||this.root.focus();var a=(this.getNativeRange()||{}).native;if(null==a||r||e!==a.startContainer||t!==a.startOffset||n!==a.endContainer||s!==a.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==n.tagName&&(s=[].indexOf.call(n.parentNode.childNodes,n),n=n.parentNode);var o=document.createRange();o.setStart(e,t),o.setEnd(n,s),i.removeAllRanges(),i.addRange(o)}}else i.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"==typeof t&&(n=t,t=!1),d.info("setRange",e),null!=e){var s=this.rangeToNative(e);this.setNativeRange.apply(this,u(s).concat([t]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.lastRange,n=this.getRange(),r=s(n,2),i=r[0],c=r[1];if(this.lastRange=i,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,o.default)(t,this.lastRange)){var u;!this.composing&&null!=c&&c.native.collapsed&&c.start.node!==this.cursor.textNode&&this.cursor.restore();var h,d=[l.default.events.SELECTION_CHANGE,(0,a.default)(this.lastRange),(0,a.default)(t),e];(u=this.emitter).emit.apply(u,[l.default.events.EDITOR_CHANGE].concat(d)),e!==l.default.sources.SILENT&&(h=this.emitter).emit.apply(h,d)}}}]),e}();function m(e,t){try{t.parentNode}catch(n){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=f,t.default=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},a=n(0),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"insertInto",value:function(e,n){0===e.children.length?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,n):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((s=a)&&s.__esModule?s:{default:s}).default.Embed);o.blotName="break",o.tagName="BR",t.default=o},function(e,t,n){var s,r=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(44),a=n(30),o=n(1),l=function(e){function t(t){var n=e.call(this,t)||this;return n.build(),n}return r(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach(function(e){e.attach()})},t.prototype.build=function(){var e=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var n=c(t);e.insertBefore(n,e.children.head||void 0)}catch(s){if(s instanceof o.ParchmentError)return;throw s}})},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,function(e,t,n){e.deleteAt(t,n)})},t.prototype.descendant=function(e,n){var s=this.children.find(n),r=s[0],i=s[1];return null==e.blotName&&e(r)||null!=e.blotName&&r instanceof e?[r,i]:r instanceof t?r.descendant(e,i):[null,-1]},t.prototype.descendants=function(e,n,s){void 0===n&&(n=0),void 0===s&&(s=Number.MAX_VALUE);var r=[],i=s;return this.children.forEachAt(n,s,function(n,s,a){(null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e)&&r.push(n),n instanceof t&&(r=r.concat(n.descendants(e,s,i))),i-=a}),r},t.prototype.detach=function(){this.children.forEach(function(e){e.detach()}),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,n,s){this.children.forEachAt(e,t,function(e,t,r){e.formatAt(t,r,n,s)})},t.prototype.insertAt=function(e,t,n){var s=this.children.find(e),r=s[0],i=s[1];if(r)r.insertAt(i,t,n);else{var a=null==n?o.create("text",t):o.create(t,n);this.appendChild(a)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(t){return e instanceof t}))throw new o.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce(function(e,t){return e+t.length()},0)},t.prototype.moveChildren=function(e,t){this.children.forEach(function(n){e.insertBefore(n,t)})},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var n=o.create(this.statics.defaultChild);this.appendChild(n),n.optimize(t)}else this.remove()},t.prototype.path=function(e,n){void 0===n&&(n=!1);var s=this.children.find(e,n),r=s[0],i=s[1],a=[[this,e]];return r instanceof t?a.concat(r.path(i,n)):(null!=r&&a.push([r,i]),a)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(n){n instanceof t&&n.moveChildren(this),e.prototype.replace.call(this,n)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=this.clone();return this.parent.insertBefore(n,this.next),this.children.forEachAt(e,this.length(),function(e,s,r){e=e.split(s,t),n.appendChild(e)}),n},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var n=this,s=[],r=[];e.forEach(function(e){e.target===n.domNode&&"childList"===e.type&&(s.push.apply(s,e.addedNodes),r.push.apply(r,e.removedNodes))}),r.forEach(function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=o.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==n.domNode||t.detach())}}),s.filter(function(e){return e.parentNode==n.domNode}).sort(function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(e){var t=null;null!=e.nextSibling&&(t=o.find(e.nextSibling));var s=c(e);s.next==t&&null!=s.next||(null!=s.parent&&s.parent.removeChild(n),n.insertBefore(s,t||void 0))})},t}(a.default);function c(e){var t=o.find(e);if(null==t)try{t=o.create(e)}catch(n){t=o.create(o.Scope.INLINE),[].slice.call(e.childNodes).forEach(function(e){t.domNode.appendChild(e)}),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=l},function(e,t,n){var s,r=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),a=n(31),o=n(17),l=n(1),c=function(e){function t(t){var n=e.call(this,t)||this;return n.attributes=new a.default(n.domNode),n}return r(t,e),t.formats=function(e){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var n=l.query(e);n instanceof i.default?this.attributes.attribute(n,t):t&&(null==n||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,n){var s=e.prototype.replaceWith.call(this,t,n);return this.attributes.copy(s),s},t.prototype.update=function(t,n){var s=this;e.prototype.update.call(this,t,n),t.some(function(e){return e.target===s.domNode&&"attributes"===e.type})&&this.attributes.build()},t.prototype.wrap=function(n,s){var r=e.prototype.wrap.call(this,n,s);return r instanceof t&&r.statics.scope===this.statics.scope&&this.attributes.move(r),r},t}(o.default);t.default=c},function(e,t,n){var s,r=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),a=n(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(n+=1),[this.parent.domNode,n]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=a.Scope.INLINE_BLOT,t}(i.default);t.default=o},function(e,t,n){var s=n(11),r=n(3),i={attributes:{compose:function(e,t,n){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var s=r(!0,{},t);for(var i in n||(s=Object.keys(s).reduce(function(e,t){return null!=s[t]&&(e[t]=s[t]),e},{})),e)void 0!==e[i]&&void 0===t[i]&&(s[i]=e[i]);return Object.keys(s).length>0?s:void 0},diff:function(e,t){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var n=Object.keys(e).concat(Object.keys(t)).reduce(function(n,r){return s(e[r],t[r])||(n[r]=void 0===t[r]?null:t[r]),n},{});return Object.keys(n).length>0?n:void 0},transform:function(e,t,n){if("object"!=typeof e)return t;if("object"==typeof t){if(!n)return t;var s=Object.keys(t).reduce(function(n,s){return void 0===e[s]&&(n[s]=t[s]),n},{});return Object.keys(s).length>0?s:void 0}}},iterator:function(e){return new a(e)},length:function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};function a(e){this.ops=e,this.index=0,this.offset=0}a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var n=this.offset,s=i.length(t);if(e>=s-n?(e=s-n,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};var r={};return t.attributes&&(r.attributes=t.attributes),"number"==typeof t.retain?r.retain=e:"string"==typeof t.insert?r.insert=t.insert.substr(n,e):r.insert=t.insert,r}return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?i.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,n=this.next(),s=this.ops.slice(this.index);return this.offset=e,this.index=t,[n].concat(s)}return[]},e.exports=i},function(e,t){var n=function(){function e(e,t){return null!=t&&e instanceof t}var t,n,s;try{t=Map}catch(o){t=function(){}}try{n=Set}catch(o){n=function(){}}try{s=Promise}catch(o){s=function(){}}function r(i,o,l,c,u){"object"==typeof o&&(l=o.depth,c=o.prototype,u=o.includeNonEnumerable,o=o.circular);var h=[],d=[],f="undefined"!=typeof Buffer;return void 0===o&&(o=!0),void 0===l&&(l=1/0),function i(l,p){if(null===l)return null;if(0===p)return l;var m,g;if("object"!=typeof l)return l;if(e(l,t))m=new t;else if(e(l,n))m=new n;else if(e(l,s))m=new s(function(e,t){l.then(function(t){e(i(t,p-1))},function(e){t(i(e,p-1))})});else if(r.__isArray(l))m=[];else if(r.__isRegExp(l))m=new RegExp(l.source,a(l)),l.lastIndex&&(m.lastIndex=l.lastIndex);else if(r.__isDate(l))m=new Date(l.getTime());else{if(f&&Buffer.isBuffer(l))return m=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(m),m;e(l,Error)?m=Object.create(l):void 0===c?(g=Object.getPrototypeOf(l),m=Object.create(g)):(m=Object.create(c),g=c)}if(o){var y=h.indexOf(l);if(-1!=y)return d[y];h.push(l),d.push(m)}for(var v in e(l,t)&&l.forEach(function(e,t){var n=i(t,p-1),s=i(e,p-1);m.set(n,s)}),e(l,n)&&l.forEach(function(e){var t=i(e,p-1);m.add(t)}),l){var b;g&&(b=Object.getOwnPropertyDescriptor(g,v)),b&&null==b.set||(m[v]=i(l[v],p-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(l);for(v=0;v<x.length;v++){var w=x[v];(!(_=Object.getOwnPropertyDescriptor(l,w))||_.enumerable||u)&&(m[w]=i(l[w],p-1),_.enumerable||Object.defineProperty(m,w,{enumerable:!1}))}}if(u){var N=Object.getOwnPropertyNames(l);for(v=0;v<N.length;v++){var _,j=N[v];(_=Object.getOwnPropertyDescriptor(l,j))&&_.enumerable||(m[j]=i(l[j],p-1),Object.defineProperty(m,j,{enumerable:!1}))}}return m}(i,l)}function i(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return r.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},r.__objToStr=i,r.__isDate=function(e){return"object"==typeof e&&"[object Date]"===i(e)},r.__isArray=function(e){return"object"==typeof e&&"[object Array]"===i(e)},r.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===i(e)},r.__getRegExpFlags=a,r}();"object"==typeof e&&e.exports&&(e.exports=n)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],s=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);s=!0);}catch(l){r=!0,i=l}finally{try{!s&&o.return&&o.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},a=f(n(0)),o=f(n(8)),l=n(4),c=f(l),u=f(n(16)),h=f(n(13)),d=f(n(25));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return e instanceof c.default||e instanceof l.BlockEmbed}var m=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.emitter=n.emitter,Array.isArray(n.whitelist)&&(s.whitelist=n.whitelist.reduce(function(e,t){return e[t]=!0,e},{})),s.domNode.addEventListener("DOMNodeInserted",function(){}),s.optimize(),s.enable(),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,n){var r=this.line(e),a=s(r,2),o=a[0],c=a[1],d=this.line(e+n),f=s(d,1)[0];if(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,n),null!=f&&o!==f&&c>0){if(o instanceof l.BlockEmbed||f instanceof l.BlockEmbed)return void this.optimize();if(o instanceof h.default){var p=o.newlineIndex(o.length(),!0);if(p>-1&&(o=o.split(p+1))===f)return void this.optimize()}else if(f instanceof h.default){var m=f.newlineIndex(0);m>-1&&f.split(m+1)}var g=f.children.head instanceof u.default?null:f.children.head;o.moveChildren(f,g),o.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,n,s,r){(null==this.whitelist||this.whitelist[s])&&(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,n,s,r),this.optimize())}},{key:"insertAt",value:function(e,n,s){if(null==s||null==this.whitelist||this.whitelist[n]){if(e>=this.length())if(null==s||null==a.default.query(n,a.default.Scope.BLOCK)){var r=a.default.create(this.statics.defaultChild);this.appendChild(r),null==s&&n.endsWith("\n")&&(n=n.slice(0,-1)),r.insertAt(0,n,s)}else{var o=a.default.create(n,s);this.appendChild(o)}else i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,s);this.optimize()}}},{key:"insertBefore",value:function(e,n){if(e.statics.scope===a.default.Scope.INLINE_BLOT){var s=a.default.create(this.statics.defaultChild);s.appendChild(e),e=s}i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(p,e)}},{key:"lines",value:function(){return function e(t,n,s){var r=[],i=s;return t.children.forEachAt(n,s,function(t,n,s){p(t)?r.push(t):t instanceof a.default.Container&&(r=r.concat(e(t,n,i))),i-=s}),r}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,n),e.length>0&&this.emitter.emit(o.default.events.SCROLL_OPTIMIZE,e,n))}},{key:"path",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var n=o.default.sources.USER;"string"==typeof e&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(o.default.events.SCROLL_BEFORE_UPDATE,n,e),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(o.default.events.SCROLL_UPDATE,n,e)}}}]),t}(a.default.Scroll);m.blotName="scroll",m.className="ql-editor",m.tagName="DIV",m.defaultChild="block",m.allowedChildren=[c.default,l.BlockEmbed,d.default],t.default=m},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],s=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);s=!0);}catch(l){r=!0,i=l}finally{try{!s&&o.return&&o.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),a=m(n(21)),o=m(n(11)),l=m(n(3)),c=m(n(2)),u=m(n(20)),h=m(n(0)),d=m(n(5)),f=m(n(10)),p=m(n(9));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=(0,f.default)("quill:keyboard"),v=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",b=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.bindings={},Object.keys(s.options.bindings).forEach(function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&s.options.bindings[t]&&s.addBinding(s.options.bindings[t])}),s.addBinding({key:t.keys.ENTER,shiftKey:null},j),s.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(s.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},w),s.addBinding({key:t.keys.DELETE},{collapsed:!0},N)):(s.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},w),s.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},N)),s.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},_),s.addBinding({key:t.keys.DELETE},{collapsed:!1},_),s.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},w),s.listen(),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"match",value:function(e,t){return t=T(t),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(n){return!!t[n]!==e[n]&&null!==t[n]})&&t.key===(e.which||e.keyCode)}}]),i(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=T(e);if(null==s||null==s.key)return y.warn("Attempted to add invalid keyboard binding",s);"function"==typeof t&&(t={handler:t}),"function"==typeof n&&(n={handler:n}),s=(0,l.default)(s,t,n),this.bindings[s.key]=this.bindings[s.key]||[],this.bindings[s.key].push(s)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",function(n){if(!n.defaultPrevented){var i=n.which||n.keyCode,a=(e.bindings[i]||[]).filter(function(e){return t.match(n,e)});if(0!==a.length){var l=e.quill.getSelection();if(null!=l&&e.quill.hasFocus()){var c=e.quill.getLine(l.index),u=r(c,2),d=u[0],f=u[1],p=e.quill.getLeaf(l.index),m=r(p,2),g=m[0],y=m[1],v=0===l.length?[g,y]:e.quill.getLeaf(l.index+l.length),b=r(v,2),x=b[0],w=b[1],N=g instanceof h.default.Text?g.value().slice(0,y):"",_=x instanceof h.default.Text?x.value().slice(w):"",j={collapsed:0===l.length,empty:0===l.length&&d.length()<=1,format:e.quill.getFormat(l),offset:f,prefix:N,suffix:_};a.some(function(t){if(null!=t.collapsed&&t.collapsed!==j.collapsed)return!1;if(null!=t.empty&&t.empty!==j.empty)return!1;if(null!=t.offset&&t.offset!==j.offset)return!1;if(Array.isArray(t.format)){if(t.format.every(function(e){return null==j.format[e]}))return!1}else if("object"===s(t.format)&&!Object.keys(t.format).every(function(e){return!0===t.format[e]?null!=j.format[e]:!1===t.format[e]?null==j.format[e]:(0,o.default)(t.format[e],j.format[e])}))return!1;return!(null!=t.prefix&&!t.prefix.test(j.prefix)||null!=t.suffix&&!t.suffix.test(j.suffix)||!0===t.handler.call(e,l,j))})&&n.preventDefault()}}}})}}]),t}(p.default);function x(e,t){var n,s=e===b.keys.LEFT?"prefix":"suffix";return g(n={key:e,shiftKey:t,altKey:null},s,/^$/),g(n,"handler",function(n){var s=n.index;e===b.keys.RIGHT&&(s+=n.length+1);var i=this.quill.getLeaf(s);return!(r(i,1)[0]instanceof h.default.Embed&&(e===b.keys.LEFT?t?this.quill.setSelection(n.index-1,n.length+1,d.default.sources.USER):this.quill.setSelection(n.index-1,d.default.sources.USER):t?this.quill.setSelection(n.index,n.length+1,d.default.sources.USER):this.quill.setSelection(n.index+n.length+1,d.default.sources.USER),1))}),n}function w(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var n=this.quill.getLine(e.index),s=r(n,1)[0],i={};if(0===t.offset){var a=this.quill.getLine(e.index-1),o=r(a,1)[0];if(null!=o&&o.length()>1){var l=s.formats(),c=this.quill.getFormat(e.index-1,1);i=u.default.attributes.diff(l,c)||{}}}var h=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-h,h,d.default.sources.USER),Object.keys(i).length>0&&this.quill.formatLine(e.index-h,h,i,d.default.sources.USER),this.quill.focus()}}function N(e,t){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-n)){var s={},i=0,a=this.quill.getLine(e.index),o=r(a,1)[0];if(t.offset>=o.length()-1){var l=this.quill.getLine(e.index+1),c=r(l,1)[0];if(c){var h=o.formats(),f=this.quill.getFormat(e.index,1);s=u.default.attributes.diff(h,f)||{},i=c.length()}}this.quill.deleteText(e.index,n,d.default.sources.USER),Object.keys(s).length>0&&this.quill.formatLine(e.index+i-1,n,s,d.default.sources.USER)}}function _(e){var t=this.quill.getLines(e),n={};if(t.length>1){var s=t[0].formats(),r=t[t.length-1].formats();n=u.default.attributes.diff(r,s)||{}}this.quill.deleteText(e,d.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index,1,n,d.default.sources.USER),this.quill.setSelection(e.index,d.default.sources.SILENT),this.quill.focus()}function j(e,t){var n=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var s=Object.keys(t.format).reduce(function(e,n){return h.default.query(n,h.default.Scope.BLOCK)&&!Array.isArray(t.format[n])&&(e[n]=t.format[n]),e},{});this.quill.insertText(e.index,"\n",s,d.default.sources.USER),this.quill.setSelection(e.index+1,d.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach(function(e){null==s[e]&&(Array.isArray(t.format[e])||"link"!==e&&n.quill.format(e,t.format[e],d.default.sources.USER))})}function E(e){return{key:b.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var n=h.default.query("code-block"),s=t.index,i=t.length,a=this.quill.scroll.descendant(n,s),o=r(a,2),l=o[0],c=o[1];if(null!=l){var u=this.quill.getIndex(l),f=l.newlineIndex(c,!0)+1,p=l.newlineIndex(u+c+i),m=l.domNode.textContent.slice(f,p).split("\n");c=0,m.forEach(function(t,r){e?(l.insertAt(f+c,n.TAB),c+=n.TAB.length,0===r?s+=n.TAB.length:i+=n.TAB.length):t.startsWith(n.TAB)&&(l.deleteAt(f+c,n.TAB.length),c-=n.TAB.length,0===r?s-=n.TAB.length:i-=n.TAB.length),c+=t.length+1}),this.quill.update(d.default.sources.USER),this.quill.setSelection(s,i,d.default.sources.SILENT)}}}}function k(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,n){this.quill.format(e,!n.format[e],d.default.sources.USER)}}}function T(e){if("string"==typeof e||"number"==typeof e)return T({key:e});if("object"===(void 0===e?"undefined":s(e))&&(e=(0,a.default)(e,!1)),"string"==typeof e.key)if(null!=b.keys[e.key.toUpperCase()])e.key=b.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[v]=e.shortKey,delete e.shortKey),e}b.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},b.DEFAULTS={bindings:{bold:k("bold"),italic:k("italic"),underline:k("underline"),indent:{key:b.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",d.default.sources.USER)}},outdent:{key:b.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",d.default.sources.USER)}},"outdent backspace":{key:b.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",d.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,d.default.sources.USER)}},"indent code-block":E(!0),"outdent code-block":E(!1),"remove tab":{key:b.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,d.default.sources.USER)}},tab:{key:b.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new c.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,d.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,d.default.sources.SILENT)}},"list empty enter":{key:b.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,d.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,d.default.sources.USER)}},"checklist enter":{key:b.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),n=r(t,2),s=n[0],i=n[1],a=(0,l.default)({},s.formats(),{list:"checked"}),o=(new c.default).retain(e.index).insert("\n",a).retain(s.length()-i-1).retain(1,{list:"unchecked"});this.quill.updateContents(o,d.default.sources.USER),this.quill.setSelection(e.index+1,d.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:b.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var n=this.quill.getLine(e.index),s=r(n,2),i=s[0],a=s[1],o=(new c.default).retain(e.index).insert("\n",t.format).retain(i.length()-a-1).retain(1,{header:null});this.quill.updateContents(o,d.default.sources.USER),this.quill.setSelection(e.index+1,d.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var n=t.prefix.length,s=this.quill.getLine(e.index),i=r(s,2),a=i[0],o=i[1];if(o>n)return!0;var l=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(e.index," ",d.default.sources.USER),this.quill.history.cutoff();var u=(new c.default).retain(e.index-o).delete(n+1).retain(a.length()-2-o).retain(1,{list:l});this.quill.updateContents(u,d.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-n,d.default.sources.SILENT)}},"code exit":{key:b.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),n=r(t,2),s=n[0],i=n[1],a=(new c.default).retain(e.index+s.length()-i-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(a,d.default.sources.USER)}},"embed left":x(b.keys.LEFT,!1),"embed left shift":x(b.keys.LEFT,!0),"embed right":x(b.keys.RIGHT,!1),"embed right shift":x(b.keys.RIGHT,!0)}},t.default=b,t.SHORTKEY=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],s=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);s=!0);}catch(l){r=!0,i=l}finally{try{!s&&o.return&&o.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),a=l(n(0)),o=l(n(7));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.selection=n,s.textNode=document.createTextNode(t.CONTENTS),s.domNode.appendChild(s.textNode),s._length=0,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"value",value:function(){}}]),i(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,n){if(0!==this._length)return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n);for(var s=this,i=0;null!=s&&s.statics.scope!==a.default.Scope.BLOCK_BLOT;)i+=s.offset(s.parent),s=s.parent;null!=s&&(this._length=t.CONTENTS.length,s.optimize(),s.formatAt(i,t.CONTENTS.length,e,n),this._length=0)}},{key:"index",value:function(e,n){return e===this.textNode?0:r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,n)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,n=this.selection.getNativeRange(),r=void 0,i=void 0,l=void 0;if(null!=n&&n.start.node===e&&n.end.node===e){var c=[e,n.start.offset,n.end.offset];r=c[0],i=c[1],l=c[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var u=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof o.default?(r=this.next.domNode,this.next.insertAt(0,u),this.textNode.data=t.CONTENTS):(this.textNode.data=u,this.parent.insertBefore(a.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=i){var h=[i,l].map(function(e){return Math.max(0,Math.min(r.data.length,e-1))}),d=s(h,2);return i=d[0],l=d[1],{startNode:r,startOffset:i,endNode:r,endOffset:l}}}}},{key:"update",value:function(e,t){var n=this;if(e.some(function(e){return"characterData"===e.type&&e.target===n.textNode})){var s=this.restore();s&&(t.range=s)}}},{key:"value",value:function(){return""}}]),t}(a.default.Embed);c.blotName="cursor",c.className="ql-cursor",c.tagName="span",c.CONTENTS="\ufeff",t.default=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(0)),r=n(4),i=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(s.default.Container);o.allowedChildren=[i.default,r.BlockEmbed,o],t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},a=n(0),o=(s=a)&&s.__esModule?s:{default:s},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"value",value:function(e){var n=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return n.startsWith("rgb(")?"#"+(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(e){return("00"+parseInt(e).toString(16)).slice(-2)}).join(""):n}}]),t}(o.default.Attributor.Style),c=new o.default.Attributor.Class("color","ql-color",{scope:o.default.Scope.INLINE}),u=new l("color","color",{scope:o.default.Scope.INLINE});t.ColorAttributor=l,t.ColorClass=c,t.ColorStyle=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},a=n(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"format",value:function(e,n){if(e!==this.statics.blotName||!n)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n);n=this.constructor.sanitize(n),this.domNode.setAttribute("href",n)}}],[{key:"create",value:function(e){var n=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),n.setAttribute("href",e),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return l(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((s=a)&&s.__esModule?s:{default:s}).default);function l(e,t){var n=document.createElement("a");n.href=e;var s=n.href.slice(0,n.href.indexOf(":"));return t.indexOf(s)>-1}o.blotName="link",o.tagName="A",o.SANITIZED_URL="about:blank",o.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=o,t.sanitize=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=o(n(23)),a=o(n(107));function o(e){return e&&e.__esModule?e:{default:e}}var l=0;function c(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){n.togglePicker()}),this.label.addEventListener("keydown",function(e){switch(e.keyCode){case i.default.keys.ENTER:n.togglePicker();break;case i.default.keys.ESCAPE:n.escape(),e.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return r(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,n=document.createElement("span");return n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item"),e.hasAttribute("value")&&n.setAttribute("data-value",e.getAttribute("value")),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",function(){t.selectItem(n,!0)}),n.addEventListener("keydown",function(e){switch(e.keyCode){case i.default.keys.ENTER:t.selectItem(n,!0),e.preventDefault();break;case i.default.keys.ESCAPE:t.escape(),e.preventDefault()}}),n}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=a.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach(function(n){var s=e.buildItem(n);t.appendChild(s),!0===n.selected&&e.selectItem(s)}),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach(function(t){e.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout(function(){return e.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.container.querySelector(".ql-selected");if(e!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":s(Event))){var r=document.createEvent("Event");r.initEvent("change",!0,!0),this.select.dispatchEvent(r)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var n=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}]),e}();t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=y(n(0)),r=y(n(5)),i=n(4),a=y(i),o=y(n(16)),l=y(n(25)),c=y(n(24)),u=y(n(35)),h=y(n(6)),d=y(n(22)),f=y(n(7)),p=y(n(55)),m=y(n(42)),g=y(n(23));function y(e){return e&&e.__esModule?e:{default:e}}r.default.register({"blots/block":a.default,"blots/block/embed":i.BlockEmbed,"blots/break":o.default,"blots/container":l.default,"blots/cursor":c.default,"blots/embed":u.default,"blots/inline":h.default,"blots/scroll":d.default,"blots/text":f.default,"modules/clipboard":p.default,"modules/history":m.default,"modules/keyboard":g.default}),s.default.register(a.default,o.default,c.default,h.default,d.default,f.default),t.default=r.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),r=function(){function e(e){this.domNode=e,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new s.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"==typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return s.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,n,r){var i=this.isolate(e,t);if(null!=s.query(n,s.Scope.BLOT)&&r)i.wrap(n,r);else if(null!=s.query(n,s.Scope.ATTRIBUTE)){var a=s.create(this.statics.scope);i.wrap(a),a.format(n,r)}},e.prototype.insertAt=function(e,t,n){var r=null==n?s.create("text",t):s.create(t,n),i=this.split(e);this.parent.insertBefore(r,i)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var n=null;e.children.insertBefore(this,t),null!=t&&(n=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==n||e.domNode.insertBefore(this.domNode,n),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var n=this.split(e);return n.split(t),n},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[s.DATA_KEY]&&delete this.domNode[s.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var n="string"==typeof e?s.create(e,t):e;return n.replace(this),n},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var n="string"==typeof e?s.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(n,this.next),n.appendChild(this),n},e.blotName="abstract",e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=n(12),r=n(32),i=n(33),a=n(1),o=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=s.default.keys(this.domNode),n=r.default.keys(this.domNode),o=i.default.keys(this.domNode);t.concat(n).concat(o).forEach(function(t){var n=a.query(t,a.Scope.ATTRIBUTE);n instanceof s.default&&(e.attributes[n.attrName]=n)})},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach(function(n){var s=t.attributes[n].value(t.domNode);e.format(n,s)})},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach(function(e){t.attributes[e].remove(t.domNode)}),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce(function(t,n){return t[n]=e.attributes[n].value(e.domNode),t},{})},e}();t.default=o},function(e,t,n){var s,r=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function i(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(function(e){return 0===e.indexOf(t+"-")})}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map(function(e){return e.split("-").slice(0,-1).join("-")})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){i(e,this.keyName).forEach(function(t){e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(i(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(n(12).default);t.default=a},function(e,t,n){var s,r=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function i(e){var t=e.split("-"),n=t.slice(1).map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("");return t[0]+n}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map(function(e){return e.split(":")[0].trim()})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[i(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[i(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[i(this.keyName)];return this.canAdd(e,t)?t:""},t}(n(12).default);t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=n,this.modules={}}return s(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach(function(t){null==e.modules[t]&&e.addModule(t)})}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();r.DEFAULTS={modules:{}},r.themes={default:r},t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),r=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},i=o(n(0)),a=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var l="\ufeff",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.contentNode=document.createElement("span"),n.contentNode.setAttribute("contenteditable",!1),[].slice.call(n.domNode.childNodes).forEach(function(e){n.contentNode.appendChild(e)}),n.leftGuard=document.createTextNode(l),n.rightGuard=document.createTextNode(l),n.domNode.appendChild(n.leftGuard),n.domNode.appendChild(n.contentNode),n.domNode.appendChild(n.rightGuard),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"index",value:function(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,n)}},{key:"restore",value:function(e){var t=void 0,n=void 0,s=e.data.split(l).join("");if(e===this.leftGuard)if(this.prev instanceof a.default){var r=this.prev.length();this.prev.insertAt(r,s),t={startNode:this.prev.domNode,startOffset:r+s.length}}else n=document.createTextNode(s),this.parent.insertBefore(i.default.create(n),this),t={startNode:n,startOffset:s.length};else e===this.rightGuard&&(this.next instanceof a.default?(this.next.insertAt(0,s),t={startNode:this.next.domNode,startOffset:s.length}):(n=document.createTextNode(s),this.parent.insertBefore(i.default.create(n),this.next),t={startNode:n,startOffset:s.length}));return e.data=l,t}},{key:"update",value:function(e,t){var n=this;e.forEach(function(e){if("characterData"===e.type&&(e.target===n.leftGuard||e.target===n.rightGuard)){var s=n.restore(e.target);s&&(t.range=s)}})}}]),t}(i.default.Embed);t.default=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var s,r=n(0),i=(s=r)&&s.__esModule?s:{default:s},a={scope:i.default.Scope.BLOCK,whitelist:["right","center","justify"]},o=new i.default.Attributor.Attribute("align","align",a),l=new i.default.Attributor.Class("align","ql-align",a),c=new i.default.Attributor.Style("align","text-align",a);t.AlignAttribute=o,t.AlignClass=l,t.AlignStyle=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var s,r=n(0),i=(s=r)&&s.__esModule?s:{default:s},a=n(26),o=new i.default.Attributor.Class("background","ql-bg",{scope:i.default.Scope.INLINE}),l=new a.ColorAttributor("background","background-color",{scope:i.default.Scope.INLINE});t.BackgroundClass=o,t.BackgroundStyle=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var s,r=n(0),i=(s=r)&&s.__esModule?s:{default:s},a={scope:i.default.Scope.BLOCK,whitelist:["rtl"]},o=new i.default.Attributor.Attribute("direction","dir",a),l=new i.default.Attributor.Class("direction","ql-direction",a),c=new i.default.Attributor.Style("direction","direction",a);t.DirectionAttribute=o,t.DirectionClass=l,t.DirectionStyle=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},a=n(0),o=(s=a)&&s.__esModule?s:{default:s},l={scope:o.default.Scope.INLINE,whitelist:["serif","monospace"]},c=new o.default.Attributor.Class("font","ql-font",l),u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"value",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(o.default.Attributor.Style),h=new u("font","font-family",l);t.FontStyle=h,t.FontClass=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var s,r=n(0),i=(s=r)&&s.__esModule?s:{default:s},a=new i.default.Attributor.Class("size","ql-size",{scope:i.default.Scope.INLINE,whitelist:["small","large","huge"]}),o=new i.default.Attributor.Style("size","font-size",{scope:i.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=a,t.SizeStyle=o},function(e,t,n){e.exports={align:{"":n(76),center:n(77),right:n(78),justify:n(79)},background:n(80),blockquote:n(81),bold:n(82),clean:n(83),code:n(58),"code-block":n(58),color:n(84),direction:{"":n(85),rtl:n(86)},float:{center:n(87),full:n(88),left:n(89),right:n(90)},formula:n(91),header:{1:n(92),2:n(93)},italic:n(94),image:n(95),indent:{"+1":n(96),"-1":n(97)},link:n(98),list:{ordered:n(99),bullet:n(100),check:n(101)},script:{sub:n(102),super:n(103)},strike:n(104),underline:n(105),video:n(106)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),r=a(n(0)),i=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.lastRecorded=0,s.ignoreChange=!1,s.clear(),s.quill.on(i.default.events.EDITOR_CHANGE,function(e,t,n,r){e!==i.default.events.TEXT_CHANGE||s.ignoreChange||(s.options.userOnly&&r!==i.default.sources.USER?s.transform(t):s.record(t,n))}),s.quill.keyboard.addBinding({key:"Z",shortKey:!0},s.undo.bind(s)),s.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},s.redo.bind(s)),/Win/i.test(navigator.platform)&&s.quill.keyboard.addBinding({key:"Y",shortKey:!0},s.redo.bind(s)),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var n=this.stack[e].pop();this.stack[t].push(n),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n[e],i.default.sources.USER),this.ignoreChange=!1;var s=l(n[e]);this.quill.setSelection(s)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var n=this.quill.getContents().diff(t),s=Date.now();if(this.lastRecorded+this.options.delay>s&&this.stack.undo.length>0){var r=this.stack.undo.pop();n=n.compose(r.undo),e=r.redo.compose(e)}else this.lastRecorded=s;this.stack.undo.push({redo:e,undo:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}),this.stack.redo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(a(n(9)).default);function l(e){var t=e.reduce(function(e,t){return e+=t.delete||0},0),n=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"==typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some(function(e){return null!=r.default.query(e,r.default.Scope.BLOCK)}))}(e)&&(n-=1),n}o.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=o,t.getLastChangeIndex=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),r=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},i=p(n(3)),a=p(n(2)),o=p(n(8)),l=p(n(23)),c=p(n(34)),u=p(n(59)),h=p(n(60)),d=p(n(28)),f=p(n(61));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=[!1,"center","right","justify"],b=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],x=[!1,"serif","monospace"],w=["1","2","3",!1],N=["small",!1,"large","huge"],_=function(e){function t(e,n){m(this,t);var s=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return e.emitter.listenDOM("click",document.body,function t(n){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==s.tooltip||s.tooltip.root.contains(n.target)||document.activeElement===s.tooltip.textbox||s.quill.hasFocus()||s.tooltip.hide(),null!=s.pickers&&s.pickers.forEach(function(e){e.container.contains(n.target)||e.close()})}),s}return y(t,e),s(t,[{key:"addModule",value:function(e){var n=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(n),n}},{key:"buildButtons",value:function(e,t){e.forEach(function(e){(e.getAttribute("class")||"").split(/\s+/).forEach(function(n){if(n.startsWith("ql-")&&(n=n.slice(3),null!=t[n]))if("direction"===n)e.innerHTML=t[n][""]+t[n].rtl;else if("string"==typeof t[n])e.innerHTML=t[n];else{var s=e.value||"";null!=s&&t[n][s]&&(e.innerHTML=t[n][s])}})})}},{key:"buildPickers",value:function(e,t){var n=this;this.pickers=e.map(function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&E(e,v),new h.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var n=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&E(e,b,"background"===n?"#ffffff":"#000000"),new u.default(e,t[n])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?E(e,x):e.classList.contains("ql-header")?E(e,w):e.classList.contains("ql-size")&&E(e,N)),new d.default(e)}),this.quill.on(o.default.events.EDITOR_CHANGE,function(){n.pickers.forEach(function(e){e.update()})})}}]),t}(c.default);_.DEFAULTS=(0,i.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",function(){if(null!=t.files&&null!=t.files[0]){var n=new FileReader;n.onload=function(n){var s=e.quill.getSelection(!0);e.quill.updateContents((new a.default).retain(s.index).delete(s.length).insert({image:n.target.result}),o.default.sources.USER),e.quill.setSelection(s.index+1,o.default.sources.SILENT),t.value=""},n.readAsDataURL(t.files[0])}}),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var j=function(e){function t(e,n){m(this,t);var s=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.textbox=s.root.querySelector('input[type="text"]'),s.listen(),s}return y(t,e),s(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",function(t){l.default.match(t,"enter")?(e.save(),t.preventDefault()):l.default.match(t,"escape")&&(e.cancel(),t.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e,t,n=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var s=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",n,o.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",n,o.default.sources.USER)),this.quill.root.scrollTop=s;break;case"video":n=(t=(e=n).match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/))?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e;case"formula":if(!n)break;var r=this.quill.getSelection(!0);if(null!=r){var i=r.index+r.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),n,o.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(i+1," ",o.default.sources.USER),this.quill.setSelection(i+2,o.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(f.default);function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach(function(t){var s=document.createElement("option");t===n?s.setAttribute("selected","selected"):s.setAttribute("value",t),e.appendChild(s)})}t.BaseTooltip=j,t.default=_},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,n=this.iterator();t=n();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,n=this.head;null!=n;){if(n===e)return t;t+=n.length(),n=n.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var n,s=this.iterator();n=s();){var r=n.length();if(e<r||t&&e===r&&(null==n.next||0!==n.next.length()))return[n,e];e-=r}return[null,0]},e.prototype.forEach=function(e){for(var t,n=this.iterator();t=n();)e(t)},e.prototype.forEachAt=function(e,t,n){if(!(t<=0))for(var s,r=this.find(e),i=r[0],a=e-r[1],o=this.iterator(i);(s=o())&&a<e+t;){var l=s.length();e>a?n(s,e-a,Math.min(t,a+l-e)):n(s,0,Math.min(l,e+t-a)),a+=l}},e.prototype.map=function(e){return this.reduce(function(t,n){return t.push(e(n)),t},[])},e.prototype.reduce=function(e,t){for(var n,s=this.iterator();n=s();)t=e(t,n);return t},e}();t.default=s},function(e,t,n){var s,r=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),a=n(1),o={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=function(e){function t(t){var n=e.call(this,t)||this;return n.scroll=n,n.observer=new MutationObserver(function(e){n.update(e)}),n.observer.observe(n.domNode,o),n.attach(),n}return r(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,n){this.update(),0===t&&n===this.length()?this.children.forEach(function(e){e.remove()}):e.prototype.deleteAt.call(this,t,n)},t.prototype.formatAt=function(t,n,s,r){this.update(),e.prototype.formatAt.call(this,t,n,s,r)},t.prototype.insertAt=function(t,n,s){this.update(),e.prototype.insertAt.call(this,t,n,s)},t.prototype.optimize=function(t,n){var s=this;void 0===t&&(t=[]),void 0===n&&(n={}),e.prototype.optimize.call(this,n);for(var r=[].slice.call(this.observer.takeRecords());r.length>0;)t.push(r.pop());for(var o=function(e,t){void 0===t&&(t=!0),null!=e&&e!==s&&null!=e.domNode.parentNode&&(null==e.domNode[a.DATA_KEY].mutations&&(e.domNode[a.DATA_KEY].mutations=[]),t&&o(e.parent))},l=function(e){null!=e.domNode[a.DATA_KEY]&&null!=e.domNode[a.DATA_KEY].mutations&&(e instanceof i.default&&e.children.forEach(l),e.optimize(n))},c=t,u=0;c.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(function(e){var t=a.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(o(a.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,function(e){var t=a.find(e,!1);o(t,!1),t instanceof i.default&&t.children.forEach(function(e){o(e,!1)})})):"attributes"===e.type&&o(t.prev)),o(t))}),this.children.forEach(l),r=(c=[].slice.call(this.observer.takeRecords())).slice();r.length>0;)t.push(r.pop())}},t.prototype.update=function(t,n){var s=this;void 0===n&&(n={}),(t=t||this.observer.takeRecords()).map(function(e){var t=a.find(e.target,!0);return null==t?null:null==t.domNode[a.DATA_KEY].mutations?(t.domNode[a.DATA_KEY].mutations=[e],t):(t.domNode[a.DATA_KEY].mutations.push(e),null)}).forEach(function(e){null!=e&&e!==s&&null!=e.domNode[a.DATA_KEY]&&e.update(e.domNode[a.DATA_KEY].mutations||[],n)}),null!=this.domNode[a.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,n),this.optimize(t,n)},t.blotName="scroll",t.defaultChild="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="DIV",t}(i.default);t.default=l},function(e,t,n){var s,r=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),a=n(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(n){if(n.tagName!==t.tagName)return e.formats.call(this,n)},t.prototype.format=function(n,s){var r=this;n!==this.statics.blotName||s?e.prototype.format.call(this,n,s):(this.children.forEach(function(e){e instanceof i.default||(e=e.wrap(t.blotName,!0)),r.attributes.copy(e)}),this.unwrap())},t.prototype.formatAt=function(t,n,s,r){null!=this.formats()[s]||a.query(s,a.Scope.ATTRIBUTE)?this.isolate(t,n).format(s,r):e.prototype.formatAt.call(this,t,n,s,r)},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n);var s=this.formats();if(0===Object.keys(s).length)return this.unwrap();var r=this.next;r instanceof t&&r.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}(s,r.formats())&&(r.moveChildren(this),r.remove())},t.blotName="inline",t.scope=a.Scope.INLINE_BLOT,t.tagName="SPAN",t}(i.default);t.default=o},function(e,t,n){var s,r=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),a=n(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(n){var s=a.query(t.blotName).tagName;if(n.tagName!==s)return e.formats.call(this,n)},t.prototype.format=function(n,s){null!=a.query(n,a.Scope.BLOCK)&&(n!==this.statics.blotName||s?e.prototype.format.call(this,n,s):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,n,s,r){null!=a.query(s,a.Scope.BLOCK)?this.format(s,r):e.prototype.formatAt.call(this,t,n,s,r)},t.prototype.insertAt=function(t,n,s){if(null==s||null!=a.query(n,a.Scope.INLINE))e.prototype.insertAt.call(this,t,n,s);else{var r=this.split(t),i=a.create(n,s);r.parent.insertBefore(i,r)}},t.prototype.update=function(t,n){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,n)},t.blotName="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="P",t}(i.default);t.default=o},function(e,t,n){var s,r=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(e){},t.prototype.format=function(t,n){e.prototype.formatAt.call(this,0,this.length(),t,n)},t.prototype.formatAt=function(t,n,s,r){0===t&&n===this.length()?this.format(s,r):e.prototype.formatAt.call(this,t,n,s,r)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(n(19).default);t.default=i},function(e,t,n){var s,r=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),a=n(1),o=function(e){function t(t){var n=e.call(this,t)||this;return n.text=n.statics.value(n.domNode),n}return r(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,n,s){null==s?(this.text=this.text.slice(0,t)+n+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,n,s)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=a.create(this.domNode.splitText(e));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},t.prototype.update=function(e,t){var n=this;e.some(function(e){return"characterData"===e.type&&e.target===n.domNode})&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=a.Scope.INLINE_BLOT,t}(i.default);t.default=o},function(e,t,n){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var r=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)==!t?t:r.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var s=n.indexOf(e,t);return-1!==s&&s===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),s=n.length>>>0,r=arguments[1],i=0;i<s;i++)if(t=n[i],e.call(r,t,i,n))return t}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,t){var n=-1;function s(e,t,l){if(e==t)return e?[[0,e]]:[];(l<0||e.length<l)&&(l=null);var u=i(e,t),h=e.substring(0,u);u=a(e=e.substring(u),t=t.substring(u));var d=e.substring(e.length-u),f=function(e,t){var o;if(!e)return[[1,t]];if(!t)return[[n,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,u=l.indexOf(c);if(-1!=u)return o=[[1,l.substring(0,u)],[0,c],[1,l.substring(u+c.length)]],e.length>t.length&&(o[0][0]=o[2][0]=n),o;if(1==c.length)return[[n,e],[1,t]];var h=function(e,t){var n=e.length>t.length?e:t,s=e.length>t.length?t:e;if(n.length<4||2*s.length<n.length)return null;function r(e,t,n){for(var s,r,o,l,c=e.substring(n,n+Math.floor(e.length/4)),u=-1,h="";-1!=(u=t.indexOf(c,u+1));){var d=i(e.substring(n),t.substring(u)),f=a(e.substring(0,n),t.substring(0,u));h.length<f+d&&(h=t.substring(u-f,u)+t.substring(u,u+d),s=e.substring(0,n-f),r=e.substring(n+d),o=t.substring(0,u-f),l=t.substring(u+d))}return 2*h.length>=e.length?[s,r,o,l,h]:null}var o,l,c,u,h,d=r(n,s,Math.ceil(n.length/4)),f=r(n,s,Math.ceil(n.length/2));if(!d&&!f)return null;o=f?d&&d[4].length>f[4].length?d:f:d,e.length>t.length?(l=o[0],c=o[1],u=o[2],h=o[3]):(u=o[0],h=o[1],l=o[2],c=o[3]);var p=o[4];return[l,c,u,h,p]}(e,t);if(h){var d=h[0],f=h[1],p=h[2],m=h[3],g=h[4],y=s(d,p),v=s(f,m);return y.concat([[0,g]],v)}return function(e,t){for(var s=e.length,i=t.length,a=Math.ceil((s+i)/2),o=a,l=2*a,c=new Array(l),u=new Array(l),h=0;h<l;h++)c[h]=-1,u[h]=-1;c[o+1]=0,u[o+1]=0;for(var d=s-i,f=d%2!=0,p=0,m=0,g=0,y=0,v=0;v<a;v++){for(var b=-v+p;b<=v-m;b+=2){for(var x=o+b,w=(k=b==-v||b!=v&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1)-b;k<s&&w<i&&e.charAt(k)==t.charAt(w);)k++,w++;if(c[x]=k,k>s)m+=2;else if(w>i)p+=2;else if(f&&(j=o+d-b)>=0&&j<l&&-1!=u[j]&&k>=(_=s-u[j]))return r(e,t,k,w)}for(var N=-v+g;N<=v-y;N+=2){for(var _,j=o+N,E=(_=N==-v||N!=v&&u[j-1]<u[j+1]?u[j+1]:u[j-1]+1)-N;_<s&&E<i&&e.charAt(s-_-1)==t.charAt(i-E-1);)_++,E++;if(u[j]=_,_>s)y+=2;else if(E>i)g+=2;else if(!f){var k;if((x=o+d-N)>=0&&x<l&&-1!=c[x]&&(w=o+(k=c[x])-x,k>=(_=s-_)))return r(e,t,k,w)}}}return[[n,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-u),t=t.substring(0,t.length-u));return h&&f.unshift([0,h]),d&&f.push([0,d]),o(f),null!=l&&(f=function(e,t){var s=function(e,t){if(0===t)return[0,e];for(var s=0,r=0;r<e.length;r++){var i=e[r];if(i[0]===n||0===i[0]){var a=s+i[1].length;if(t===a)return[r+1,e];if(t<a){e=e.slice();var o=t-s,l=[i[0],i[1].slice(0,o)],c=[i[0],i[1].slice(o)];return e.splice(r,1,l,c),[r+1,e]}s=a}}throw new Error("cursor_pos is out of bounds!")}(e,t),r=s[1],i=s[0],a=r[i],o=r[i+1];if(null==a)return e;if(0!==a[0])return e;if(null!=o&&a[1]+o[1]===o[1]+a[1])return r.splice(i,2,o,a),c(r,i,2);if(null!=o&&0===o[1].indexOf(a[1])){r.splice(i,2,[o[0],a[1]],[0,a[1]]);var l=o[1].slice(a[1].length);return l.length>0&&r.splice(i+2,0,[o[0],l]),c(r,i,3)}return e}(f,l)),f=function(e){for(var t=!1,s=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},r=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},i=2;i<e.length;i+=1)0===e[i-2][0]&&r(e[i-2][1])&&e[i-1][0]===n&&s(e[i-1][1])&&1===e[i][0]&&s(e[i][1])&&(t=!0,e[i-1][1]=e[i-2][1].slice(-1)+e[i-1][1],e[i][1]=e[i-2][1].slice(-1)+e[i][1],e[i-2][1]=e[i-2][1].slice(0,-1));if(!t)return e;var a=[];for(i=0;i<e.length;i+=1)e[i][1].length>0&&a.push(e[i]);return a}(f)}function r(e,t,n,r){var i=e.substring(0,n),a=t.substring(0,r),o=e.substring(n),l=t.substring(r),c=s(i,a),u=s(o,l);return c.concat(u)}function i(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,s=Math.min(e.length,t.length),r=s,i=0;n<r;)e.substring(i,r)==t.substring(i,r)?i=n=r:s=r,r=Math.floor((s-n)/2+n);return r}function a(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,s=Math.min(e.length,t.length),r=s,i=0;n<r;)e.substring(e.length-r,e.length-i)==t.substring(t.length-r,t.length-i)?i=n=r:s=r,r=Math.floor((s-n)/2+n);return r}function o(e){e.push([0,""]);for(var t,s=0,r=0,l=0,c="",u="";s<e.length;)switch(e[s][0]){case 1:l++,u+=e[s][1],s++;break;case n:r++,c+=e[s][1],s++;break;case 0:r+l>1?(0!==r&&0!==l&&(0!==(t=i(u,c))&&(s-r-l>0&&0==e[s-r-l-1][0]?e[s-r-l-1][1]+=u.substring(0,t):(e.splice(0,0,[0,u.substring(0,t)]),s++),u=u.substring(t),c=c.substring(t)),0!==(t=a(u,c))&&(e[s][1]=u.substring(u.length-t)+e[s][1],u=u.substring(0,u.length-t),c=c.substring(0,c.length-t))),0===r?e.splice(s-l,r+l,[1,u]):0===l?e.splice(s-r,r+l,[n,c]):e.splice(s-r-l,r+l,[n,c],[1,u]),s=s-r-l+(r?1:0)+(l?1:0)+1):0!==s&&0==e[s-1][0]?(e[s-1][1]+=e[s][1],e.splice(s,1)):s++,l=0,r=0,c="",u=""}""===e[e.length-1][1]&&e.pop();var h=!1;for(s=1;s<e.length-1;)0==e[s-1][0]&&0==e[s+1][0]&&(e[s][1].substring(e[s][1].length-e[s-1][1].length)==e[s-1][1]?(e[s][1]=e[s-1][1]+e[s][1].substring(0,e[s][1].length-e[s-1][1].length),e[s+1][1]=e[s-1][1]+e[s+1][1],e.splice(s-1,1),h=!0):e[s][1].substring(0,e[s+1][1].length)==e[s+1][1]&&(e[s-1][1]+=e[s+1][1],e[s][1]=e[s][1].substring(e[s+1][1].length)+e[s+1][1],e.splice(s+1,1),h=!0)),s++;h&&o(e)}var l=s;function c(e,t,n){for(var s=t+n-1;s>=0&&s>=t-1;s--)if(s+1<e.length){var r=e[s],i=e[s+1];r[0]===i[1]&&e.splice(s,2,[r[0],r[1]+i[1]])}return e}l.INSERT=1,l.DELETE=n,l.EQUAL=0,e.exports=l},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n},function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function s(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function r(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?s:r).supported=s,t.unsupported=r},function(e,t){var n=Object.prototype.hasOwnProperty,s="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(s=!1)),a.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e,t){var n=s?s+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},a.prototype.emit=function(e,t,n,r,i,a){var o=s?s+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,i),!0;case 6:return u.fn.call(u.context,t,n,r,i,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,r);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,n){var r=new i(t,n||this),a=s?s+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],r]:this._events[a].push(r):(this._events[a]=r,this._eventsCount++),this},a.prototype.once=function(e,t,n){var r=new i(t,n||this,!0),a=s?s+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],r]:this._events[a].push(r):(this._events[a]=r,this._eventsCount++),this},a.prototype.removeListener=function(e,t,n,i){var a=s?s+e:e;if(!this._events[a])return this;if(!t)return 0===--this._eventsCount?this._events=new r:delete this._events[a],this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||(0===--this._eventsCount?this._events=new r:delete this._events[a]);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[a]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new r:delete this._events[a]}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new r:delete this._events[t])):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=s,a.EventEmitter=a,void 0!==e&&(e.exports=a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],s=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);s=!0);}catch(l){r=!0,i=l}finally{try{!s&&o.return&&o.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),a=b(n(3)),o=b(n(2)),l=b(n(0)),c=b(n(5)),u=b(n(10)),h=b(n(9)),d=n(36),f=n(37),p=b(n(13)),m=n(26),g=n(38),y=n(39),v=n(40);function b(e){return e&&e.__esModule?e:{default:e}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=(0,u.default)("quill:clipboard"),N="__ql-matcher",_=[[Node.TEXT_NODE,M],[Node.TEXT_NODE,L],["br",function(e,t){return O(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,R],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,P],[Node.ELEMENT_NODE,function(e,t){var n={},s=e.style||{};return s.fontStyle&&"italic"===S(e).fontStyle&&(n.italic=!0),s.fontWeight&&(S(e).fontWeight.startsWith("bold")||parseInt(S(e).fontWeight)>=700)&&(n.bold=!0),Object.keys(n).length>0&&(t=T(t,n)),parseFloat(s.textIndent||0)>0&&(t=(new o.default).insert("\t").concat(t)),t}],["li",function(e,t){var n=l.default.query(e);if(null==n||"list-item"!==n.blotName||!O(t,"\n"))return t;for(var s=-1,r=e.parentNode;!r.classList.contains("ql-clipboard");)"list"===(l.default.query(r)||{}).blotName&&(s+=1),r=r.parentNode;return s<=0?t:t.compose((new o.default).retain(t.length()-1).retain(1,{indent:s}))}],["b",I.bind(I,"bold")],["i",I.bind(I,"italic")],["style",function(){return new o.default}]],j=[d.AlignAttribute,g.DirectionAttribute].reduce(function(e,t){return e[t.keyName]=t,e},{}),E=[d.AlignStyle,f.BackgroundStyle,m.ColorStyle,g.DirectionStyle,y.FontStyle,v.SizeStyle].reduce(function(e,t){return e[t.keyName]=t,e},{}),k=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.quill.root.addEventListener("paste",s.onPaste.bind(s)),s.container=s.quill.addContainer("ql-clipboard"),s.container.setAttribute("contenteditable",!0),s.container.setAttribute("tabindex",-1),s.matchers=[],_.concat(s.options.matchers).forEach(function(e){var t=r(e,2),i=t[0],a=t[1];(n.matchVisual||a!==D)&&s.addMatcher(i,a)}),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"==typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[p.default.blotName]){var n=this.container.innerText;return this.container.innerHTML="",(new o.default).insert(n,x({},p.default.blotName,t[p.default.blotName]))}var s=this.prepareMatching(),i=r(s,2),a=i[0],l=i[1],c=A(this.container,a,l);return O(c,"\n")&&null==c.ops[c.ops.length-1].attributes&&(c=c.compose((new o.default).retain(c.length()-1).delete(1))),w.log("convert",this.container.innerHTML,c),this.container.innerHTML="",c}},{key:"dangerouslyPasteHTML",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;if("string"==typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT);else{var s=this.convert(t);this.quill.updateContents((new o.default).retain(e).concat(s),n),this.quill.setSelection(e+s.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var n=this.quill.getSelection(),s=(new o.default).retain(n.index),r=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout(function(){s=s.concat(t.convert()).delete(n.length),t.quill.updateContents(s,c.default.sources.USER),t.quill.setSelection(s.length()-n.length,c.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=r,t.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],n=[];return this.matchers.forEach(function(s){var i=r(s,2),a=i[0],o=i[1];switch(a){case Node.TEXT_NODE:n.push(o);break;case Node.ELEMENT_NODE:t.push(o);break;default:[].forEach.call(e.container.querySelectorAll(a),function(e){e[N]=e[N]||[],e[N].push(o)})}}),[t,n]}}]),t}(h.default);function T(e,t,n){return"object"===(void 0===t?"undefined":s(t))?Object.keys(t).reduce(function(e,n){return T(e,n,t[n])},e):e.reduce(function(e,s){return s.attributes&&s.attributes[t]?e.push(s):e.insert(s.insert,(0,a.default)({},x({},t,n),s.attributes))},new o.default)}function S(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function O(e,t){for(var n="",s=e.ops.length-1;s>=0&&n.length<t.length;--s){var r=e.ops[s];if("string"!=typeof r.insert)break;n=r.insert+n}return n.slice(-1*t.length)===t}function C(e){if(0===e.childNodes.length)return!1;var t=S(e);return["block","list-item"].indexOf(t.display)>-1}function A(e,t,n){return e.nodeType===e.TEXT_NODE?n.reduce(function(t,n){return n(e,t)},new o.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],function(s,r){var i=A(r,t,n);return r.nodeType===e.ELEMENT_NODE&&(i=t.reduce(function(e,t){return t(r,e)},i),i=(r[N]||[]).reduce(function(e,t){return t(r,e)},i)),s.concat(i)},new o.default):new o.default}function I(e,t,n){return T(n,e,!0)}function P(e,t){var n=l.default.Attributor.Attribute.keys(e),s=l.default.Attributor.Class.keys(e),r=l.default.Attributor.Style.keys(e),i={};return n.concat(s).concat(r).forEach(function(t){var n=l.default.query(t,l.default.Scope.ATTRIBUTE);null!=n&&(i[n.attrName]=n.value(e),i[n.attrName])||(null==(n=j[t])||n.attrName!==t&&n.keyName!==t||(i[n.attrName]=n.value(e)||void 0),null==(n=E[t])||n.attrName!==t&&n.keyName!==t||(n=E[t],i[n.attrName]=n.value(e)||void 0))}),Object.keys(i).length>0&&(t=T(t,i)),t}function R(e,t){var n=l.default.query(e);if(null==n)return t;if(n.prototype instanceof l.default.Embed){var s={},r=n.value(e);null!=r&&(s[n.blotName]=r,t=(new o.default).insert(s,n.formats(e)))}else"function"==typeof n.formats&&(t=T(t,n.blotName,n.formats(e)));return t}function L(e,t){return O(t,"\n")||(C(e)||t.length()>0&&e.nextSibling&&C(e.nextSibling))&&t.insert("\n"),t}function D(e,t){if(C(e)&&null!=e.nextElementSibling&&!O(t,"\n\n")){var n=e.offsetHeight+parseFloat(S(e).marginTop)+parseFloat(S(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*n&&t.insert("\n")}return t}function M(e,t){var n=e.data;if("O:P"===e.parentNode.tagName)return t.insert(n.trim());if(0===n.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!S(e.parentNode).whiteSpace.startsWith("pre")){var s=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};n=(n=n.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,s.bind(s,!0)),(null==e.previousSibling&&C(e.parentNode)||null!=e.previousSibling&&C(e.previousSibling))&&(n=n.replace(/^\s+/,s.bind(s,!1))),(null==e.nextSibling&&C(e.parentNode)||null!=e.nextSibling&&C(e.nextSibling))&&(n=n.replace(/\s+$/,s.bind(s,!1)))}return t.insert(n)}k.DEFAULTS={matchers:[],matchVisual:!0},t.default=k,t.matchAttributor=P,t.matchBlot=R,t.matchNewline=L,t.matchSpacing=D,t.matchText=M},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},a=n(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((s=a)&&s.__esModule?s:{default:s}).default);o.blotName="bold",o.tagName=["STRONG","B"],t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var s=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],s=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);s=!0);}catch(l){r=!0,i=l}finally{try{!s&&o.return&&o.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=u(n(2)),a=u(n(0)),o=u(n(5)),l=u(n(10)),c=u(n(9));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=(0,l.default)("quill:toolbar"),f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r,i=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(Array.isArray(i.options.container)){var a=document.createElement("div");m(a,i.options.container),e.container.parentNode.insertBefore(a,e.container),i.container=a}else"string"==typeof i.options.container?i.container=document.querySelector(i.options.container):i.container=i.options.container;return i.container instanceof HTMLElement?(i.container.classList.add("ql-toolbar"),i.controls=[],i.handlers={},Object.keys(i.options.handlers).forEach(function(e){i.addHandler(e,i.options.handlers[e])}),[].forEach.call(i.container.querySelectorAll("button, select"),function(e){i.attach(e)}),i.quill.on(o.default.events.EDITOR_CHANGE,function(e,t){e===o.default.events.SELECTION_CHANGE&&i.update(t)}),i.quill.on(o.default.events.SCROLL_OPTIMIZE,function(){var e=i.quill.selection.getRange(),t=s(e,1)[0];i.update(t)}),i):(r=d.error("Container required for toolbar",i.options),h(i,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,n=[].find.call(e.classList,function(e){return 0===e.indexOf("ql-")});if(n){if(n=n.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[n]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[n])return void d.warn("ignoring attaching to disabled format",n,e);if(null==a.default.query(n))return void d.warn("ignoring attaching to nonexistent format",n,e)}var r="SELECT"===e.tagName?"change":"click";e.addEventListener(r,function(r){var l=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var c=e.options[e.selectedIndex];l=!c.hasAttribute("selected")&&(c.value||!1)}else l=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),r.preventDefault();t.quill.focus();var u=t.quill.selection.getRange(),h=s(u,1)[0];if(null!=t.handlers[n])t.handlers[n].call(t,l);else if(a.default.query(n).prototype instanceof a.default.Embed){if(!(l=prompt("Enter "+n)))return;t.quill.updateContents((new i.default).retain(h.index).delete(h.length).insert(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,l)),o.default.sources.USER)}else t.quill.format(n,l,o.default.sources.USER);t.update(h)}),this.controls.push([n,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach(function(n){var r=s(n,2),i=r[0],a=r[1];if("SELECT"===a.tagName){var o=void 0;if(null==e)o=null;else if(null==t[i])o=a.querySelector("option[selected]");else if(!Array.isArray(t[i])){var l=t[i];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),o=a.querySelector('option[value="'+l+'"]')}null==o?(a.value="",a.selectedIndex=-1):o.selected=!0}else if(null==e)a.classList.remove("ql-active");else if(a.hasAttribute("value")){var c=t[i]===a.getAttribute("value")||null!=t[i]&&t[i].toString()===a.getAttribute("value")||null==t[i]&&!a.getAttribute("value");a.classList.toggle("ql-active",c)}else a.classList.toggle("ql-active",null!=t[i])})}}]),t}(c.default);function p(e,t,n){var s=document.createElement("button");s.setAttribute("type","button"),s.classList.add("ql-"+t),null!=n&&(s.value=n),e.appendChild(s)}function m(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(function(t){var n=document.createElement("span");n.classList.add("ql-formats"),t.forEach(function(e){if("string"==typeof e)p(n,e);else{var t=Object.keys(e)[0],s=e[t];Array.isArray(s)?function(e,t,n){var s=document.createElement("select");s.classList.add("ql-"+t),n.forEach(function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),s.appendChild(t)}),e.appendChild(s)}(n,t,s):p(n,t,s)}}),e.appendChild(n)})}f.DEFAULTS={},f.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var n=this.quill.getFormat();Object.keys(n).forEach(function(t){null!=a.default.query(t,a.default.Scope.INLINE)&&e.quill.format(t,!1)})}else this.quill.removeFormat(t,o.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",o.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,o.default.sources.USER),this.quill.format("direction",e,o.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),n=this.quill.getFormat(t),s=parseInt(n.indent||0);if("+1"===e||"-1"===e){var r="+1"===e?1:-1;"rtl"===n.direction&&(r*=-1),this.quill.format("indent",s+r,o.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,o.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),n=this.quill.getFormat(t);"check"===e?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,o.default.sources.USER):this.quill.format("list","unchecked",o.default.sources.USER):this.quill.format("list",e,o.default.sources.USER)}}},t.default=f,t.addControls=m},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},a=n(28),o=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.label.innerHTML=n,s.container.classList.add("ql-color-picker"),[].slice.call(s.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(e){e.classList.add("ql-primary")}),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"buildItem",value:function(e){var n=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return n.style.backgroundColor=e.getAttribute("value")||"",n}},{key:"selectItem",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,n);var s=this.label.querySelector(".ql-color-label"),r=e&&e.getAttribute("data-value")||"";s&&("line"===s.tagName?s.style.stroke=r:s.style.fill=r)}}]),t}(((s=a)&&s.__esModule?s:{default:s}).default);t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},a=n(28),o=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.container.classList.add("ql-icon-picker"),[].forEach.call(s.container.querySelectorAll(".ql-picker-item"),function(e){e.innerHTML=n[e.getAttribute("data-value")||""]}),s.defaultItem=s.container.querySelector(".ql-selected"),s.selectItem(s.defaultItem),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"selectItem",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,n),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((s=a)&&s.__esModule?s:{default:s}).default);t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),r=function(){function e(t,n){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=n||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){s.root.style.marginTop=-1*s.quill.root.scrollTop+"px"}),this.hide()}return s(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,n=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");var s=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect(),i=0;if(r.right>s.right&&(i=s.right-r.right,this.root.style.left=t+i+"px"),r.left<s.left&&(i=s.left-r.left,this.root.style.left=t+i+"px"),r.bottom>s.bottom){var a=r.bottom-r.top,o=e.bottom-e.top+a;this.root.style.top=n-o+"px",this.root.classList.add("ql-flip")}return i}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],s=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);s=!0);}catch(l){r=!0,i=l}finally{try{!s&&o.return&&o.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),a=f(n(3)),o=f(n(8)),l=n(43),c=f(l),u=f(n(27)),h=n(15),d=f(n(41));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],v=function(e){function t(e,n){p(this,t),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=y);var s=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.quill.container.classList.add("ql-snow"),s}return g(t,e),i(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),d.default),this.tooltip=new b(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(t,n){e.handlers.link.call(e,!n.format.link)})}}]),t}(c.default);v.DEFAULTS=(0,a.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var n=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(n)&&0!==n.indexOf("mailto:")&&(n="mailto:"+n),this.quill.theme.tooltip.edit("link",n)}else this.quill.format("link",!1)}}}}});var b=function(e){function t(e,n){p(this,t);var s=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.preview=s.root.querySelector("a.ql-preview"),s}return g(t,e),i(t,[{key:"listen",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(t){if(null!=e.linkRange){var n=e.linkRange;e.restoreFocus(),e.quill.formatText(n,"link",!1,o.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()}),this.quill.on(o.default.events.SELECTION_CHANGE,function(t,n,r){if(null!=t){if(0===t.length&&r===o.default.sources.USER){var i=e.quill.scroll.descendant(u.default,t.index),a=s(i,2),l=a[0],c=a[1];if(null!=l){e.linkRange=new h.Range(t.index-c,l.length());var d=u.default.formats(l.domNode);return e.preview.textContent=d,e.preview.setAttribute("href",d),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}})}},{key:"show",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(l.BaseTooltip);b.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=L(n(29)),r=n(36),i=n(38),a=n(64),o=L(n(65)),l=L(n(66)),c=n(67),u=L(c),h=n(37),d=n(26),f=n(39),p=n(40),m=L(n(56)),g=L(n(68)),y=L(n(27)),v=L(n(69)),b=L(n(70)),x=L(n(71)),w=L(n(72)),N=L(n(73)),_=n(13),j=L(_),E=L(n(74)),k=L(n(75)),T=L(n(57)),S=L(n(41)),O=L(n(28)),C=L(n(59)),A=L(n(60)),I=L(n(61)),P=L(n(108)),R=L(n(62));function L(e){return e&&e.__esModule?e:{default:e}}s.default.register({"attributors/attribute/direction":i.DirectionAttribute,"attributors/class/align":r.AlignClass,"attributors/class/background":h.BackgroundClass,"attributors/class/color":d.ColorClass,"attributors/class/direction":i.DirectionClass,"attributors/class/font":f.FontClass,"attributors/class/size":p.SizeClass,"attributors/style/align":r.AlignStyle,"attributors/style/background":h.BackgroundStyle,"attributors/style/color":d.ColorStyle,"attributors/style/direction":i.DirectionStyle,"attributors/style/font":f.FontStyle,"attributors/style/size":p.SizeStyle},!0),s.default.register({"formats/align":r.AlignClass,"formats/direction":i.DirectionClass,"formats/indent":a.IndentClass,"formats/background":h.BackgroundStyle,"formats/color":d.ColorStyle,"formats/font":f.FontClass,"formats/size":p.SizeClass,"formats/blockquote":o.default,"formats/code-block":j.default,"formats/header":l.default,"formats/list":u.default,"formats/bold":m.default,"formats/code":_.Code,"formats/italic":g.default,"formats/link":y.default,"formats/script":v.default,"formats/strike":b.default,"formats/underline":x.default,"formats/image":w.default,"formats/video":N.default,"formats/list/item":c.ListItem,"modules/formula":E.default,"modules/syntax":k.default,"modules/toolbar":T.default,"themes/bubble":P.default,"themes/snow":R.default,"ui/icons":S.default,"ui/picker":O.default,"ui/icon-picker":A.default,"ui/color-picker":C.default,"ui/tooltip":I.default},!0),t.default=s.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},a=n(0),o=(s=a)&&s.__esModule?s:{default:s},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"add",value:function(e,n){if("+1"===n||"-1"===n){var s=this.value(e)||0;n="+1"===n?s+1:s-1}return 0===n?(this.remove(e),!0):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,n)}},{key:"canAdd",value:function(e,n){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,n)||i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(n))}},{key:"value",value:function(e){return parseInt(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(o.default.Attributor.Class),c=new l("indent","ql-indent",{scope:o.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,r=n(4),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((s=r)&&s.__esModule?s:{default:s}).default);i.blotName="blockquote",i.tagName="blockquote",t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=n(4),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((s=i)&&s.__esModule?s:{default:s}).default);a.blotName="header",a.tagName=["H1","H2","H3","H4","H5","H6"],t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),r=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},i=l(n(0)),a=l(n(4)),o=l(n(25));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),s(t,[{key:"format",value:function(e,n){e!==f.blotName||n?r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n):this.replaceWith(i.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,n){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,n),this):(this.parent.unwrap(),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,n))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:r(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(a.default);d.blotName="list-item",d.tagName="LI";var f=function(e){function t(e){c(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),s=function(t){if(t.target.parentNode===e){var s=n.statics.formats(e),r=i.default.find(t.target);"checked"===s?r.format("list","unchecked"):"unchecked"===s&&r.format("list","checked")}};return e.addEventListener("touchstart",s),e.addEventListener("mousedown",s),n}return h(t,e),s(t,null,[{key:"create",value:function(e){var n="ordered"===e?"OL":"UL",s=r(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,n);return"checked"!==e&&"unchecked"!==e||s.setAttribute("data-checked","checked"===e),s}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),s(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,n=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var e,t,n}},{key:"insertBefore",value:function(e,n){if(e instanceof d)r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n);else{var s=null==n?this.length():n.offset(this),i=this.split(s);i.parent.insertBefore(e,i)}}},{key:"optimize",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&n.domNode.tagName===this.domNode.tagName&&n.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(n.moveChildren(this),n.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var n=i.default.create(this.statics.defaultChild);e.moveChildren(n),this.appendChild(n)}r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(o.default);f.blotName="list",f.scope=i.default.Scope.BLOCK_BLOT,f.tagName=["OL","UL"],f.defaultChild="list-item",f.allowedChildren=[d],t.ListItem=d,t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,r=n(56),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((s=r)&&s.__esModule?s:{default:s}).default);i.blotName="italic",i.tagName=["EM","I"],t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},a=n(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((s=a)&&s.__esModule?s:{default:s}).default);o.blotName="script",o.tagName=["SUB","SUP"],t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,r=n(6),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((s=r)&&s.__esModule?s:{default:s}).default);i.blotName="strike",i.tagName="S",t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,r=n(6),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((s=r)&&s.__esModule?s:{default:s}).default);i.blotName="underline",i.tagName="U",t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},a=n(0),o=(s=a)&&s.__esModule?s:{default:s},l=n(27),c=["alt","height","width"],u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"format",value:function(e,n){c.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}],[{key:"create",value:function(e){var n=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&n.setAttribute("src",this.sanitize(e)),n}},{key:"formats",value:function(e){return c.reduce(function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t},{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,l.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(o.default.Embed);u.blotName="image",u.tagName="IMG",t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},a=n(4),o=n(27),l=(s=o)&&s.__esModule?s:{default:s},c=["height","width"],u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"format",value:function(e,n){c.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}],[{key:"create",value:function(e){var n=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen",!0),n.setAttribute("src",this.sanitize(e)),n}},{key:"formats",value:function(e){return c.reduce(function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t},{})}},{key:"sanitize",value:function(e){return l.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(a.BlockEmbed);u.blotName="video",u.className="ql-video",u.tagName="IFRAME",t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),r=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},i=l(n(35)),a=l(n(5)),o=l(n(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),s(t,null,[{key:"create",value:function(e){var n=r(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(i.default);d.blotName="formula",d.className="ql-formula",d.tagName="SPAN";var f=function(e){function t(){c(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return h(t,e),s(t,null,[{key:"register",value:function(){a.default.register(d,!0)}}]),t}(o.default);t.FormulaBlot=d,t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),r=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},i=l(n(0)),a=l(n(5)),o=l(n(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),s(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(l(n(13)).default);d.className="ql-syntax";var f=new i.default.Attributor.Class("token","hljs",{scope:i.default.Scope.INLINE}),p=function(e){function t(e,n){c(this,t);var s=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if("function"!=typeof s.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var r=null;return s.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(r),r=setTimeout(function(){s.highlight(),r=null},s.options.interval)}),s.highlight(),s}return h(t,e),s(t,null,[{key:"register",value:function(){a.default.register(f,!0),a.default.register(d,!0)}}]),s(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(a.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(d).forEach(function(t){t.highlight(e.options.highlight)}),this.quill.update(a.default.sources.SILENT),null!=t&&this.quill.setSelection(t,a.default.sources.SILENT)}}}]),t}(o.default);p.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=d,t.CodeToken=f,t.default=p},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var s=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,s)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(s):void 0},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=h(n(3)),a=h(n(8)),o=n(43),l=h(o),c=n(15),u=h(n(41));function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],g=function(e){function t(e,n){d(this,t),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=m);var s=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.quill.container.classList.add("ql-bubble"),s}return p(t,e),r(t,[{key:"extendToolbar",value:function(e){this.tooltip=new y(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),u.default)}}]),t}(l.default);g.DEFAULTS=(0,i.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var y=function(e){function t(e,n){d(this,t);var s=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.quill.on(a.default.events.EDITOR_CHANGE,function(e,t,n,r){if(e===a.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&r===a.default.sources.USER){s.show(),s.root.style.left="0px",s.root.style.width="",s.root.style.width=s.root.offsetWidth+"px";var i=s.quill.getLines(t.index,t.length);if(1===i.length)s.position(s.quill.getBounds(t));else{var o=i[i.length-1],l=s.quill.getIndex(o),u=Math.min(o.length()-1,t.index+t.length-l),h=s.quill.getBounds(new c.Range(l,u));s.position(h)}}else document.activeElement!==s.textbox&&s.quill.hasFocus()&&s.hide()}),s}return p(t,e),r(t,[{key:"listen",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){e.root.classList.remove("ql-editing")}),this.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var n=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),r=this.root.querySelector(".ql-tooltip-arrow");if(r.style.marginLeft="",0===n)return n;r.style.marginLeft=-1*n-r.offsetWidth/2+"px"}}]),t}(o.BaseTooltip);y.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=y,t.default=g},function(e,t,n){e.exports=n(63)}]).default};var Ub=qb.exports=Db(),Fb=l&&l.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Vb=l&&l.__assign||function(){return Vb=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Vb.apply(this,arguments)},Bb=l&&l.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var s=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,o=i.length;a<o;a++,r++)s[r]=i[a];return s},zb=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Hb=zb(e),$b=zb(t),Kb=zb(Mb),Wb=zb(Ub);function Gb(e){Promise.resolve().then(e)}const Qb=c(function(e){function t(t){var n=e.call(this,t)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(e,t,s,r){var i,a,o,l;"text-change"===e?null===(a=(i=n).onEditorChangeText)||void 0===a||a.call(i,n.editor.root.innerHTML,t,r,n.unprivilegedEditor):"selection-change"===e&&(null===(l=(o=n).onEditorChangeSelection)||void 0===l||l.call(o,t,r,n.unprivilegedEditor))};var s=n.isControlled()?t.value:t.defaultValue;return n.value=null!=s?s:"",n}return Fb(t,e),t.prototype.validateProps=function(e){var t;if(Hb.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Hb.default.Children.count(e.children)&&"textarea"===(null===(t=Hb.default.Children.only(e.children))||void 0===t?void 0:t.type))throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,t){var n,s=this;if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){var r=this.getEditorContents(),i=null!=(n=e.value)?n:"";this.isEqualValue(i,r)||this.setEditorContents(this.editor,i)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),Bb(this.cleanProps,this.dirtyProps).some(function(t){return!Kb.default(e[t],s.props[t])})},t.prototype.shouldComponentRegenerate=function(e){var t=this;return this.dirtyProps.some(function(n){return!Kb.default(e[n],t.props[n])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,t){var n=this;if(this.editor&&this.shouldComponentRegenerate(e)){var s=this.editor.getContents(),r=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:r},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){var i=this.regenerationSnapshot,a=(s=i.delta,i.selection);delete this.regenerationSnapshot,this.instantiateEditor();var o=this.editor;o.setContents(s),Gb(function(){return n.setEditorSelection(o,a)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,t){var n=new Wb.default(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(n,t.tabIndex),this.hookEditor(n),n},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,t){return this.isDelta(e)&&this.isDelta(t)?Kb.default(e.ops,t.ops):Kb.default(e,t)},t.prototype.setEditorContents=function(e,t){var n=this;this.value=t;var s=this.getEditorSelection();"string"==typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),Gb(function(){return n.setEditorSelection(e,s)})},t.prototype.setEditorSelection=function(e,t){if(this.selection=t,t){var n=e.getLength();t.index=Math.max(0,Math.min(t.index,n-1)),t.length=Math.max(0,Math.min(t.length,n-1-t.index)),e.setSelection(t)}},t.prototype.setEditorTabIndex=function(e,t){var n,s;(null===(s=null===(n=e)||void 0===n?void 0:n.scroll)||void 0===s?void 0:s.domNode)&&(e.scroll.domNode.tabIndex=t)},t.prototype.setEditorReadOnly=function(e,t){t?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var t=e;return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=$b.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(3===e.nodeType)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,t=this.props,n=t.children,s=t.preserveWhitespace,r={key:this.state.generation,ref:function(t){e.editingArea=t}};return Hb.default.Children.count(n)?Hb.default.cloneElement(Hb.default.Children.only(n),r):s?Hb.default.createElement("pre",Vb({},r)):Hb.default.createElement("div",Vb({},r))},t.prototype.render=function(){var e;return Hb.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,null!=e?e:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,t,n,s){var r,i;if(this.editor){var a=this.isDelta(this.value)?s.getContents():s.getHTML();a!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=a,null===(i=(r=this.props).onChange)||void 0===i||i.call(r,e,t,n,s))}},t.prototype.onEditorChangeSelection=function(e,t,n){var s,r,i,a,o,l;if(this.editor){var c=this.getEditorSelection(),u=!c&&e,h=c&&!e;Kb.default(e,c)||(this.selection=e,null===(r=(s=this.props).onChangeSelection)||void 0===r||r.call(s,e,t,n),u?null===(a=(i=this.props).onFocus)||void 0===a||a.call(i,e,t,n):h&&(null===(l=(o=this.props).onBlur)||void 0===l||l.call(o,c,t,n)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=Wb.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(Hb.default.Component)),Yb=()=>{const{id:t}=i(),n=o(),s=Boolean(t),[a,l]=e.useState({title:"",author:"",publishDate:(new Date).toISOString().split("T")[0],status:"draft",content:""}),[c,u]=e.useState(null),[h,d]=e.useState(""),[f,p]=e.useState(!1),[m,g]=e.useState(""),[y,v]=e.useState(s);e.useEffect(()=>{s&&t&&b()},[s,t]);const b=async()=>{try{const e=await(async e=>{const t=tf(fm,bm,e),n=await Xf(t);return n.exists()?{id:n.id,...n.data()}:null})(t);e&&(l({title:e.title,author:e.author,publishDate:e.publishDate,status:e.status,content:e.content}),e.imageUrl&&d(e.imageUrl))}catch(e){g("Error loading blog post")}finally{v(!1)}};return y?_.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:_.jsx("span",{className:"visually-hidden",children:"Loading..."})}),_.jsx("p",{className:"text-muted",children:"Loading blog post..."})]})}):_.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f8f9fa",paddingTop:"80px"},children:[_.jsx("section",{className:"py-5",style:{backgroundColor:"#336021"},children:_.jsx("div",{className:"container",children:_.jsxs("div",{className:"row align-items-center",children:[_.jsx("div",{className:"col-lg-8",children:_.jsxs("div",{className:"text-white",children:[_.jsxs(r,{to:"/admin/dashboard",className:"text-white text-decoration-none mb-3 d-inline-block",children:[_.jsx("i",{className:"fas fa-arrow-left me-2"}),"Back to Dashboard"]}),_.jsx("h1",{className:"display-4 fw-bold mb-2",children:s?"Edit Blog Post":"Create New Blog Post"}),_.jsx("p",{className:"lead mb-0",children:s?"Update your existing blog post":"Write and publish a new blog post"})]})}),_.jsx("div",{className:"col-lg-4 text-lg-end",children:_.jsx("div",{className:"text-white-50",children:_.jsx("i",{className:"fas fa-edit fs-1"})})})]})})}),_.jsx("div",{className:"container py-5",children:_.jsxs("form",{onSubmit:async e=>{e.preventDefault(),p(!0),g("");try{const e={...a,image:c||void 0};s&&t?await(async(e,t)=>{const n=tf(fm,bm,e),s=xm(t.title);let r={slug:s,title:t.title,author:t.author,publishDate:t.publishDate,status:t.status,content:t.content,excerpt:t.content.replace(/<[^>]*>/g,"").substring(0,150)+"..."};t.image&&(r.imageUrl=await wm(t.image,s)),await ep(n,r)})(t,e):await Nm(e),n("/admin/dashboard")}catch(r){g("Error saving blog post")}finally{p(!1)}},children:[m&&_.jsxs("div",{className:"alert alert-danger d-flex align-items-center mb-4",role:"alert",children:[_.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),_.jsx("div",{children:m})]}),_.jsxs("div",{className:"row g-4",children:[_.jsx("div",{className:"col-lg-8",children:_.jsxs("div",{className:"card border-0 shadow-sm mb-4",children:[_.jsx("div",{className:"card-header bg-white border-bottom",children:_.jsxs("h5",{className:"mb-0 fw-bold",children:[_.jsx("i",{className:"fas fa-file-alt text-primary me-2"}),"Post Content"]})}),_.jsxs("div",{className:"card-body",children:[_.jsxs("div",{className:"mb-4",children:[_.jsxs("label",{htmlFor:"title",className:"form-label fw-semibold",children:[_.jsx("i",{className:"fas fa-heading text-muted me-2"}),"Title *"]}),_.jsx("input",{type:"text",id:"title",className:"form-control form-control-lg",placeholder:"Enter your blog post title...",value:a.title,onChange:e=>l({...a,title:e.target.value}),required:!0})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"form-label fw-semibold",children:[_.jsx("i",{className:"fas fa-align-left text-muted me-2"}),"Content *"]}),_.jsx("div",{className:"border rounded",children:_.jsx(Qb,{theme:"snow",value:a.content,onChange:e=>l({...a,content:e}),modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["link","image"],["clean"]]},style:{minHeight:"400px"}})})]})]})]})}),_.jsxs("div",{className:"col-lg-4",children:[_.jsxs("div",{className:"card border-0 shadow-sm mb-4",children:[_.jsx("div",{className:"card-header bg-white border-bottom",children:_.jsxs("h6",{className:"mb-0 fw-bold",children:[_.jsx("i",{className:"fas fa-cog text-success me-2"}),"Publish Settings"]})}),_.jsxs("div",{className:"card-body",children:[_.jsxs("div",{className:"mb-3",children:[_.jsx("label",{htmlFor:"status",className:"form-label fw-semibold",children:"Status"}),_.jsxs("select",{id:"status",className:"form-select",value:a.status,onChange:e=>l({...a,status:e.target.value}),children:[_.jsxs("option",{value:"draft",children:[_.jsx("i",{className:"fas fa-clock"})," Draft"]}),_.jsxs("option",{value:"published",children:[_.jsx("i",{className:"fas fa-check-circle"})," Published"]})]})]}),_.jsxs("div",{className:"mb-3",children:[_.jsx("label",{htmlFor:"publishDate",className:"form-label fw-semibold",children:"Publish Date"}),_.jsx("input",{type:"date",id:"publishDate",className:"form-control",value:a.publishDate,onChange:e=>l({...a,publishDate:e.target.value}),required:!0})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"author",className:"form-label fw-semibold",children:"Author *"}),_.jsx("input",{type:"text",id:"author",className:"form-control",placeholder:"Author name",value:a.author,onChange:e=>l({...a,author:e.target.value}),required:!0})]})]})]}),_.jsxs("div",{className:"card border-0 shadow-sm mb-4",children:[_.jsx("div",{className:"card-header bg-white border-bottom",children:_.jsxs("h6",{className:"mb-0 fw-bold",children:[_.jsx("i",{className:"fas fa-image text-warning me-2"}),"Featured Image"]})}),_.jsxs("div",{className:"card-body",children:[h&&_.jsxs("div",{className:"position-relative mb-3",children:[_.jsx("img",{src:h,alt:"Preview",className:"img-fluid rounded border",style:{maxHeight:"200px",width:"100%",objectFit:"cover"}}),_.jsx("button",{type:"button",onClick:()=>{d(""),u(null)},className:"btn btn-danger btn-sm position-absolute top-0 end-0 m-2",children:_.jsx("i",{className:"fas fa-times"})})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"image",className:"form-label fw-semibold",children:"Upload Image"}),_.jsx("input",{type:"file",id:"image",className:"form-control",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];u(t);const n=new FileReader;n.onload=e=>{var t;d(null==(t=e.target)?void 0:t.result)},n.readAsDataURL(t)}}}),_.jsxs("div",{className:"form-text",children:[_.jsx("i",{className:"fas fa-info-circle me-1"}),"Recommended: 1200x630px, max 5MB"]})]})]})]}),_.jsx("div",{className:"card border-0 shadow-sm",children:_.jsx("div",{className:"card-body",children:_.jsxs("div",{className:"d-grid gap-2",children:[_.jsx("button",{type:"submit",disabled:f,className:"btn btn-success btn-lg",children:f?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),s?"Updating...":"Creating..."]}):_.jsxs(_.Fragment,{children:[_.jsx("i",{className:"fas fa-save me-2"}),s?"Update Post":"Create Post"]})}),_.jsxs("button",{type:"button",onClick:()=>n("/admin/dashboard"),className:"btn btn-outline-secondary",children:[_.jsx("i",{className:"fas fa-times me-2"}),"Cancel"]})]})})})]})]})]})})]})},Xb=()=>{const[t,n]=e.useState([]);e.useEffect(()=>{const e=JSON.parse(localStorage.getItem("solarQuotes")||"[]");n(e.reverse())},[]);return _.jsx("div",{className:"container-fluid py-4",children:_.jsx("div",{className:"row",children:_.jsxs("div",{className:"col-12",children:[_.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[_.jsx("h2",{children:"Solar Quote Requests"}),_.jsxs("div",{children:[_.jsxs("button",{className:"btn btn-success me-2",onClick:()=>{const e=["Name,Email,Phone,Address,Roof Type,Phases,Notes,Date,API Submitted",...t.map(e=>`"${e.firstName} ${e.lastName}","${e.email}","${e.phone}","${e.address}","${e.roofType}","${e.numberOfPhases}","${e.notes}","${new Date(e.timestamp).toLocaleDateString()}","${e.apiSubmitted?"Yes":"No"}"`)].join("\n"),n=new Blob([e],{type:"text/csv"}),s=window.URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=`solar-quotes-${(new Date).toISOString().split("T")[0]}.csv`,r.click(),window.URL.revokeObjectURL(s)},children:[_.jsx("i",{className:"fas fa-download me-2"}),"Export CSV"]}),_.jsxs("button",{className:"btn btn-danger",onClick:()=>{confirm("Are you sure you want to clear all quotes?")&&(localStorage.removeItem("solarQuotes"),n([]))},children:[_.jsx("i",{className:"fas fa-trash me-2"}),"Clear All"]})]})]}),0===t.length?_.jsxs("div",{className:"alert alert-info",children:[_.jsx("i",{className:"fas fa-info-circle me-2"}),"No quote requests yet."]}):_.jsx(_.Fragment,{children:_.jsxs("div",{className:"row mb-3",children:[_.jsx("div",{className:"col-md-4",children:_.jsx("div",{className:"card bg-primary text-white",children:_.jsxs("div",{className:"card-body text-center",children:[_.jsx("h4",{children:t.length}),_.jsx("small",{children:"Total Quotes"})]})})}),_.jsx("div",{className:"col-md-4",children:_.jsx("div",{className:"card bg-success text-white",children:_.jsxs("div",{className:"card-body text-center",children:[_.jsx("h4",{children:t.filter(e=>e.apiSubmitted).length}),_.jsx("small",{children:"Sent to OpenSolar"})]})})}),_.jsx("div",{className:"col-md-4",children:_.jsx("div",{className:"card bg-warning text-dark",children:_.jsxs("div",{className:"card-body text-center",children:[_.jsx("h4",{children:t.filter(e=>!e.apiSubmitted).length}),_.jsx("small",{children:"Local Only"})]})})})]})}),t.length>0&&_.jsx("div",{className:"card",children:_.jsx("div",{className:"card-body",children:_.jsx("div",{className:"table-responsive",children:_.jsxs("table",{className:"table table-striped",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{children:"Date"}),_.jsx("th",{children:"Name"}),_.jsx("th",{children:"Email"}),_.jsx("th",{children:"Phone"}),_.jsx("th",{children:"Address"}),_.jsx("th",{children:"Roof Type"}),_.jsx("th",{children:"Phases"}),_.jsx("th",{children:"Notes"}),_.jsx("th",{children:"API Status"})]})}),_.jsx("tbody",{children:t.map(e=>_.jsxs("tr",{children:[_.jsx("td",{children:new Date(e.timestamp).toLocaleDateString()}),_.jsxs("td",{children:[e.firstName," ",e.lastName]}),_.jsx("td",{children:_.jsx("a",{href:`mailto:${e.email}`,children:e.email})}),_.jsx("td",{children:_.jsx("a",{href:`tel:${e.phone}`,children:e.phone})}),_.jsx("td",{children:e.address}),_.jsx("td",{children:e.roofType}),_.jsx("td",{children:e.numberOfPhases}),_.jsx("td",{children:e.notes||"-"}),_.jsx("td",{children:e.apiSubmitted?_.jsxs("span",{className:"badge bg-success",children:[_.jsx("i",{className:"fas fa-check me-1"}),"Sent"]}):_.jsxs("span",{className:"badge bg-warning text-dark",children:[_.jsx("i",{className:"fas fa-clock me-1"}),"Local Only"]})})]},e.id))})]})})})})]})})})};function Jb(){return _.jsx(ym,{children:_.jsx(u,{children:_.jsxs("div",{className:"min-h-screen",children:[_.jsx(k,{}),_.jsxs(h,{children:[_.jsx(d,{path:"/",element:_.jsxs(S,{children:[_.jsx(P,{}),_.jsx(ie,{})]})}),_.jsx(d,{path:"/about",element:_.jsx(S,{children:_.jsx(R,{})})}),_.jsx(d,{path:"/services",element:_.jsx(S,{children:_.jsx(L,{})})}),_.jsx(d,{path:"/services/solar-battery-ev",element:_.jsx(S,{children:_.jsx(ee,{})})}),_.jsx(d,{path:"/services/design-consultancy",element:_.jsx(S,{children:_.jsx(te,{})})}),_.jsx(d,{path:"/services/energy-audit",element:_.jsx(S,{children:_.jsx(ne,{})})}),_.jsx(d,{path:"/services/maintenance-servicing",element:_.jsx(S,{children:_.jsx(se,{})})}),_.jsx(d,{path:"/services/wind-energy",element:_.jsx(S,{children:_.jsx(re,{})})}),_.jsx(d,{path:"/projects",element:_.jsx(S,{children:_.jsx(D,{})})}),_.jsx(d,{path:"/projects/:serviceId",element:_.jsx(S,{children:_.jsx(Z,{})})}),_.jsx(d,{path:"/contact",element:_.jsx(S,{children:_.jsx(Y,{})})}),_.jsx(d,{path:"/quote",element:_.jsx(S,{children:_.jsx(J,{})})}),_.jsx(d,{path:"/blogs",element:_.jsx(S,{children:_.jsx(jm,{})})}),_.jsx(d,{path:"/blogs/:slug",element:_.jsx(S,{children:_.jsx(Em,{})})}),_.jsx(d,{path:"/adminblog",element:_.jsx(km,{})}),_.jsx(d,{path:"/admin/dashboard",element:_.jsx(vm,{children:_.jsx(Tm,{})})}),_.jsx(d,{path:"/admin/blog/new",element:_.jsx(vm,{children:_.jsx(Yb,{})})}),_.jsx(d,{path:"/admin/blog/edit/:id",element:_.jsx(vm,{children:_.jsx(Yb,{})})}),_.jsx(d,{path:"/admin/quotes",element:_.jsx(vm,{children:_.jsx(Xb,{})})})]}),_.jsx(T,{})]})})})}N(document.getElementById("root")).render(_.jsx(e.StrictMode,{children:_.jsx(Jb,{})}));
